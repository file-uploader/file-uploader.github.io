(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("30Go"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"30Go":function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new c(t,n)))}class c{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("30Go"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===S||e===I)return-1;if(e===S||t===I)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R,D,L,F,M,U,V,q,H,z,B=function(t){var e,n,r,i,s;Object(o.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},W=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(W.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),X="firebaseio.com",J="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),t===J)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return N(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.m)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof $?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.E)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(N(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];N(n,function(t,e){var n=new $(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},mt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(R="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,L=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=R.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=R.charAt(L[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(S,t),r=new Ct(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,F)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,F)},e.prototype.toString=function(){return".key"},e}(Ot),St=new Tt,It=function(t){return"number"==typeof t?"number:"+B(t):"string:"+t},xt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===M||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},jt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return U},set:function(t){U=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+It(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(I,new jt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=V(t);return new Ct(e,new jt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Rt.EMPTY_NODE,this.right=null!=o?o:Rt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Rt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Rt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Rt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Dt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ft=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Pt(s,o.node,Pt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Pt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Pt.BLACK):(a(h,Pt.BLACK),a(h,Pt.RED))}return o}(new Lt(t.length));return new Rt(r||e,o)},Mt={},Ut=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Mt&&At,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Mt},{".priority":At})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Rt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ct.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Ft(s,e.getCompare()):Mt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Mt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ct.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Ft(a,s.getCompare())}return Mt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ct(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===Mt)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t}),this.indexSet_)},t}();function Vt(t,e){return x(t.name,e.name)}function qt(t,e){return x(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return z||(z=new t(new Rt(qt),null,Ut.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||z},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?z:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ct(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?z:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+It(this.getPriority().val())+":"),this.forEachChild(At,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zt?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),zt=new(function(t){function e(){return t.call(this,new Rt(qt),Ht.EMPTY_NODE,Ut.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function Bt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new jt(t,Bt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return N(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=Bt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Bt(e))}var r=[],i=!1;if(N(t,function(t,e){if("."!==t.substring(0,1)){var n=Bt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}}),0===r.length)return Ht.EMPTY_NODE;var s=Ft(r,Vt,function(t){return t.name},qt);if(i){var a=Ft(r,At.getCompare());return new Ht(s,Bt(e),new Ut({".priority":a},{".priority":At}))}return new Ht(s,Bt(e),Ut.Default)}Object.defineProperties(Ct,{MIN:{value:new Ct(S,Ht.EMPTY_NODE)},MAX:{value:new Ct(I,zt)}}),Tt.__EMPTY_NODE=Ht.EMPTY_NODE,jt.__childrenNodeConstructor=Ht,M=zt,q=zt,V=Bt;var Wt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),Kt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,zt);return new Ct(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ot),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),At))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $t("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Jt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new $t(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof Kt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Jt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Xt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Jt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Kt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new jt(a,Bt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new jt(o))),u.forEachChild(At,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,function(t,e){n.remember(new $(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(o.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),pe=function(){function t(t,e){void 0===e&&(ue||(ue=new Rt(j)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return N(e,function(t,e){n=n.set(new $(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new ye(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(o.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new me(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new me(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new me(Ht.EMPTY_NODE,!1,!1),new me(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(At,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Oe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new me(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Te(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.e)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=e.popFront(),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ce,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Oe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Oe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pe.Empty;return a.getNode().forEachChild(St,function(t,e){u=u.set(new $(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pe.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ce,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Oe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ie=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.f)("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Se(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new me(a,o.isFullyInitialized(),r.filtersNodes()),l=new me(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Ie(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,function(t,e){n.push(_e.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),je=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.e)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new me(a,u,!1),new me(r,i,!1));s=new xe(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new pe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return N(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,pe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild($.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,function(e,n){t.push(new Ct(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ct(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return ke($.Empty,this.writeTree_,t)},t.Empty=new t(new pe(null)),t}();function ke(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ke(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Pe=function(){function t(){this.visibleWrites_=Ae.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ne(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):N(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite($.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite($.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,function(t,e){var r=i.childCompoundWrite(new $(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode($.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ae.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=$.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=$.relativePath(a,n),r=r.addWrite($.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=$.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=r.addWrites($.Empty,s.children);else{var c=Object(o.D)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite($.Empty,l)}}}}}return r},t}(),Ne=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Re=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=pe.Empty,this.pendingWriteTree_=new Pe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ye(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pe.Empty;return null!=n.snap?r=r.set($.Empty,!0):N(n.children,function(t,e){r=r.set(new $(t),e)}),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new ye(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=pe.fromObject(n),l=new ve(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new je,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),N(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),N(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),Fe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Me=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&N(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ue=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Me(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;N(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ve=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),He=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ze=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(He),Be=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(He),We=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ge="start",Ke="close",Qe=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Fe.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new We(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $e(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ge)n.id=s,n.password=a;else{if(o!==Ke)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Ye="";function Xe(t){Ye=t}var Je=null;"undefined"!=typeof MozWebSocket?Je=MozWebSocket:"undefined"!=typeof WebSocket&&(Je=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Fe.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(J,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Ye+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Je(this.connURL,[],r)}else this.mySock=new Je(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Je&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Qe,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),ze.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Be.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ye.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Be.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Fe.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Fe.getOrCreateReporter(this.repoInfo_,function(){return new Ue(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new Re({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Re({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,function(t){return Bt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Bt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,function(t){return Bt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Bt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;N(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=Bt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.G)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Bt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(N(e,function(e,n){i=!1,s[e]=oe(t.child(e),Bt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),N(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree($.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree($.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&N(e,function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Me(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);N(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(At,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new Ct(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===At?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(Object(o.e)(this.index_ instanceof Kt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.G)(e),this.startSet_&&(r[n.START_AT]=Object(o.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?yt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=fn,je.__referenceConstructor=fn;var dn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new dn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new dn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;N(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new fn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new fn(this,a.path),At);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.e)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var g=this.generateServerValues(),y=Bt(c,d),v=se(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=gn.SENT,c.retryCount++;var l=$.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new Qt(a,u,At);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===gn.SENT_NEEDS_ABORT?gn.NEEDS_ABORT:gn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===gn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var d=Bt(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=se(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new fn(this,t[s].path),m=new Qt(t[s].currentInputSnapshot,v,At);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)K(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===gn.SENT_NEEDS_ABORT||(e[s].status===gn.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)K(n[s])}};var yn,vn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),mn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new mn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new mn:new vn(t,e);return mt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);mt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),Qe.forceAllow()},forceWebSockets:function(){Qe.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Xe(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),En=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Cn=Object.freeze({__proto__:null,DataConnection:En,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),On=_n.ServerValue;!function(e){Xe(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:fn,Query:Zt,Database:_n,DataSnapshot:Qt,enableLogging:b,INTERNAL:wn,ServerValue:On,TEST_ACCESS:Cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.1.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Io}),n.d(e,"b",function(){return uu}),n.d(e,"c",function(){return ru}),n.d(e,"d",function(){return eu}),n.d(e,"e",function(){return nu}),n.d(e,"f",function(){return Ju}),n.d(e,"g",function(){return Hu}),n.d(e,"h",function(){return uo}),n.d(e,"i",function(){return bu}),n.d(e,"j",function(){return Ps}),n.d(e,"k",function(){return hu}),n.d(e,"l",function(){return Ns}),n.d(e,"m",function(){return Sn}),n.d(e,"n",function(){return Ma}),n.d(e,"o",function(){return K}),n.d(e,"p",function(){return h}),n.d(e,"q",function(){return G}),n.d(e,"r",function(){return So}),n.d(e,"s",function(){return Js}),n.d(e,"t",function(){return Zs}),n.d(e,"u",function(){return lu}),n.d(e,"v",function(){return ut}),n.d(e,"w",function(){return Bu}),n.d(e,"x",function(){return at}),n.d(e,"y",function(){return Fu}),n.d(e,"z",function(){return Eu}),n.d(e,"A",function(){return f}),n.d(e,"B",function(){return au}),n.d(e,"C",function(){return su}),n.d(e,"D",function(){return Fs}),n.d(e,"E",function(){return Ds}),n.d(e,"F",function(){return Ls}),n.d(e,"G",function(){return Us}),n.d(e,"H",function(){return pr}),n.d(e,"I",function(){return p}),n.d(e,"J",function(){return Ku}),n.d(e,"K",function(){return ra}),n.d(e,"L",function(){return Au}),n.d(e,"M",function(){return lo}),n.d(e,"N",function(){return qs}),n.d(e,"O",function(){return Vs}),n.d(e,"P",function(){return oa}),n.d(e,"Q",function(){return vt}),n.d(e,"R",function(){return Mu}),n.d(e,"S",function(){return Bn}),n.d(e,"T",function(){return k}),n.d(e,"U",function(){return zn}),n.d(e,"V",function(){return Yu}),n.d(e,"W",function(){return Nu}),n.d(e,"X",function(){return cu}),n.d(e,"Y",function(){return ho}),n.d(e,"Z",function(){return wa}),n.d(e,"ab",function(){return fr}),n.d(e,"bb",function(){return $n}),n.d(e,"cb",function(){return Rn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Vn}),n.d(e,"fb",function(){return Mn}),n.d(e,"gb",function(){return Fn}),n.d(e,"hb",function(){return Un}),n.d(e,"ib",function(){return va}),n.d(e,"jb",function(){return $u}),n.d(e,"kb",function(){return ma}),n.d(e,"lb",function(){return ba}),n.d(e,"mb",function(){return Dn}),n.d(e,"nb",function(){return M}),n.d(e,"ob",function(){return Po}),n.d(e,"pb",function(){return Yo}),n.d(e,"qb",function(){return $o}),n.d(e,"rb",function(){return ya}),n.d(e,"sb",function(){return $t}),n.d(e,"tb",function(){return x}),n.d(e,"ub",function(){return Nn}),n.d(e,"vb",function(){return vs}),n.d(e,"wb",function(){return zt}),n.d(e,"xb",function(){return js}),n.d(e,"yb",function(){return Dr}),n.d(e,"zb",function(){return Fo}),n.d(e,"Ab",function(){return ss}),n.d(e,"Bb",function(){return Xa}),n.d(e,"Cb",function(){return wt}),n.d(e,"Db",function(){return xt}),n.d(e,"Eb",function(){return m}),n.d(e,"Fb",function(){return b}),n.d(e,"Gb",function(){return Tt}),n.d(e,"Hb",function(){return jt}),n.d(e,"Ib",function(){return qo}),n.d(e,"Jb",function(){return Ko}),n.d(e,"Kb",function(){return Go}),n.d(e,"Lb",function(){return Wo}),n.d(e,"Mb",function(){return Qo}),n.d(e,"Nb",function(){return En}),n.d(e,"Ob",function(){return gs}),n.d(e,"Pb",function(){return rt}),n.d(e,"Qb",function(){return Ho}),n.d(e,"Rb",function(){return tu}),n.d(e,"Sb",function(){return Xo}),n.d(e,"Tb",function(){return Ja}),n.d(e,"Ub",function(){return ts}),n.d(e,"Vb",function(){return Na}),n.d(e,"Wb",function(){return Ra}),n.d(e,"Xb",function(){return Da}),n.d(e,"Yb",function(){return zo}),n.d(e,"Zb",function(){return es}),n.d(e,"ac",function(){return ja}),n.d(e,"bc",function(){return Aa}),n.d(e,"cc",function(){return Ya}),n.d(e,"dc",function(){return Vo}),n.d(e,"ec",function(){return pe}),n.d(e,"fc",function(){return gr}),n.d(e,"gc",function(){return St}),n.d(e,"hc",function(){return Uo}),n.d(e,"ic",function(){return hs}),n.d(e,"jc",function(){return fs}),n.d(e,"kc",function(){return ps});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function l(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),f=l("Optional"),d=l("Self"),p=l("SkipSelf");var g=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function v(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function m(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function _(t){return w(t,t[C])||w(t,t[S])}function w(t,e){return e&&e.token===t?e:null}function E(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(I))?t[O]:null}const C=y({"\u0275prov":y}),O=y({"\u0275inj":y}),T=y({"\u0275provFallback":y}),S=y({ngInjectableDef:y}),I=y({ngInjectorDef:y});function x(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(x).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function j(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const A=y({__forward_ref__:y});function k(t){return t.__forward_ref__=k,t.toString=function(){return x(this())},t}function P(t){return N(t)?t():t}function N(t){return"function"==typeof t&&t.hasOwnProperty(A)&&t.__forward_ref__===k}const R="undefined"!=typeof globalThis&&globalThis,D="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,F="undefined"!=typeof global&&global,M=R||F||D||L,U=y({"\u0275cmp":y}),V=y({"\u0275dir":y}),q=y({"\u0275pipe":y}),H=y({"\u0275mod":y}),z=y({"\u0275loc":y}),B=y({"\u0275fac":y}),W=y({__NG_ELEMENT_ID__:y});class G{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=m({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const K=new G("INJECTOR",-1),Q={},$=/\n/gm,Y="__source",X=y({provide:String,useValue:y});let J,Z=void 0;function tt(t){const e=Z;return Z=t,e}function et(t){const e=J;return J=t,e}function nt(t,e=g.Default){if(void 0===Z)throw new Error("inject() must be called from an injection context");return null===Z?it(t,void 0,e):Z.get(t,e&g.Optional?null:void 0,e)}function rt(t,e=g.Default){return(J||nt)(P(t),e)}function it(t,e,n){const r=_(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&g.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${x(t)}]`)}function ot(t){const e=[];for(let n=0;n<t.length;n++){const r=P(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=g.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof f||"Optional"===i.ngMetadataName||i===f?n|=g.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=g.SkipSelf:i instanceof d||"Self"===i.ngMetadataName||i===d?n|=g.Self:t=i instanceof h||i===h?i.token:i}e.push(rt(t,n))}else e.push(rt(r))}return e}class st{get(t,e=Q){if(e===Q){const e=new Error(`NullInjectorError: No provider for ${x(t)}!`);throw e.name="NullInjectorError",e}return e}}class at{}class ut{}function ct(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),ct(r,e)):e!==t&&e.push(r)}return e}function lt(t,e){t.forEach(t=>Array.isArray(t)?lt(t,e):e(t))}function ht(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ft(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dt(t,e,n){let r=gt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function pt(t,e){const n=gt(t,e);if(n>=0)return t[1|n]}function gt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var yt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),vt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const mt={},bt=[];let _t=0;function wt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===yt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||bt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||vt.Emulated,id:"c",styles:t.styles||bt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=_t++,n.inputs=It(t.inputs,e),n.outputs=It(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ct):null,n})}function Et(t){return At(t)||function(t){return t[V]||null}(t)}function Ct(t){return function(t){return t[q]||null}(t)}const Ot={};function Tt(t){const e={type:t.type,bootstrap:t.bootstrap||bt,declarations:t.declarations||bt,imports:t.imports||bt,exports:t.exports||bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{Ot[t.id]=t.type}),e}function St(t,e){return u(()=>{const n=Pt(t,!0);n.declarations=e.declarations||bt,n.imports=e.imports||bt,n.exports=e.exports||bt})}function It(t,e){if(null==t)return mt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const xt=wt;function jt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function At(t){return t[U]||null}function kt(t,e){return t.hasOwnProperty(B)?t[B]:null}function Pt(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${x(t)} does not have '\u0275mod' property.`);return n}const Nt=20,Rt=10;function Dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Lt(t){return Array.isArray(t)&&!0===t[1]}function Ft(t){return 0!=(8&t.flags)}function Mt(t){return 2==(2&t.flags)}function Ut(t){return 1==(1&t.flags)}function Vt(t){return null!==t.template}function qt(t){return 0!=(512&t[2])}class Ht{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function zt(){return Bt}function Bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Gt),Wt}function Wt(){const t=Kt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===mt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Gt(t,e,n,r){const i=Kt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:mt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Ht(u&&u.currentValue,e,s===mt),t[r]=e}function Kt(t){return t.__ngSimpleChanges__||null}zt.ngInherit=!0;let Qt=void 0;function $t(t){Qt=t}function Yt(t){return!!t.listen}const Xt={createRenderer:(t,e)=>void 0!==Qt?Qt:"undefined"!=typeof document?document:void 0};function Jt(t){for(;Array.isArray(t);)t=t[0];return t}function Zt(t,e){return Jt(e[t+Nt])}function te(t,e){return Jt(e[t.index])}function ee(t,e){return t.data[e+Nt]}function ne(t,e){return t[e+Nt]}function re(t,e){const n=e[t];return Dt(n)?n:n[0]}function ie(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function oe(t){return 4==(4&t[2])}function se(t){return 128==(128&t[2])}function ae(t,e){return null===t||null==e?null:t[e]}function ue(t){t[18]=0}function ce(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const le={lFrame:ke(null),bindingsEnabled:!0,checkNoChangesMode:!1};function he(){return le.bindingsEnabled}function fe(){return le.lFrame.lView}function de(){return le.lFrame.tView}function pe(t){le.lFrame.contextLView=t}function ge(){return le.lFrame.previousOrParentTNode}function ye(t,e){le.lFrame.previousOrParentTNode=t,le.lFrame.isParent=e}function ve(){return le.lFrame.isParent}function me(){return le.checkNoChangesMode}function be(t){le.checkNoChangesMode=t}function _e(){const t=le.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function we(){return le.lFrame.bindingIndex}function Ee(){return le.lFrame.bindingIndex++}function Ce(t){const e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Oe(t,e){const n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Te(e)}function Te(t){le.lFrame.currentDirectiveIndex=t}function Se(){return le.lFrame.currentQueryIndex}function Ie(t){le.lFrame.currentQueryIndex=t}function xe(t,e){const n=Ae();le.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function je(t,e){const n=Ae(),r=t[1];le.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function Ae(){const t=le.lFrame,e=null===t?null:t.child;return null===e?ke(t):e}function ke(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Pe(){const t=le.lFrame;return le.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Ne=Pe;function Re(){const t=Pe();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function De(){return le.lFrame.selectedIndex}function Le(t){le.lFrame.selectedIndex=t}function Fe(){const t=le.lFrame;return ee(t.tView,t.selectedIndex)}function Me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ue(t,e,n){He(t,e,3,n)}function Ve(t,e,n,r){(3&t[2])===n&&He(t,e,n,r)}function qe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function He(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(ze(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function ze(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function We(t,e,n){const r=Yt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ke(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ge(t){return 3===t||4===t||6===t}function Ke(t){return 64===t.charCodeAt(0)}function Qe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||$e(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function $e(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ye(t){return-1!==t}function Xe(t){return 32767&t}function Je(t){return t>>16}function Ze(t,e){let n=Je(t),r=e;for(;n>0;)r=r[15],n--;return r}function tn(t){return"string"==typeof t?t:null==t?"":""+t}function en(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():tn(t)}const nn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function rn(t){return t instanceof Function?t():t}let on=!0;function sn(t){const e=on;return on=t,e}let an=0;function un(t,e){const n=ln(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,cn(r.data,t),cn(e,null),cn(r.blueprint,null));const i=hn(t,e),o=t.injectorIndex;if(Ye(i)){const t=Xe(i),n=Ze(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function cn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ln(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function hn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function fn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=an++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function dn(t,e,n,r=g.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){xe(e,t);try{const t=i();if(null!=t||r&g.Optional)return t;throw new Error(`No provider for ${en(n)}!`)}finally{Ne()}}else if("number"==typeof i){if(-1===i)return new _n(t,e);let o=null,s=ln(t,e),a=-1,u=r&g.Host?e[16][6]:null;for((-1===s||r&g.SkipSelf)&&(a=-1===s?hn(t,e):e[s+8],bn(r,!1)?(o=e[1],s=Xe(a),e=Ze(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(mn(i,s,t.data)){const t=gn(s,e,n,o,r,u);if(t!==pn)return t}bn(r,e[1].data[s+8]===u)&&mn(i,s,e)?(o=t,s=Xe(a),e=Ze(a,e)):s=-1}}}if(r&g.Optional&&void 0===i&&(i=null),0==(r&(g.Self|g.Host))){const t=e[9],o=et(void 0);try{return t?t.get(n,i,r&g.Optional):it(n,i,r&g.Optional)}finally{et(o)}}if(r&g.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${en(n)}]`)}const pn={};function gn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=yn(a,s,n,null==r?Mt(a)&&on:r!=s&&3===a.type,i&g.Host&&o===a);return null!==u?vn(e,s,u,a):pn}function yn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Vt(t)&&t.type===n)return u}return null}function vn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Be){const s=i;if(s.resolving)throw new Error("Circular dep for "+en(o[n]));const a=sn(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=et(s.injectImpl)),xe(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&et(u),sn(a),s.resolving=!1,Ne()}}return i}function mn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function bn(t,e){return!(t&g.Self||t&g.Host&&e)}class _n{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return dn(this._tNode,this._lView,t,void 0,e)}}function wn(t){const e=t;if(N(t))return()=>{const t=wn(P(e));return t?t():null};let n=kt(e);if(null===n){const t=E(e);n=t&&t.factory}return n||null}function En(t){return u(()=>{const e=t.prototype.constructor,n=e[B]||wn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[B]||wn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Cn(t){return t.ngDebugContext}function On(t){return t.ngOriginalError}function Tn(t,...e){t.error(...e)}class Sn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Tn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Cn(t)?Cn(t):this._findContext(On(t)):null}_findOriginalError(t){let e=On(t);for(;e&&On(e);)e=On(e);return e}}class In{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class xn extends In{getTypeName(){return"HTML"}}class jn extends In{getTypeName(){return"Style"}}class An extends In{getTypeName(){return"Script"}}class kn extends In{getTypeName(){return"URL"}}class Pn extends In{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof In?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof In&&t.getTypeName()||null}function Ln(t){return new xn(t)}function Fn(t){return new jn(t)}function Mn(t){return new An(t)}function Un(t){return new kn(t)}function Vn(t){return new Pn(t)}let qn=!0,Hn=!1;function zn(){return Hn=!0,qn}function Bn(){if(Hn)throw new Error("Cannot enable prod mode after platform setup.");qn=!1}class Wn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Gn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Kn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $n(t){return(t=String(t)).match(Kn)||t.match(Qn)?t:(zn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Yn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Xn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Jn=Yn("area,br,col,hr,img,wbr"),Zn=Yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tr=Yn("rp,rt"),er=Xn(tr,Zn),nr=Xn(Jn,Xn(Zn,Yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xn(tr,Yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),er),rr=Yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ir=Yn("srcset"),or=Xn(rr,ir,Yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sr=Yn("script,style,template");class ar{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!nr.hasOwnProperty(e))return this.sanitizedSomething=!0,!sr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!or.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;rr[o]&&(s=$n(s)),ir[o]&&(r=s,s=(r=String(r)).split(",").map(t=>$n(t.trim())).join(", ")),this.buf.push(" ",e,'="',lr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();nr.hasOwnProperty(e)&&!Jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(lr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cr=/([^\#-~ |!])/g;function lr(t){return t.replace(/&/g,"&amp;").replace(ur,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(cr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function fr(t,e){let n=null;try{hr=hr||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Wn:new Gn(t)}(t);let r=e?String(e):"";n=hr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==o);const s=new ar,a=s.sanitizeChildren(dr(n)||n);return zn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function gr(t){const e=function(){const t=fe();return t&&t[12]}();return e?e.sanitize(pr.URL,t)||"":Rn(t,"URL")?Nn(t):$n(tn(t))}function yr(t,e){t.__ngContext__=e}function vr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function mr(){throw new Error("Cannot mix multi providers and regular providers")}function br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const _r="ng-template";function wr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Er(t){return 0===t.type&&t.tagName!==_r}function Cr(t,e,n){return e===(0!==t.type||n?t.tagName:_r)}function Or(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ge(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Cr(t,u,n)||""===u&&1===e.length){if(Tr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!wr(t.attrs,c,n)){if(Tr(r))return!1;s=!0}continue}const l=Sr(8&r?"class":u,i,Er(t),n);if(-1===l){if(Tr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==br(e,c,0)||2&r&&c!==t){if(Tr(r))return!1;s=!0}}}}else{if(!s&&!Tr(r)&&!Tr(u))return!1;if(s&&Tr(u))continue;s=!1,r=u|1&r}}return Tr(r)||s}function Tr(t){return 0==(1&t)}function Sr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ir(t,e,n=!1){for(let r=0;r<e.length;r++)if(Or(t,e[r],n))return!0;return!1}function xr(t,e){return t?":not("+e.trim()+")":e}function jr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Tr(s)||(e+=xr(o,i),i=""),r=s,o=o||!Tr(r);n++}return""!==i&&(e+=xr(o,i)),e}const Ar={};function kr(t){const e=t[3];return Lt(e)?e[3]:e}function Pr(t){return Rr(t[13])}function Nr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!Lt(t);)t=t[4];return t}function Dr(t){Lr(de(),fe(),De()+t,me())}function Lr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ue(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ve(e,r,0,n)}Le(n)}function Fr(t,e){return t<<17|e<<2}function Mr(t){return t>>17&32767}function Ur(t){return 2|t}function Vr(t){return(131068&t)>>2}function qr(t,e){return-131069&t|e<<2}function Hr(t){return 1|t}function zr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ie(i),n.contentQueries(2,e[o],o)}}}function Br(t,e,n){return Yt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Wr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ue(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Gr(t,e,n,r,i,o){const s=n+Nt,a=t.data[s]||function(t,e,n,r,i,o){const s=ge(),a=ve(),u=a?s:s&&s.parent,c=t.data[n]=ni(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return ye(a,!0),a}function Kr(t,e,n){je(e,e[6]);try{const r=t.viewQuery;null!==r&&Ti(1,r,n);const i=t.template;null!==i&&Yr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&zr(t,e),t.staticViewQueries&&Ti(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Re()}}function Qr(t,e,n,r){const i=e[2];if(256==(256&i))return;je(e,e[6]);const o=me();try{ue(e),le.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Yr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ue(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ve(e,n,0,null),qe(e,0)}if(function(t){for(let e=Pr(t);null!==e;e=Nr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ce(r,1),n[2]|=1024}}}(e),function(t){for(let e=Pr(t);null!==e;e=Nr(e))for(let t=Rt;t<e.length;t++){const n=e[t],r=n[1];se(n)&&Qr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&zr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ue(e,n)}else{const n=t.contentHooks;null!==n&&Ve(e,n,1),qe(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Le(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(Oe(r,i),s(2,e[i])),i++)}}}finally{Le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)mi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ti(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ue(e,n)}else{const n=t.viewHooks;null!==n&&Ve(e,n,2),qe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ce(e[3],-1))}finally{Re()}}function $r(t,e,n,r){const i=e[10],o=!me(),s=oe(e);try{o&&!s&&i.begin&&i.begin(),s&&Kr(t,e,r),Qr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Yr(t,e,n,r,i){const o=De();try{Le(-1),2&r&&e.length>Nt&&Lr(t,e,0,me()),n(r,i)}finally{Le(o)}}function Xr(t,e,n){he()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||un(n,e),yr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Vt(r);o&&pi(e,n,r);const u=vn(e,t,a,n);yr(u,e),null!==s&&gi(0,a-i,u,r,0,s),o&&(re(n.index,e)[8]=u)}}(t,e,n,te(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Nt,u=le.lFrame.currentDirectiveIndex;try{Le(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Te(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?ui(r,i):s&&o.push(null)}}finally{Le(-1),Te(u)}}(t,e,n))}function Jr(t,e,n=te){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Zr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ti(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ti(t,e,n,r,i,o,s,a,u,c){const l=Nt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ar);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function ei(t,e,n,r){const i=Ii(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function ni(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ri(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ii(t,e,n,r,i,o,s,a){const u=te(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(ji(t,n,c,r,i),Mt(e)&&function(t,e){const n=re(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,Yt(o)?o.setProperty(u,r,i):Ke(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function oi(t,e,n,r){let i=!1;if(he()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ir(n,s.selectors,!1)&&(i||(i=[]),fn(un(n,e),t,s.type),Vt(s)?(2&n.flags&&vr(n),li(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,fi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}ci(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Qe(n.mergedAttrs,c.hostAttrs),di(t,e,c),hi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Nt),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Nt),u=!0),si(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Er(e)?null:yi(n,i);o.push(c),s=ri(n,u,s),a=ri(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),ai(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Qe(n.mergedAttrs,n.attrs),i}function si(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ai(t,e,n){for(let r=0;r<n;r++)e.push(Ar),t.blueprint.push(Ar),t.data.push(null)}function ui(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ci(t,e,n){const r=Nt-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function li(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function hi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vt(e)&&(n[""]=t)}}function fi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function di(t,e,n){t.data.push(n);const r=n.factory||(n.factory=kt(n.type)),i=new Be(r,Vt(n),null);t.blueprint.push(i),e.push(i)}function pi(t,e,n){const r=te(e,t),i=Zr(n),o=t[10],s=wi(t,Wr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function yi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function vi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function mi(t,e){const n=re(e,t);if(se(n)){const t=n[1];80&n[2]?Qr(t,n,t.template,n[8]):n[5]>0&&bi(n)}}function bi(t){for(let n=Pr(t);null!==n;n=Nr(n))for(let t=Rt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Qr(t,e,t.template,e[8])}else e[5]>0&&bi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=re(e[n],t);se(r)&&r[5]>0&&bi(r)}}function _i(t,e){const n=re(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Kr(r,n,n[8])}function wi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ei(t){for(;t;){t[2]|=64;const e=kr(t);if(qt(t)&&!e)return t;t=e}return null}function Ci(t,e,n){const r=e[10];r.begin&&r.begin();try{Qr(t,e,t.template,n)}catch(i){throw xi(e,i),i}finally{r.end&&r.end()}}function Oi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ie(n),i=r[1];$r(i,r,i.template,n)}}(t[8])}function Ti(t,e,n){Ie(0),e(t,n)}const Si=(()=>Promise.resolve(null))();function Ii(t){return t[7]||(t[7]=[])}function xi(t,e){const n=t[9],r=n?n.get(Sn,null):null;r&&r.handleError(e)}function ji(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ai(t,e,n){const r=Zt(e,t),i=t[11];Yt(i)?i.setValue(r,n):r.textContent=n}function ki(t,e){const n=e[3];return-1===t.index?Lt(n)?n:null:n}function Pi(t,e){const n=ki(t,e);return n?zi(e[11],n[7]):null}function Ni(t,e,n,r,i){if(null!=r){let o,s=!1;Lt(r)?o=r:Dt(r)&&(s=!0,r=r[0]);const a=Jt(r);0===t&&null!==n?null==i?qi(e,n,a):Vi(e,n,a,i||null):1===t&&null!==n?Vi(e,n,a,i||null):2===t?function(t,e,n){const r=zi(t,e);r&&function(t,e,n,r){Yt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Jt(n)&&Ni(e,t,r,o,i);for(let s=Rt;s<n.length;s++){const i=n[s];Qi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ri(t,e,n,r){const i=Pi(t.node,e);i&&Qi(t,e,e[11],n?1:2,i,r)}function Di(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&ce(e[3],-1),n.splice(r,1)}function Li(t,e){if(t.length<=Rt)return;const n=Rt+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Di(i,r),e>0&&(t[n-1][4]=r[4]);const o=ft(t,Rt+e);Ri(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Fi(t,e){if(!(256&e[2])){const n=e[11];Yt(n)&&n.destroyNode&&Qi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ui(t[1],t);for(;e;){let n=null;if(Dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Dt(e)&&Ui(e[1],e),e=Mi(e,t);null===e&&(e=t),Dt(e)&&Ui(e[1],e),n=e&&e[4]}e=n}}(e)}}function Mi(t,e){let n;return Dt(t)&&(n=t[6])&&2===n.type?ki(n,t):t[3]===e?null:t[3]}function Ui(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Jt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Yt(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Lt(e[3])){r!==e[3]&&Di(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Vi(t,e,n,r){Yt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function qi(t,e,n){Yt(t)?t.appendChild(e,n):e.appendChild(n)}function Hi(t,e,n,r){null!==r?Vi(t,e,n,r):qi(t,e,n)}function zi(t,e){return Yt(t)?t.parentNode(e):e.parentNode}function Bi(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Pi(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return te(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==vt.ShadowDom&&n!==vt.Native)return null}return te(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=ki(t,e);return null===n?null:Gi(n.indexOf(e,Rt)-Rt,n)}return 4===t.type||5===t.type?te(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Hi(t,i,n[e],o);else Hi(t,i,n,o)}}function Wi(t,e){if(null!==e){const n=e.type;if(3===n)return te(e,t);if(0===n)return Gi(-1,t[e.index]);if(4===n||5===n){const n=e.child;if(null!==n)return Wi(t,n);{const n=t[e.index];return Lt(n)?Gi(-1,n):Jt(n)}}{const n=t[16],r=n[6],i=kr(n),o=r.projection[e.projection];return null!=o?Wi(i,o):Wi(t,e.next)}}return null}function Gi(t,e){const n=Rt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Wi(t,r)}return e[7]}function Ki(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&yr(Jt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Ki(t,e,n.child,r,i,o,!1),Ni(e,t,i,a,o)):1===u?$i(t,e,r,n,i,o):Ni(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Qi(t,e,n,r,i,o){Ki(n,r,t.node.child,e,i,o,!1)}function $i(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ni(e,t,i,a[u],o);else Ki(t,e,a,s[3],i,o,!0)}function Yi(t,e,n){Yt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xi(t,e,n){Yt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Ji{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?to(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Fi(this._lView[1],this._lView)}onDestroy(t){ei(this._lView[1],this._lView,null,t)}markForCheck(){Ei(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ci(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){be(!0);try{Ci(t,e,n)}finally{be(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Qi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Zi extends Ji{constructor(t){super(t),this._view=t}detectChanges(){Oi(this._view)}checkNoChanges(){!function(t){be(!0);try{Oi(t)}finally{be(!1)}}(this._view)}get context(){return null}}function to(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Jt(o)),Lt(o))for(let t=Rt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&to(e[1],e,n,r)}const s=n.type;if(4===s||5===s)to(t,e,n.child,r);else if(1===s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=kr(t);to(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}let eo,no,ro;function io(t,e,n){return eo||(eo=class extends t{}),new eo(te(e,n))}function oo(t,e,n,r){return no||(no=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Wr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Kr(e,n,t),new Ji(n)}}),0===n.type?new no(r,n,io(e,n,r)):null}function so(t,e,n,r){let i;ro||(ro=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return io(e,this._hostTNode,this._hostView)}get injector(){return new _n(this._hostTNode,this._hostView)}get parentInjector(){const t=hn(this._hostTNode,this._hostView),e=Ze(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=Je(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Ye(t)&&null!=n?new _n(n,e):new _n(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(at,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Lt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ro(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=Rt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Rt?(e[4]=n[i],ht(n,Rt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Ri(r,n,!0,Gi(i,this._lContainer)),t.attachToViewContainerRef(this),ht(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Li(this._lContainer,e);n&&(ft(this._lContainer[8],e),Fi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Li(this._lContainer,e);return n&&null!=ft(this._lContainer[8],e)?new Ji(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Lt(o))i=o;else{let t;if(4===n.type)t=Jt(o);else if(t=r[11].createComment(""),qt(r)){const e=r[11],i=te(n,r);Vi(e,zi(e,i),t,function(t,e){return Yt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Bi(r[1],r,t,n);r[n.index]=i=vi(o,r,t,n),wi(r,i)}return new ro(i,n,r)}function ao(t=!1){return function(t,e,n){if(!n&&Mt(t)){const n=re(t.index,e);return new Ji(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Ji(e[16],e):null}(ge(),fe(),t)}let uo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>co(),t})();const co=ao,lo=Function,ho=new G("Set Injector scope."),fo={},po={},go=[];let yo=void 0;function vo(){return void 0===yo&&(yo=new st),yo}function mo(t,e=null,n=null,r){return new bo(t,n,e||vo(),r)}class bo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&lt(e,n=>this.processProvider(n,t,e)),lt([t],t=>this.processInjectorType(t,[],i)),this.records.set(K,Eo(void 0,this));const o=this.records.get(ho);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:x(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Q,n=g.Default){this.assertNotDestroyed();const r=tt(this);try{if(!(n&g.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof G)&&_(t);e=n&&this.injectableDefInScope(n)?Eo(_o(t),fo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&g.Self?vo():this.parent).get(t,e=n&g.Optional&&e===Q?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(x(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Y]&&i.unshift(e[Y]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=x(e);if(Array.isArray(e))i=e.map(x).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):x(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{tt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(x(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=P(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{lt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];lt(r,t=>this.processProvider(t,n,r||go))}}this.injectorDefTypes.add(o),this.records.set(o,Eo(r.factory,fo));const a=r.providers;if(null!=a&&!s){const e=t;lt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Oo(t=P(t))?t:P(t&&t.provide);const i=function(t,e,n){return Co(t)?Eo(void 0,t.useValue):Eo(wo(t,e,n),fo)}(t,e,n);if(Oo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&mr()}else{let e=this.records.get(r);e?void 0===e.multi&&mr():(e=Eo(void 0,fo,!0),e.factory=()=>ot(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===po?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(x(t)):e.value===fo&&(e.value=po,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function _o(t){const e=_(t),n=null!==e?e.factory:kt(t);if(null!==n)return n;const r=E(t);if(null!==r)return r.factory;if(t instanceof G)throw new Error(`Token ${x(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${x(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[S]||t[T]&&t[T]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function wo(t,e,n){let r=void 0;if(Oo(t)){const e=P(t);return kt(e)||_o(e)}if(Co(t))r=()=>P(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ot(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>rt(P(t.useExisting));else{const i=P(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${x(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return kt(i)||_o(i);r=()=>new i(...ot(t.deps))}var i;return r}function Eo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Co(t){return null!==t&&"object"==typeof t&&X in t}function Oo(t){return"function"==typeof t}const To=function(t,e,n){return function(t,e=null,n=null,r){const i=mo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let So=(()=>{class t{static create(t,e){return Array.isArray(t)?To(t,e,""):To(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Q,t.NULL=new st,t.\u0275prov=m({token:t,providedIn:"any",factory:()=>rt(K)}),t.__NG_ELEMENT_ID__=-1,t})();const Io=new G("AnalyzeForEntryComponents");function xo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=j(i,t):2==o&&(r=j(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let jo=null;function Ao(){if(!jo){const t=M.Symbol;if(t&&t.iterator)jo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(jo=n)}}}return jo}class ko{constructor(t){this.wrapped=t}static wrap(t){return new ko(t)}static unwrap(t){return ko.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof ko}}function Po(t){return!!No(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ao()in t)}function No(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ro(t,e,n){return t[e]=n}function Do(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Lo(t,e,n,r){const i=Do(t,e,n);return Do(t,e+1,r)||i}function Fo(t,e,n,r){const i=fe();return Do(i,Ee(),e)&&(de(),function(t,e,n,r,i,o){const s=te(t,e),a=e[11];if(null==r)Yt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?tn(r):i(r,t.tagName||"",n);Yt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Fe(),i,t,e,n,r)),Fo}function Mo(t,e,n,r){return Do(t,Ee(),n)?e+tn(n)+r:Ar}function Uo(t,e,n,r,i,o,s,a){const u=fe(),c=de(),l=t+Nt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Gr(e,n[6],t,0,s||null,ae(c,a));oi(e,n,l,ae(c,u)),Me(e,l);const h=l.tViews=ti(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=ni(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ye(h,!1);const f=u[11].createComment("");Bi(c,u,f,h),yr(f,u),wi(u,u[l]=vi(f,u,f,h)),Ut(h)&&Xr(c,u,h),null!=s&&Jr(u,h,a)}function Vo(t){return ne(le.lFrame.contextLView,t)}function qo(t,e=g.Default){const n=fe();return null==n?rt(t,e):dn(ge(),n,P(t),e)}function Ho(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ge(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ge(),t)}function zo(t,e,n){const r=fe();return Do(r,Ee(),e)&&ii(de(),Fe(),r,t,e,r[11],n,!1),zo}function Bo(t,e,n,r,i){const o=i?"class":"style";ji(t,n,e.inputs[o],o,r)}function Wo(t,e,n,r){const i=fe(),o=de(),s=Nt+t,a=i[11],u=i[s]=Br(e,a,le.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ae(a,o),c=Gr(e,n[6],t,3,i,u);return oi(e,n,c,ae(a,s)),null!==c.attrs&&xo(c,c.attrs,!1),null!==c.mergedAttrs&&xo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];ye(c,!0);const l=c.mergedAttrs;null!==l&&We(a,u,l);const h=c.classes;null!==h&&Xi(a,u,h);const f=c.styles;null!==f&&Yi(a,u,f),Bi(o,i,u,c),0===le.lFrame.elementDepthCount&&yr(u,i),le.lFrame.elementDepthCount++,Ut(c)&&(Xr(o,i,c),function(t,e,n){if(Ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Jr(i,c)}function Go(){let t=ge();ve()?le.lFrame.isParent=!1:(t=t.parent,ye(t,!1));const e=t;le.lFrame.elementDepthCount--;const n=de();n.firstCreatePass&&(Me(n,t),Ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Bo(n,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Bo(n,e,fe(),e.stylesWithoutHost,!1)}function Ko(t,e,n,r){Wo(t,e,n,r),Go()}function Qo(){return fe()}function $o(t){return!!t&&"function"==typeof t.then}function Yo(t){return!!t&&"function"==typeof t.subscribe}function Xo(t,e,n=!1,r){const i=fe(),o=de(),s=ge();return function(t,e,n,r,i,o,s=!1,a){const u=Ut(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Ii(e);let h=!0;if(3===r.type){const f=te(r,e),d=a?a(f):mt,p=d.target||f,g=l.length,y=a?t=>a(Jt(t[r.index])).target:r.index;if(Yt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Zo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Zo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Xo}function Jo(t,e,n){try{return!1!==e(n)}catch(r){return xi(t,r),!1}}function Zo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?re(t.index,e):e;0==(32&e[2])&&Ei(s);let a=Jo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Jo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ts(t=1){return function(t){return(le.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,le.lFrame.contextLView))[8]}(t)}function es(t,e,n){return ns(t,"",e,"",n),es}function ns(t,e,n,r,i){const o=fe(),s=Mo(o,e,n,r);return s!==Ar&&ii(de(),Fe(),o,t,s,o[11],i,!1),ns}const rs=[];function is(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Mr(o):Vr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];os(t[a],e)&&(u=!0,t[a+1]=r?Hr(n):Ur(n)),a=r?Mr(n):Vr(n)}u&&(t[n+1]=r?Ur(o):Hr(o))}function os(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&gt(t,e)>=0}function ss(t,e){return function(t,e,n,r){const i=fe(),o=de(),s=Ce(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[De()+Nt],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=us(n=as(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=as(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==Vr(r))return t[Mr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=as(null,t,e,n[1],r),n=us(n,e.attrs,r),function(t,e,n,r){t[Mr(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=us(r,t[o].hostAttrs,true);return us(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=Mr(s),u=Vr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||gt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Mr(t[a+1]);t[r+1]=Fr(e,a),0!==e&&(t[e+1]=qr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Fr(a,0),0!==a&&(t[a+1]=qr(t[a+1],r)),a=r;else t[r+1]=Fr(u,0),0===a?a=r:t[u+1]=qr(t[u+1],r),u=r;l&&(t[r+1]=Ur(t[r+1])),is(t,c,r,!0),is(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&gt(o,e)>=0&&(n[r+1]=Hr(n[r+1]))}(e,c,t,r),s=Fr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Ar&&Do(i,s,e)&&function(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];ls(1==(1&c)?cs(u,e,n,i,Vr(c),s):void 0)||(ls(o)||function(t){return 2==(2&t)}(c)&&(o=cs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Yt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Zt(De(),n),i,o))}(o,o.data[De()+Nt],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=x(Nn(t))),t}(e),true,s)}(t,e),ss}function as(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=us(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function us(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dt(t,s,!!n||e[++o]))}return void 0===t?null:t}function cs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ar&&(l=c?rs:void 0);let h=c?pt(l,r):u===r?l:void 0;if(o&&!ls(h)&&(h=pt(e,r)),ls(h)&&(a=h,s))return a;const f=t[i+1];i=s?Mr(f):Vr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=pt(t,r))}return a}function ls(t){return void 0!==t}function hs(t,e=""){const n=fe(),r=de(),i=t+Nt,o=r.firstCreatePass?Gr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Yt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Bi(r,n,s,o),ye(o,!1)}function fs(t){return ds("",t,""),fs}function ds(t,e,n){const r=fe(),i=Mo(r,t,e,n);return i!==Ar&&Ai(r,De(),i),ds}function ps(t,e,n,r,i){const o=fe(),s=function(t,e,n,r,i,o){const s=Lo(t,we(),n,i);return Ce(2),s?e+tn(n)+r+tn(i)+o:Ar}(o,t,e,n,r,i);return s!==Ar&&Ai(o,De(),s),ps}function gs(t,e,n){const r=fe();return Do(r,Ee(),e)&&ii(de(),Fe(),r,t,e,r[11],n,!0),gs}function ys(t,e){const n=ie(t)[1],r=n.data.length-1;Me(n,{directiveStart:r,directiveEnd:r+1})}function vs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ms(t.inputs),e.declaredInputs=ms(t.declaredInputs),e.outputs=ms(t.outputs);const n=i.hostBindings;n&&ws(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&bs(t,o),s&&_s(t,s),v(t.inputs,i.inputs),v(t.declaredInputs,i.declaredInputs),v(t.outputs,i.outputs),Vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qe(i.hostAttrs,n=Qe(n,i.hostAttrs))}}(r)}function ms(t){return t===mt?{}:t===bt?[]:t}function bs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function _s(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ws(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function Es(t,e,n,r,i){if(t=P(t),Array.isArray(t))for(let o=0;o<t.length;o++)Es(t[o],e,n,r,i);else{const o=de(),s=fe();let a=Oo(t)?t:P(t.provide),u=wo(t);const c=ge(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Oo(t)||!t.multi){const r=new Be(u,i,qo),d=Ts(a,e,i?l:l+f,h);-1===d?(fn(un(c,s),o,a),Cs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ts(a,e,l+f,h),p=Ts(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){fn(un(c,s),o,a);const l=function(t,e,n,r,i){const o=new Be(t,n,qo);return o.multi=[],o.index=e,o.componentProviders=0,Os(o,i,r&&!n),o}(i?Is:Ss,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Cs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Cs(o,t,d>-1?d:p,Os(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Cs(t,e,n,r){const i=Oo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Os(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ts(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ss(t,e,n,r){return xs(this.multi,[])}function Is(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=vn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),xs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],xs(i,o);return o}function xs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function js(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=de();if(r.firstCreatePass){const i=Vt(t);Es(n,r.data,r.blueprint,i,!0),Es(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class As{}class ks{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${x(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ps=(()=>{class t{}return t.NULL=new ks,t})(),Ns=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Rs(t),t})();const Rs=function(t){return io(t,ge(),fe())};class Ds{}var Ls=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ms(),t})();const Ms=function(){const t=fe(),e=re(ge().index,t);return function(t){const e=t[11];if(Yt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Dt(e)?e:t)};let Us=(()=>{class t{}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>null}),t})();class Vs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const qs=new Vs("10.0.14");class Hs{constructor(){}supports(t){return Po(t)}create(t){return new Bs(t)}}const zs=(t,e)=>e;class Bs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Qs(n,r,i)?e:n,s=Qs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Po(t))throw new Error(`Error trying to diff '${x(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ao()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ws(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ks),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ks),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ws{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ks{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Gs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class $s{constructor(){}supports(t){return t instanceof Map||No(t)}create(){return new Ys}}class Ys{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||No(t)))throw new Error(`Error trying to diff '${x(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Xs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Xs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>new t([new Hs])}),t})(),Zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=m({token:t,providedIn:"root",factory:()=>new t([new $s])}),t})();const ta=[new $s],ea=new Js([new Hs]),na=new Zs(ta);let ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ia(t,Ns),t})();const ia=function(t,e){return oo(t,e,ge(),fe())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>sa(t,Ns),t})();const sa=function(t,e){return so(t,e,ge(),fe())},aa={};class ua extends Ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=At(t);return new ha(e,this.ngModule)}}function ca(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const la=new G("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>nn});class ha extends As{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(jr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ca(this.componentDef.inputs)}get outputs(){return ca(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,aa,i);return o!==aa||r===aa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ds,Xt),s=i.get(Us,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Yt(t))return t.selectRootElement(e,n===vt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Br(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:nn,clean:Si,playerHandler:null,flags:0},f=ti(0,-1,null,1,0,null,null,null,null,null),d=Wr(null,f,h,l,null,null,o,a,s,i);let p,g;je(d,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Gr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(xo(a,u,!0),null!==t&&(We(i,t,u),null!==a.classes&&Xi(i,t,a.classes),null!==a.styles&&Yi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Wr(n,Zr(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(fn(un(a,n),s,e.type),li(s,a),fi(a,n.length,1)),wi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)We(a,c,["ng-version",qs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Tr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&We(a,c,t),e&&e.length>0&&Xi(a,c,e.join(" "))}if(g=ee(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ge();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ci(t,r,1),di(t,e,n));const i=vn(e,t,e.length-1,r);yr(i,e);const o=te(r,e);return o&&yr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ge();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Le(a.index-Nt);const t=n[1];si(t,e),ai(t,n,e.hostVars),ui(e,s)}return s}(t,this.componentDef,d,h,[ys]),Kr(f,d,null)}finally{Re()}const y=new fa(this.componentType,p,io(Ns,g,d),d,g);return f.node.child=g,y}}class fa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Zi(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=ni(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new _n(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const da=void 0;var pa=["en",[["a","p"],["AM","PM"],da],[["AM","PM"],da,da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",da,"{1} 'at' {0}",da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ga={};function ya(t,e,n){"string"!=typeof e&&(n=e,e=t[wa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ga[e]=t,n&&(ga[e][wa.ExtraData]=n)}function va(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=_a(e);if(n)return n;const r=e.split("-")[0];if(n=_a(r),n)return n;if("en"===r)return pa;throw new Error(`Missing locale data for the locale "${t}".`)}function ma(t){return va(t)[wa.CurrencyCode]||null}function ba(t){return va(t)[wa.PluralCase]}function _a(t){return t in ga||(ga[t]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[t]),ga[t]}var wa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ea="en-US";let Ca=Ea;function Oa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ca=t.toLowerCase().replace(/_/g,"-"))}const Ta=new Map;function Sa(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${x(e)} vs ${x(e.name)}`)})(e,Ta.get(e),t),Ta.set(e,t)}let e=t.\u0275mod.imports;e instanceof Function&&(e=e()),e&&e.forEach(t=>Sa(t))}class Ia extends at{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ua(this);const n=Pt(t),r=t[z]||null;r&&Oa(r),this._bootstrapComponents=rn(n.bootstrap),this._r3Injector=mo(t,e,[{provide:at,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],x(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=So.THROW_IF_NOT_FOUND,n=g.Default){return t===So||t===at||t===K?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class xa extends ut{constructor(t){super(),this.moduleType=t,null!==Pt(t)&&Sa(t)}create(t){return new Ia(this.moduleType,t)}}function ja(t,e,n,r){return Pa(fe(),_e(),t,e,n,r)}function Aa(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Lo(t,e,n,r);return Do(t,e+2,i)||o}(t,u,i,o,s)?Ro(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):ka(t,u+3)}(fe(),_e(),t,e,n,r,i,o)}function ka(t,e){const n=t[e];return n===Ar?void 0:n}function Pa(t,e,n,r,i,o){const s=e+n;return Do(t,s,i)?Ro(t,s+1,o?r.call(o,i):r(i)):ka(t,s+1)}function Na(t,e){const n=de();let r;const i=t+Nt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=kt(r.type)),s=et(qo),a=sn(!1),u=o();return sn(a),et(s),function(t,e,n,r){const i=n+Nt;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,fe(),t,u),u}function Ra(t,e,n){const r=fe(),i=ne(r,t);return Fa(r,La(r,t)?Pa(r,_e(),e,i.transform,n,i):i.transform(n))}function Da(t,e,n,r){const i=fe(),o=ne(i,t);return Fa(i,La(i,t)?function(t,e,n,r,i,o,s){const a=e+n;return Lo(t,a,i,o)?Ro(t,a+2,s?r.call(s,i,o):r(i,o)):ka(t,a+2)}(i,_e(),e,o.transform,n,r,o):o.transform(n,r))}function La(t,e){return t[1].data[e+Nt].pure}function Fa(t,e){return ko.isWrapped(e)&&(e=ko.unwrap(e),t[we()]=Ar),e}const Ma=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ua(){return this._results[Ao()]()}class Va{constructor(){this.dirty=!0,this._results=[],this.changes=new Ma,this.length=0;const t=Ao(),e=Va.prototype;e[t]||(e[t]=Ua)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=ct(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class qa{constructor(t){this.queryList=t,this.matches=null}clone(){return new qa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ha{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ha(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Za(t,e).matches&&this.queries[e].setDirty()}}class za{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ba{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ba(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Wa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Wa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ga(e,i)),this.matchTNodeWithReadOption(t,e,yn(e,t,i,!1,!1))}else n===ra?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,yn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ns||r===oa||r===ra&&0===e.type)this.addMatch(e.index,-2);else{const n=yn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ga(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ka(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?io(Ns,t,e):0===t.type?oo(ra,Ns,t,e):null}(e,t):-2===n?function(t,e,n){return n===Ns?io(Ns,e,t):n===ra?oo(ra,Ns,e,t):n===oa?so(oa,Ns,e,t):void 0}(t,e,r):vn(t,t[1],n,e)}function Qa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ka(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function $a(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Qa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Rt;t<s.length;t++){const e=s[t];e[17]===e[3]&&$a(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];$a(n[1],n,i,r)}}}}}return r}function Ya(t){const e=fe(),n=de(),r=Se();Ie(r+1);const i=Za(n,r);if(t.dirty&&oe(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?$a(n,e,r,[]):Qa(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Xa(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Ba),t.queries.track(new Wa(e,n))}(t,new za(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new Va;ei(t,e,n,n.destroy),null===e[19]&&(e[19]=new Ha),e[19].queries.push(new qa(n))}(t,e)}(de(),fe(),e,n,r,0,ge(),t)}function Ja(){return t=fe(),e=Se(),t[19].queries[e].queryList;var t,e}function Za(t,e){return t.queries.getByIndex(e)}function tu(t=g.Default){const e=ao(!0);if(null!=e||t&g.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const eu=new G("Application Initializer");let nu=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();$o(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(rt(eu,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const ru=new G("AppId"),iu={provide:ru,useFactory:function(){return`${ou()}${ou()}${ou()}`},deps:[]};function ou(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const su=new G("Platform Initializer"),au=new G("Platform ID"),uu=new G("appBootstrapListener");let cu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const lu=new G("LocaleId"),hu=new G("DefaultCurrencyCode");class fu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const du=function(t){return new xa(t)},pu=du,gu=function(t){return Promise.resolve(du(t))},yu=function(t){const e=du(t),n=rn(Pt(t).declarations).reduce((t,e)=>{const n=At(e);return n&&t.push(new ha(n)),t},[]);return new fu(e,n)},vu=yu,mu=function(t){return Promise.resolve(yu(t))};let bu=(()=>{class t{constructor(){this.compileModuleSync=pu,this.compileModuleAsync=gu,this.compileModuleAndAllComponentsSync=vu,this.compileModuleAndAllComponentsAsync=mu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();const _u=(()=>Promise.resolve(0))();function wu(t){"undefined"==typeof Zone?_u.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Eu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=M.requestAnimationFrame,e=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(M,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Su(t),Tu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Su(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Iu(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),xu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Iu(t),e.invoke(r,i,o,s,a)}finally{xu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Su(t),Tu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Eu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ou,Cu,Cu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Cu(){}const Ou={};function Tu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Su(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Iu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xu(t){t._nesting--,Tu(t)}class ju{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Au=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eu.assertNotInAngularZone(),wu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(rt(Eu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})(),ku=(()=>{class t{constructor(){this._applications=new Map,Du.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Du.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();class Pu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Nu(t){Du=t}let Ru,Du=new Pu;const Lu=new G("AllowMultipleToken");class Fu{constructor(t,e){this.name=t,this.token=e}}function Mu(t,e,n=[]){const r="Platform: "+e,i=new G(r);return(e=[])=>{let o=Uu();if(!o||o.injector.get(Lu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ho,useValue:"platform"});!function(t){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Lu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ru=t.get(Vu);const e=t.get(su,null);e&&e.forEach(t=>t())}(So.create({providers:t,name:r}))}return function(t){const e=Uu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Uu(){return Ru&&!Ru.destroyed?Ru:null}let Vu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ju:("zone.js"===t?void 0:t)||new Eu({enableLongStackTrace:zn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Eu,useValue:n}];return n.run(()=>{const e=So.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Sn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>zu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return $o(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(nu);return t.runInitializers(),t.donePromise.then(()=>(Oa(i.injector.get(lu,Ea)||Ea),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=qu({},e);return function(t,e,n){const r=new xa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Hu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${x(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(rt(So))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function qu(t,e){return Array.isArray(e)?e.reduce(qu,t):Object.assign(Object.assign({},t),e)}let Hu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=zn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Eu.assertNotInAngularZone(),wu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Eu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof As?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(at),i=n.create(So.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Au,null);return o&&i.injector.get(ku).registerApplication(i.location.nativeElement,o),this._loadComponent(i),zn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;zu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(uu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),zu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(rt(Eu),rt(cu),rt(So),rt(Sn),rt(Ps),rt(nu))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function zu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bu{}class Wu{}const Gu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ku=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Gu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Qu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Qu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(rt(bu),rt(Wu,8))},t.\u0275prov=m({token:t,factory:t.\u0275fac}),t})();function Qu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const $u=function(t){return null},Yu=Mu(null,"core",[{provide:au,useValue:"unknown"},{provide:Vu,deps:[So]},{provide:ku,deps:[]},{provide:cu,deps:[]}]),Xu=[{provide:Hu,useClass:Hu,deps:[Eu,cu,So,Sn,Ps,nu]},{provide:la,deps:[Eu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:nu,useClass:nu,deps:[[new f,eu]]},{provide:bu,useClass:bu,deps:[]},iu,{provide:Js,useFactory:function(){return ea},deps:[]},{provide:Zs,useFactory:function(){return na},deps:[]},{provide:lu,useFactory:function(t){return Oa(t=t||"undefined"!=typeof $localize&&$localize.locale||Ea),t},deps:[[new h(lu),new f,new p]]},{provide:hu,useValue:"USD"}];let Ju=(()=>{class t{constructor(t){}}return t.\u0275mod=Tt({type:t}),t.\u0275inj=b({factory:function(e){return new(e||t)(rt(Hu))},providers:Xu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("z6cu");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return C}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return M}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"m",function(){return H}),n.d(e,"n",function(){return d}),n.d(e,"o",function(){return k}),n.d(e,"p",function(){return y}),n.d(e,"q",function(){return v}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return R}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return E}),n.d(e,"x",function(){return m}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return A}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return L}),n.d(e,"D",function(){return N}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return W}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return z}),n.d(e,"J",function(){return B});var r=n("30Go"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(S,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},k=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function M(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i)},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return S}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.2");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)(u.Pb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("30Go"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.l)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(y){u={error:y}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCR1RKN9XZPSUjUysMsJrnH91DeKBrtgxc",authDomain:"file-uploader-e1b72.firebaseapp.com",databaseURL:"https://file-uploader-e1b72.firebaseio.com",projectId:"file-uploader-e1b72",storageBucket:"file-uploader-e1b72.appspot.com",messagingSenderId:"362566717925",appId:"1:362566717925:web:17e8cb6efe6b1d9ef09f0c",measurementId:"G-QC84H0ZZ6N"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Pb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=Object(r.Eb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Pb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Pb)(a).location;return new _(Object(r.Pb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(u),r.Pb(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(v),r.Pb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Eb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new E(Object(r.Pb)(v),Object(r.Pb)(u))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),S=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),I=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),x=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),j=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function A(t,e){return L(Object(r.ib)(t)[r.Z.DateFormat],e)}function k(t,e){return L(Object(r.ib)(t)[r.Z.TimeFormat],e)}function P(t,e){return L(Object(r.ib)(t)[r.Z.DateTimeFormat],e)}function N(t,e){const n=Object(r.ib)(t),i=n[r.Z.NumberSymbols][e];if(void 0===i){if(e===j.CurrencyDecimal)return n[r.Z.NumberSymbols][j.Decimal];if(e===j.CurrencyGroup)return n[r.Z.NumberSymbols][j.Group]}return i}const R=r.lb;function D(t){if(!t[r.Z.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.Z.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function F(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const M=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,U={},V=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var q=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),H=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),z=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function B(t,e,n,r){let i=function(t){if(tt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(M))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!tt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=W(n,e)||e;let o,s=[];for(;e;){if(o=V.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=Z(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Z(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(J[t])return J[t];let e;switch(t){case"G":case"GG":case"GGG":e=$(z.Eras,I.Abbreviated);break;case"GGGG":e=$(z.Eras,I.Wide);break;case"GGGGG":e=$(z.Eras,I.Narrow);break;case"y":e=Q(H.FullYear,1,0,!1,!0);break;case"yy":e=Q(H.FullYear,2,0,!0,!0);break;case"yyy":e=Q(H.FullYear,3,0,!1,!0);break;case"yyyy":e=Q(H.FullYear,4,0,!1,!0);break;case"M":case"L":e=Q(H.Month,1,1);break;case"MM":case"LL":e=Q(H.Month,2,1);break;case"MMM":e=$(z.Months,I.Abbreviated);break;case"MMMM":e=$(z.Months,I.Wide);break;case"MMMMM":e=$(z.Months,I.Narrow);break;case"LLL":e=$(z.Months,I.Abbreviated,S.Standalone);break;case"LLLL":e=$(z.Months,I.Wide,S.Standalone);break;case"LLLLL":e=$(z.Months,I.Narrow,S.Standalone);break;case"w":e=X(1);break;case"ww":e=X(2);break;case"W":e=X(1,!0);break;case"d":e=Q(H.Date,1);break;case"dd":e=Q(H.Date,2);break;case"E":case"EE":case"EEE":e=$(z.Days,I.Abbreviated);break;case"EEEE":e=$(z.Days,I.Wide);break;case"EEEEE":e=$(z.Days,I.Narrow);break;case"EEEEEE":e=$(z.Days,I.Short);break;case"a":case"aa":case"aaa":e=$(z.DayPeriods,I.Abbreviated);break;case"aaaa":e=$(z.DayPeriods,I.Wide);break;case"aaaaa":e=$(z.DayPeriods,I.Narrow);break;case"b":case"bb":case"bbb":e=$(z.DayPeriods,I.Abbreviated,S.Standalone,!0);break;case"bbbb":e=$(z.DayPeriods,I.Wide,S.Standalone,!0);break;case"bbbbb":e=$(z.DayPeriods,I.Narrow,S.Standalone,!0);break;case"B":case"BB":case"BBB":e=$(z.DayPeriods,I.Abbreviated,S.Format,!0);break;case"BBBB":e=$(z.DayPeriods,I.Wide,S.Format,!0);break;case"BBBBB":e=$(z.DayPeriods,I.Narrow,S.Format,!0);break;case"h":e=Q(H.Hours,1,-12);break;case"hh":e=Q(H.Hours,2,-12);break;case"H":e=Q(H.Hours,1);break;case"HH":e=Q(H.Hours,2);break;case"m":e=Q(H.Minutes,1);break;case"mm":e=Q(H.Minutes,2);break;case"s":e=Q(H.Seconds,1);break;case"ss":e=Q(H.Seconds,2);break;case"S":e=Q(H.FractionalSeconds,1);break;case"SS":e=Q(H.FractionalSeconds,2);break;case"SSS":e=Q(H.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Y(q.Short);break;case"ZZZZZ":e=Y(q.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Y(q.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Y(q.Long);break;default:return null}return J[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function W(t,e){const n=function(t){return Object(r.ib)(t)[r.Z.LocaleId]}(t);if(U[n]=U[n]||{},U[n][e])return U[n][e];let i="";switch(e){case"shortDate":i=A(t,x.Short);break;case"mediumDate":i=A(t,x.Medium);break;case"longDate":i=A(t,x.Long);break;case"fullDate":i=A(t,x.Full);break;case"shortTime":i=k(t,x.Short);break;case"mediumTime":i=k(t,x.Medium);break;case"longTime":i=k(t,x.Long);break;case"fullTime":i=k(t,x.Full);break;case"short":const e=W(t,"shortTime"),n=W(t,"shortDate");i=G(P(t,x.Short),[e,n]);break;case"medium":const r=W(t,"mediumTime"),o=W(t,"mediumDate");i=G(P(t,x.Medium),[r,o]);break;case"long":const s=W(t,"longTime"),a=W(t,"longDate");i=G(P(t,x.Long),[s,a]);break;case"full":const u=W(t,"fullTime"),c=W(t,"fullDate");i=G(P(t,x.Full),[u,c])}return i&&(U[n][e]=i),i}function G(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function K(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function Q(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case H.FullYear:return e.getFullYear();case H.Month:return e.getMonth();case H.Date:return e.getDate();case H.Hours:return e.getHours();case H.Minutes:return e.getMinutes();case H.Seconds:return e.getSeconds();case H.FractionalSeconds:return e.getMilliseconds();case H.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===H.Hours)0===a&&-12===n&&(a=12);else if(t===H.FractionalSeconds)return u=e,K(a,3).substr(0,u);var u;const c=N(s,j.MinusSign);return K(a,e,c,r,i)}}function $(t,e,n=S.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case z.Months:return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.MonthsFormat],i[r.Z.MonthsStandalone]],e);return L(o,n)}(e,o,i)[t.getMonth()];case z.Days:return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.DaysFormat],i[r.Z.DaysStandalone]],e);return L(o,n)}(e,o,i)[t.getDay()];case z.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.ib)(t);return D(e),(e[r.Z.ExtraData][2]||[]).map(t=>"string"==typeof t?F(t):[F(t[0]),F(t[1])])}(e),n=function(t,e,n){const i=Object(r.ib)(t);D(i);const o=L([i[r.Z.ExtraData][0],i[r.Z.ExtraData][1]],e)||[];return L(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.ib)(t),o=L([i[r.Z.DayPeriodsFormat],i[r.Z.DayPeriodsStandalone]],e);return L(o,n)}(e,o,i)[a<12?0:1];case z.Eras:return function(t,e){return L(Object(r.ib)(t)[r.Z.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,s,t,e,n,i)}}function Y(t){return function(e,n,r){const i=-1*r,o=N(n,j.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case q.Short:return(i>=0?"+":"")+K(s,2,o)+K(Math.abs(i%60),2,o);case q.ShortGMT:return"GMT"+(i>=0?"+":"")+K(s,1,o);case q.Long:return"GMT"+(i>=0?"+":"")+K(s,2,o)+":"+K(Math.abs(i%60),2,o);case q.Extended:return 0===r?"Z":(i>=0?"+":"")+K(s,2,o)+":"+K(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function X(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var o;return K(i,t,N(r,j.MinusSign))}}const J={};function Z(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function tt(t){return t instanceof Date&&!isNaN(t.valueOf())}class et{}let nt=(()=>{class t extends et{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(R(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function rt(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let it=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.ob)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.tb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.s),r.Ib(r.t),r.Ib(r.l),r.Ib(r.D))},t.\u0275dir=r.Db({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ot{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let st=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ot(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new at(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new at(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class at{constructor(t,e){this.record=t,this.view=e}}let ut=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new ct,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K))},t.\u0275dir=r.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class ct{constructor(){this.$implicit=null,this.ngIf=null}}function lt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}let ht=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return B(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.u))},t.\u0275pipe=r.Hb({name:"date",type:t,pure:!0}),t})(),ft=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:et,useClass:nt}]}),t})();function dt(t){return"server"===t}let pt=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new gt(Object(r.Pb)(a),window,Object(r.Pb)(r.m))}),t})();class gt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=yt(this.window.history)||yt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function yt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class vt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new vt,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=bt||(bt=document.querySelector("base"),bt)?bt.getAttribute("href"):null;return null==e?null:(n=e,mt||(mt=document.createElement("a")),mt.setAttribute("href",n),"/"===mt.pathname.charAt(0)?mt.pathname:"/"+mt.pathname);var n}resetBaseElement(){bt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return rt(document.cookie,t)}}let mt,bt=null;const _t=new r.q("TRANSITION_ID"),wt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[_t,a,r.r],multi:!0}];class Et{static init(){Object(r.W)(new Et)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Ct=new r.q("EventManagerPlugins");let Ot=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ct),r.Pb(r.z))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class Tt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let St=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),It=(()=>{class t extends St{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jt=/%COMP%/g;function At(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?At(t,i,n):(i=i.replace(jt,t),n.push(i))}return n}function kt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Pt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=At(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ot),r.Pb(It),r.Pb(r.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class Nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(xt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=xt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=xt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,kt(n)):this.eventManager.addEventListener(t,e,kt(n))}}class Rt extends Nt{constructor(t,e,n,r){super(t),this.component=n;const i=At(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(jt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(jt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Dt extends Nt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=At(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Lt=(()=>{class t extends Tt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Ft=["alt","control","meta","shift"],Mt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let qt=(()=>{class t extends Tt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Ft.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ut.hasOwnProperty(e)&&(e=Ut[e]))}return Mt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ft.forEach(r=>{r!=n&&(0,Vt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Ht=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){vt.makeCurrent(),Et.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],zt=Object(r.R)(r.V,"browser",Ht),Bt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Ct,useClass:Lt,multi:!0,deps:[a,r.z,r.B]},{provide:Ct,useClass:qt,multi:!0,deps:[a]},[],{provide:Pt,useClass:Pt,deps:[Ot,It,r.c]},{provide:r.E,useExisting:Pt},{provide:St,useExisting:It},{provide:It,useClass:It,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:Ot,useClass:Ot,deps:[Ct,r.z]},[]];let Wt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:_t,useExisting:r.c},wt]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(t,12))},providers:Bt,imports:[ft,r.f]}),t})();"undefined"!=typeof window&&window;var Gt=n("LRne"),Kt=n("HDdC"),Qt=n("5+tZ");function $t(t,e){return Object(Qt.a)(t,e,1)}var Yt=n("7o/Q");function Xt(t,e){return function(n){return n.lift(new Jt(t,e))}}class Jt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Zt(t,this.predicate,this.thisArg))}}class Zt extends Yt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var te=n("lJxs");class ee{}class ne{}class re{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof re?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new re;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof re?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ie{encodeKey(t){return oe(t)}encodeValue(t){return oe(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function oe(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class se{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ie,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new se({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function ae(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ue(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ce(t){return"undefined"!=typeof FormData&&t instanceof FormData}class le{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new re),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new se,this.urlWithParams=e}serializeBody(){return null===this.body?null:ae(this.body)||ue(this.body)||ce(this.body)||"string"==typeof this.body?this.body:this.body instanceof se?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ce(this.body)?null:ue(this.body)?this.body.type||null:ae(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof se?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new le(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var he=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class fe{constructor(t,e=200,n="OK"){this.headers=t.headers||new re,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class de extends fe{constructor(t={}){super(t),this.type=he.ResponseHeader}clone(t={}){return new de({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class pe extends fe{constructor(t={}){super(t),this.type=he.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new pe({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ge extends fe{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ye(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let ve=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof le)r=t;else{let i=void 0;i=n.headers instanceof re?n.headers:new re(n.headers);let o=void 0;n.params&&(o=n.params instanceof se?n.params:new se({fromObject:n.params})),r=new le(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Gt.a)(r).pipe($t(t=>this.handler.handle(t)));if(t instanceof le||"events"===n.observe)return i;const o=i.pipe(Xt(t=>t instanceof pe));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(te.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(te.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(te.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(te.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new se).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ye(n,e))}post(t,e,n={}){return this.request("POST",t,ye(n,e))}put(t,e,n={}){return this.request("PUT",t,ye(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(ee))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class me{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const be=new r.q("HTTP_INTERCEPTORS");let _e=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const we=/^\)\]\}',?\n/;class Ee{}let Ce=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Oe=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new Kt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new re(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new de({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(we,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new pe({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new ge({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new ge({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:he.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:he.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:he.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ee))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const Te=new r.q("XSRF_COOKIE_NAME"),Se=new r.q("XSRF_HEADER_NAME");class Ie{}let xe=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(a),r.Pb(r.B),r.Pb(Te))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),je=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ie),r.Pb(Se))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Ae=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(be,[]);this.chain=t.reduceRight((t,e)=>new me(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(ne),r.Pb(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),ke=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:je,useClass:_e}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Te,useValue:e.cookieName}:[],e.headerName?{provide:Se,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[je,{provide:be,useExisting:je,multi:!0},{provide:Ie,useClass:xe},{provide:Te,useValue:"XSRF-TOKEN"},{provide:Se,useValue:"X-XSRF-TOKEN"}]}),t})(),Pe=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[ve,{provide:ee,useClass:Ae},Oe,{provide:ne,useExisting:Oe},Ce,{provide:Ee,useExisting:Ce}],imports:[[ke.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var Ne=n("spgP"),Re=n("D0XW"),De=n("VRyK"),Le=n("w1tV"),Fe=n("l7GE"),Me=n("51Dv"),Ue=n("ZUHj"),Ve=n("Cfvw");function qe(t,e){return"function"==typeof e?n=>n.pipe(qe((n,r)=>Object(Ve.a)(t(n,r)).pipe(Object(te.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new He(t))}class He{constructor(t){this.project=t}call(t,e){return e.subscribe(new ze(t,this.project))}}class ze extends Fe.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new Me.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(Ue.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function Be(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new We(t,e,n))}}class We{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ge(t,this.accumulator,this.seed,this.hasSeed))}}class Ge extends Yt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ke(t,e){return n=>n.lift(new Qe(t,e))}class Qe{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new $e(t,this.compare,this.keySelector))}}class $e extends Yt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Ye{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Xe(t,this.observables,this.project))}}class Xe extends Fe.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(Ue.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Je{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Ze(t,this.predicate))}}class Ze extends Yt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var tn=n("XNiG"),en=n("pxpQ"),nn=n("qgXg"),rn=n("quSY"),on=n("9ppp"),sn=n("Ylt2");class an extends tn.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new un(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new on.a;if(this.isStopped||this.hasError?o=rn.a.EMPTY:(this.observers.push(t),o=new sn.a(this,t)),r&&t.add(t=new en.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||nn.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class un{constructor(t,e){this.time=t,this.value=e}}function cn(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){s++,i&&!a||(a=!1,i=new an(t,e,r),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}));const l=i.subscribe(this);this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const ln=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),hn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var fn=n("EY2u");function dn(t){return e=>0===t?Object(fn.b)():e.lift(new pn(t))}class pn{constructor(t){if(this.total=t,this.total<0)throw new hn}call(t,e){return e.subscribe(new gn(t,this.total))}}class gn extends Yt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function yn(t=null){return e=>e.lift(new vn(t))}class vn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mn(t,this.defaultValue))}}class mn extends Yt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function bn(t=En){return e=>e.lift(new _n(t))}class _n{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new wn(t,this.errorFactory))}}class wn extends Yt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function En(){return new ln}var Cn=n("SpAZ");function On(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):Cn.a,dn(1),n?yn(e):bn(()=>new ln))}function Tn(t,e){return e?qe(()=>t,e):qe(()=>t)}var Sn=n("tf+s");const In=new r.q("angularfire2.auth.use-emulator"),xn=new r.q("angularfire2.auth.settings"),jn=new r.q("angularfire2.auth.tenant-id"),An=new r.q("angularfire2.auth.langugage-code"),kn=new r.q("angularfire2.auth.use-device-language"),Pn=new r.q("angularfire.auth.persistence");let Nn=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Ne.d(i),f=Object(Ne.h)(h),d=new tn.a,p=Object(Gt.a)(void 0).pipe(Object(en.b)(h.outsideAngular),qe(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(te.a)(()=>Object(Ne.g)(t,i,e)),Object(te.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Ne.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),cn({bufferSize:1,refCount:!1}));if(dt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Gt.a)(null);else{p.pipe(On()).subscribe();const t=p.pipe(qe(t=>t.getRedirectResult().then(t=>t,()=>null)),f,cn({bufferSize:1,refCount:!1})),e=t=>new Kt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(qe(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(qe(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Tn(n),Object(Sn.a)(h.outsideAngular),Object(en.b)(h.insideAngular)),this.user=t.pipe(Tn(r),Object(Sn.a)(h.outsideAngular),Object(en.b)(h.insideAngular)),this.idToken=this.user.pipe(qe(t=>t?Object(Ve.a)(t.getIdToken()):Object(Gt.a)(null))),this.idTokenResult=this.user.pipe(qe(t=>t?Object(Ve.a)(t.getIdTokenResult()):Object(Gt.a)(null))),this.credential=Object(De.a)(t,d,this.authState.pipe(Xt(t=>!t))).pipe(Object(te.a)(t=>(null==t?void 0:t.user)?t:null),Object(Sn.a)(h.outsideAngular),Object(en.b)(h.insideAngular))}return Object(Ne.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ne.c),r.Pb(Ne.b,8),r.Pb(r.B),r.Pb(r.z),r.Pb(In,8),r.Pb(xn,8),r.Pb(jn,8),r.Pb(An,8),r.Pb(kn,8),r.Pb(Pn,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ne.c),Object(r.Pb)(Ne.b,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(In,8),Object(r.Pb)(xn,8),Object(r.Pb)(jn,8),Object(r.Pb)(An,8),Object(r.Pb)(kn,8),Object(r.Pb)(Pn,8))},token:t,providedIn:"any"}),t})();Object(Ne.e)(Nn,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Rn=n("Jgta");function Dn(t){return null==t}function Ln(t){return"function"==typeof t.set}function Fn(t,e){return Ln(e)?e:t.ref(e)}function Mn(t,e){if("string"==typeof t)return e.stringCase();if(Ln(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Un(t,e,n="on",r=Re.a){return new Kt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(te.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Le.a)())}function Vn(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function qn(t,e){const{payload:n,prevKey:r,key:i}=e,o=Vn(t,i),s=function(t,e){if(Dn(e))return 0;{const n=Vn(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Hn(t){return(Dn(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function zn(t,e,n){return function(t,e,n){return Un(t,"value","once",n).pipe(qe(r=>{const i=[Object(Gt.a)(r)];return e.forEach(e=>i.push(Un(t,e,"on",n))),Object(De.a)(...i).pipe(Be(qn,[]))}),Ke())}(t,e=Hn(e),n)}function Bn(t,e,n){const r=(e=Hn(e)).map(e=>Un(t,e,"on",n));return Object(De.a)(...r)}function Wn(t,e){return function(n,r){return Mn(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Gn(t,e){return function(){return Un(t,"value","on",e)}}const Kn=new r.q("angularfire2.realtimeDatabaseURL"),Qn=new r.q("angularfire2.database.use-emulator");let $n=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Ne.d(i),this.keepUnstableUntilFirst=Object(Ne.h)(this.schedulers);const a=o,u=Object(Ne.g)(t,i,e);!Rn.a.auth&&s&&Object(Ne.j)(),this.database=Object(Ne.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Fn(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Wn(r,"update"),set:Wn(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Mn(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>zn(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Bn(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Un(t,"value","on",e).pipe(Object(te.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Ye(t,n))}}(e),Object(te.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Je(r))),Object(te.a)(t=>t.actions));var r}(t,Bn(t,e).pipe(Be((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>zn(t,r,n).pipe(Object(te.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Fn(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Gn(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Gn(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(te.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ne.c),r.Pb(Ne.b,8),r.Pb(Kn,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Qn,8),r.Pb(In,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ne.c),Object(r.Pb)(Ne.b,8),Object(r.Pb)(Kn,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Qn,8),Object(r.Pb)(In,8))},token:t,providedIn:"any"}),t})(),Yn=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[$n]}),t})();var Xn=n("zIRd"),Jn=n("30Go"),Zn=n("qOnz"),tr=n("/6Yf"),er="firebasestorage.googleapis.com",nr=function(t){function e(n,r){var i=t.call(this,sr(n),"Firebase Storage: "+r+" ("+sr(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Jn.c)(e,t),e.prototype.codeEquals=function(t){return sr(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Zn.c),rr="canceled",ir="invalid-argument",or="unsupported-environment";function sr(t){return"storage/"+t}function ar(){return new nr("unknown","An unknown error occurred, please check the error payload for server response.")}function ur(){return new nr(rr,"User canceled the upload/download.")}function cr(){return new nr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function lr(t){return new nr(ir,t)}function hr(){return new nr("app-deleted","The Firebase app was deleted.")}function fr(t){return new nr("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dr(t,e){return new nr("invalid-format","String does not match format '"+t+"': "+e)}function pr(t){throw new nr("internal-error","Internal error: "+t)}var gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},yr=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function vr(t,e){switch(t){case gr.RAW:return new yr(mr(e));case gr.BASE64:case gr.BASE64URL:return new yr(br(t,e));case gr.DATA_URL:return new yr((n=new _r(e)).base64?br(gr.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw dr(gr.DATA_URL,"Malformed data URL.")}return mr(e)}(n.rest),new _r(e).contentType)}var n;throw ar()}function mr(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function br(t,e){switch(t){case gr.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw dr(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case gr.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw dr(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw dr(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var _r=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw dr(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),wr="running",Er="pausing",Cr="paused",Or="success",Tr="canceling",Sr="canceled",Ir="error",xr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jr(t){switch(t){case wr:case Er:case Tr:return xr.RUNNING;case Cr:return xr.PAUSED;case Or:return xr.SUCCESS;case Sr:return xr.CANCELED;case Ir:default:return xr.ERROR}}var Ar=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),kr=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ar.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Ar.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Ar.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw pr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pr("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pr("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Pr=function(){function t(){}return t.prototype.createXhrIo=function(){return new kr},t}();function Nr(t){return"string"==typeof t||t instanceof String}function Rr(t){return Dr()&&t instanceof Blob}function Dr(){return"undefined"!=typeof Blob}function Lr(t,e,n,r){if(r<e)throw new nr(ir,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new nr(ir,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Fr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Mr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Fr();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Dr())return new Blob(t);throw new nr(or,"This browser doesn't seem to support creating Blobs")}var Ur=function(){function t(t,e){var n=0,r="";Rr(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Rr(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Dr()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Mr.apply(null,r))}var i=e.map(function(t){return Nr(t)?vr(gr.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Vr=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new nr("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=er.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new nr("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function qr(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Hr(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function zr(t){return"https://"+er+"/v0"+t}function Br(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Wr(t,e){return e}var Gr=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Wr}}(),Kr=null;function Qr(){if(Kr)return Kr;var t=[];t.push(new Gr("bucket")),t.push(new Gr("generation")),t.push(new Gr("metageneration")),t.push(new Gr("name","fullPath",!0));var e=new Gr("name");e.xform=function(t,e){return function(t){return!Nr(t)||t.length<2?t:Hr(t)}(e)},t.push(e);var n=new Gr("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Gr("timeCreated")),t.push(new Gr("updated")),t.push(new Gr("md5Hash",null,!0)),t.push(new Gr("cacheControl",null,!0)),t.push(new Gr("contentDisposition",null,!0)),t.push(new Gr("contentEncoding",null,!0)),t.push(new Gr("contentLanguage",null,!0)),t.push(new Gr("contentType",null,!0)),t.push(new Gr("metadata","customMetadata",!0)),Kr=t}function $r(t,e,n){var r=qr(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Vr(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Yr(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Xr=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Jr(t){if(!t)throw ar()}function Zr(t,e){return function(n,r){var i=$r(t,r,e);return Jr(null!==i),i}}function ti(t){return function(e,n){var r;return(r=401===e.getStatus()?new nr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new nr("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new nr("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function ei(t){var e=ti(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new nr("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ni(t,e,n){var r=zr(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Xr(r,"GET",Zr(t,n),i);return o.errorHandler=ei(e),o}function ri(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var ii=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function oi(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){Jr(!1)}return Jr(!!n&&-1!==(e||["active"]).indexOf(n)),n}var si=262144,ai=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),ui=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function ci(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var li=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Qr(),this._resumable=this._shouldDoResumable(this._blob),this._state=wr,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(rr)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Ir))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(rr)?r.completeTransitions_():(r._error=t,r._transition(Ir))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===wr&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case wr:t(n);break;case Tr:e._transition(Sr);break;case Er:e._transition(Cr)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=ri(e,r,i),a={name:s.fullPath},u=zr(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Yr(s,n),h=new Xr(u,"POST",function(t){var e;oi(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Jr(!1)}return Jr(Nr(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=ti(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new Xr(n,"POST",function(t){var e=oi(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Jr(!1)}n||Jr(!1);var i=Number(n);return Jr(!isNaN(i)),new ii(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=ti(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=si*this._chunkMultiplier,n=new ii(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new ii(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new nr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw cr();var p=new Xr(n,"POST",function(t,n){var i,s=oi(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Zr(e,o)(t,n):null,new ii(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=ti(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(Ir)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Or)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){si*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=ni(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(Or)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=ri(e,r,i),c=Yr(u,n),l=Ur.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw cr();var h={name:u.fullPath},f=zr(o),d=t.maxUploadRetryTime,p=new Xr(f,"POST",Zr(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=ti(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Or)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Tr:case Er:this._state=t,void 0!==this._request&&this._request.cancel();break;case wr:var e=this._state===Cr;this._state=t,e&&(this._notifyObservers(),this._start());break;case Cr:this._state=t,this._notifyObservers();break;case Sr:this._error=ur(),this._state=t,this._notifyObservers();break;case Ir:case Or:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Er:this._transition(Cr);break;case Tr:this._transition(Sr);break;case wr:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=jr(this._state);return new ui(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new ai(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(jr(this._state)){case xr.SUCCESS:ci(this._resolve.bind(null,this.snapshot))();break;case xr.CANCELED:case xr.ERROR:ci(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(jr(this._state)){case xr.RUNNING:case xr.PAUSED:t.next&&ci(t.next.bind(t,this.snapshot))();break;case xr.SUCCESS:t.complete&&ci(t.complete.bind(t))();break;case xr.CANCELED:case xr.ERROR:t.error&&ci(t.error.bind(t,this._error))();break;default:t.error&&ci(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Cr||this._state===Er;return t&&this._transition(wr),t},t.prototype.pause=function(){var t=this._state===wr;return t&&this._transition(Er),t},t.prototype.cancel=function(){var t=this._state===wr||this._state===Er;return t&&this._transition(Tr),t},t}(),hi=function(){function t(t,e){this._service=t,this._location=e instanceof Vr?e:Vr.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Vr(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Hr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Vr(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw fr(t)},t}();function fi(t){var e={prefixes:[],items:[]};return di(t,e).then(function(){return e})}function di(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:return[4,pi(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,di(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function pi(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Lr("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=zr(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Xr(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=qr(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Vr(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Vr(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Jr(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=ti(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function gi(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Vr(t._location.bucket,n);return new hi(t.storage,r)}var yi=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),vi=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new yi(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new yi(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new yi(t,i,i._ref))}:{next:e.next?function(t){return e.next(new yi(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),mi=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new bi(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new bi(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),bi=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(gi(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new vi(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new li(t,new Ur(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=gr.RAW),this._throwIfRoot("putString"),new vi(function(t,e,n,r){void 0===n&&(n=gr.RAW),t._throwIfRoot("putString");var i=vr(n,e),o=Object(Jn.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new li(t,new Ur(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return fi(this._delegate).then(function(e){return new mi(e,t.storage)})},t.prototype.list=function(t){var e=this;return pi(this._delegate,t).then(function(t){return new mi(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=ni(t.storage,t._location,Qr()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=zr(e.fullServerUrl()),o=Yr(n,r),s=t.maxOperationRetryTime,a=new Xr(i,"PATCH",Zr(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=ei(e),a}(t.storage,t._location,e,Qr()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=zr(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Xr(r,"GET",function(t,e){return function(n,r){var i=$r(t,r,e);return Jr(null!==i),function(t,e){var n=qr(e);if(null===n)return null;if(!Nr(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return zr("/b/"+i(t.bucket)+"/o/"+i(n))+Br({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=ei(e),o}(t.storage,t._location,Qr()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new nr("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=zr(e.fullServerUrl()),r=new Xr(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ei(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw fr(t)},t}(),_i=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),wi=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=ar()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?hr():ur():new nr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ei(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new Ei(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Ar.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Ei(s,n))}else{var a=n.getErrorCode()===Ar.ABORT;e(!1,new Ei(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Jn.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Jn.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ei=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Ci(t){return/^[A-Za-z]+:\/\//.test(t)}function Oi(t,e){if(t instanceof xi){var n=t;if(null==n._bucket)throw new nr("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new hi(n,n._bucket);return null!=e?Oi(r,e):r}if(void 0!==e){if(e.includes(".."))throw lr('`path` param cannot contain ".."');return gi(t,e)}return t}function Ti(t,e){if(e&&Ci(e)){if(t instanceof xi)return new hi(t,e);throw lr("To use ref(service, url), the first argument must be a Storage instance.")}return Oi(t,e)}var Si,Ii,xi=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Vr.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:Vr.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Lr("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Lr("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t,e;return Object(Jn.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new hi(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new _i(hr());var r=function(t,e,n,r){var i=Br(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Xn.a?Xn.a.SDK_VERSION:"AppManager")}(s),new wi(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),ji=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ci(t))throw lr("ref() expected a child path but got a URL, use refFromURL instead.");return new bi(Ti(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ci(t))throw lr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vr.makeFromUrl(t)}catch(e){throw lr("refFromUrl() expected a valid full URL but got an invalid one.")}return new bi(Ti(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Ai(t){const e=function(t){return new Kt.a(e=>{const n=t=>e.next(t);t.on("state_changed",n,r=>{n(t.snapshot),(t=>{e.error(t)})(r)},()=>{n(t.snapshot),e.complete()})}).pipe(cn({bufferSize:1,refCount:!1}))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(te.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function ki(t,e,n){return{getDownloadURL:()=>Object(Gt.a)(void 0).pipe(Object(en.b)(e.outsideAngular),qe(()=>t.getDownloadURL()),n),getMetadata:()=>Object(Gt.a)(void 0).pipe(Object(en.b)(e.outsideAngular),qe(()=>t.getMetadata()),n),delete:()=>Object(Ve.a)(t.delete()),child:r=>ki(t.child(r),e,n),updateMetadata:e=>Object(Ve.a)(t.updateMetadata(e)),put:(e,n)=>Ai(t.put(e,n)),putString:(e,n,r)=>Ai(t.putString(e,n,r)),listAll:()=>Object(Ve.a)(t.listAll())}}Ii={TaskState:xr,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:gr,Storage:xi,Reference:bi},(Si=Xn.a).INTERNAL.registerComponent(new tr.a("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new ji(n,new xi(n,r,new Pr,e))},"PUBLIC").setServiceProps(Ii).setMultipleInstances(!0)),Si.registerVersion("@firebase/storage","0.4.2");const Pi=new r.q("angularfire2.storageBucket"),Ni=new r.q("angularfire2.storage.maxUploadRetryTime"),Ri=new r.q("angularfire2.storage.maxOperationRetryTime");let Di=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Ne.d(i),this.keepUnstableUntilFirst=Object(Ne.h)(this.schedulers);const a=Object(Ne.g)(t,i,e);this.storage=Object(Ne.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return ki(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return ki(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return ki(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ne.c),r.Pb(Ne.b,8),r.Pb(Pi,8),r.Pb(r.B),r.Pb(r.z),r.Pb(Ni,8),r.Pb(Ri,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ne.c),Object(r.Pb)(Ne.b,8),Object(r.Pb)(Pi,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(Ni,8),Object(r.Pb)(Ri,8))},token:t,providedIn:"any"}),t})(),Li=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),Fi=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Di],imports:[Li]}),t})();var Mi=n("DH7j"),Ui=n("XoHu");function Vi(t,e){return new Kt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Ve.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const qi=new r.q("NgValueAccessor"),Hi={provide:qi,useExisting:Object(r.T)(()=>zi),multi:!0};let zi=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.xb([Hi])]}),t})();const Bi={provide:qi,useExisting:Object(r.T)(()=>Gi),multi:!0},Wi=new r.q("CompositionEventMode");let Gi=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(Wi,8))},t.\u0275dir=r.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Sb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.xb([Bi])]}),t})(),Ki=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t}),t})(),Qi=(()=>{class t extends Ki{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return $i(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const $i=r.Nb(Qi);function Yi(){throw new Error("unimplemented")}class Xi extends Ki{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Yi()}get asyncValidator(){return Yi()}}class Ji{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Zi=(()=>{class t extends Ji{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Xi,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),to=(()=>{class t extends Ji{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Qi,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();function eo(t){return null==t||0===t.length}function no(t){return null!=t&&"number"==typeof t.length}const ro=new r.q("NgValidators"),io=new r.q("NgAsyncValidators"),oo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class so{static min(t){return e=>{if(eo(e.value)||eo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(eo(e.value)||eo(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return eo(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return eo(t.value)||oo.test(t.value)?null:{email:!0}}static minLength(t){return e=>eo(e.value)||!no(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>no(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return so.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(eo(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(ao);return 0==e.length?null:function(t){return co(lo(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(ao);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Mi.a)(e))return Vi(e,null);if(Object(Ui.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Vi(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Vi(t=1===t.length&&Object(Mi.a)(t[0])?t[0]:t,null).pipe(Object(te.a)(t=>e(...t)))}return Vi(t,null)}(lo(t,e).map(uo)).pipe(Object(te.a)(co))}}}function ao(t){return null!=t}function uo(t){const e=Object(r.qb)(t)?Object(Ve.a)(t):t;if(!Object(r.pb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function co(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function lo(t,e){return e.map(e=>e(t))}function ho(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const fo={provide:qi,useExisting:Object(r.T)(()=>po),multi:!0};let po=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([fo])]}),t})();const go={provide:qi,useExisting:Object(r.T)(()=>vo),multi:!0};let yo=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),vo=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Xi),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(yo),r.Ib(r.r))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([go])]}),t})();const mo={provide:qi,useExisting:Object(r.T)(()=>bo),multi:!0};let bo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.xb([mo])]}),t})();const _o='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',wo='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });';class Eo{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+_o)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${wo}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+_o)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+wo)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const Co={provide:qi,useExisting:Object(r.T)(()=>Oo),multi:!0};let Oo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([Co])]}),t})();const To={provide:qi,useExisting:Object(r.T)(()=>So),multi:!0};let So=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Sb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.xb([To])]}),t})();function Io(t,e){return[...e.path,t]}function xo(t,e){t||Po(e,"Cannot find control with"),e.valueAccessor||Po(e,"No value accessor for form control with"),t.validator=so.compose([t.validator,e.validator]),t.asyncValidator=so.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&jo(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&jo(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function jo(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ao(t,e){null==t&&Po(e,"Cannot find control with"),t.validator=so.compose([t.validator,e.validator]),t.asyncValidator=so.composeAsync([t.asyncValidator,e.asyncValidator])}function ko(t){return Po(t,"There is no FormControl instance attached to form control element with")}function Po(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function No(t){return null!=t?so.compose(ho(t)):null}function Ro(t){return null!=t?so.composeAsync(ho(t)):null}const Do=[zi,bo,po,Oo,So,vo],Lo="VALID",Fo="INVALID",Mo="PENDING",Uo="DISABLED";function Vo(t){const e=Ho(t)?t.validators:t;return Array.isArray(e)?No(e):e||null}function qo(t,e){const n=Ho(e)?e.asyncValidators:t;return Array.isArray(n)?Ro(n):n||null}function Ho(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class zo{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===Lo}get invalid(){return this.status===Fo}get pending(){return this.status==Mo}get disabled(){return this.status===Uo}get enabled(){return this.status!==Uo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Vo(t)}setAsyncValidators(t){this.asyncValidator=qo(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Mo,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Uo,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Lo,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Lo&&this.status!==Mo||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uo:Lo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Mo;const e=uo(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Wo?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Go&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Uo:this.errors?Fo:this._anyControlsHaveStatus(Mo)?Mo:this._anyControlsHaveStatus(Fo)?Fo:Lo}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ho(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Bo extends zo{constructor(t=null,e,n){super(Vo(e),qo(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Wo extends zo{constructor(t,e,n){super(Vo(e),qo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Bo?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Go extends zo{constructor(t,e,n){super(Vo(e),qo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Bo?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ko=(()=>{class t extends Qi{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Io(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return No(this._validators)}get asyncValidator(){return Ro(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return Qo(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const Qo=r.Nb(Ko);let $o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Yo=new r.q("NgModelWithFormControlWarning"),Xo={provide:Qi,useExisting:Object(r.T)(()=>Jo)};let Jo=(()=>{class t extends Qi{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return xo(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Ao(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Ao(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>ko(e)),e.valueAccessor.registerOnTouched(()=>ko(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&xo(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=No(this._validators);this.form.validator=so.compose([this.form.validator,t]);const e=Ro(this._asyncValidators);this.form.asyncValidator=so.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||Eo.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(ro,10),r.Ib(io,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Sb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([Xo]),r.vb,r.wb]}),t})();const Zo={provide:Qi,useExisting:Object(r.T)(()=>ts)};let ts=(()=>{class t extends Ko{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){rs(this._parent)&&Eo.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Qi,13),r.Ib(ro,10),r.Ib(io,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.xb([Zo]),r.vb]}),t})();const es={provide:Qi,useExisting:Object(r.T)(()=>ns)};let ns=(()=>{class t extends Qi{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Io(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return No(this._validators)}get asyncValidator(){return Ro(this._asyncValidators)}_checkParentType(){rs(this._parent)&&Eo.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Qi,13),r.Ib(ro,10),r.Ib(io,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.xb([es]),r.vb]}),t})();function rs(t){return!(t instanceof ts||t instanceof Jo||t instanceof ns)}const is={provide:Xi,useExisting:Object(r.T)(()=>os)};let os=(()=>{class t extends Xi{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Po(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var o;e.constructor===Gi?n=e:(o=e,Do.some(t=>o.constructor===t)?(r&&Po(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Po(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(Po(t,"No valid value accessor for form control with"),null)}(this,i)}set isDisabled(t){Eo.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(function(t,e,n,i){Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(Eo.ngModelWarning("formControlName"),e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}(0,t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Io(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return No(this._rawValidators)}get asyncValidator(){return Ro(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof ts)&&this._parent instanceof Ko?Eo.ngModelGroupException():this._parent instanceof ts||this._parent instanceof Jo||this._parent instanceof ns||Eo.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Qi,13),r.Ib(ro,10),r.Ib(io,10),r.Ib(qi,10),r.Ib(Yo,8))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([is]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})(),ss=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),as=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Wo(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Bo(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Go(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Bo||t instanceof Wo||t instanceof Go?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),us=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Yo,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[as,yo],imports:[ss]}),t})();class cs extends tn.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new on.a;return this._value}next(t){super.next(this._value=t)}}var ls=n("z+Ro"),hs=n("yCtX");const fs={};class ds{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ps(t,this.resultSelector))}}class ps extends Fe.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(fs),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(Ue.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===fs?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function gs(t){return new Kt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Ve.a)(n):Object(fn.b)()).subscribe(e)})}var ys=n("bHdf");function vs(){return Object(ys.a)(1)}function ms(t){return function(e){return 0===t?Object(fn.b)():e.lift(new bs(t))}}class bs{constructor(t){if(this.total=t,this.total<0)throw new hn}call(t,e){return e.subscribe(new _s(t,this.total))}}class _s extends Yt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ws(t){return function(e){const n=new Es(t),r=e.lift(n);return n.caught=r}}class Es{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Cs(t,this.selector,this.caught))}}class Cs extends Fe.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Me.a(this,void 0,void 0);this.add(r);const i=Object(Ue.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}var Os=n("vkgz");class Ts{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Ss(t,this.predicate,this.thisArg,this.source))}}class Ss extends Yt.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Is(...t){return vs()(Object(Gt.a)(...t))}function xs(...t){const e=t[t.length-1];return Object(ls.a)(e)?(t.pop(),n=>Is(t,n,e)):e=>Is(t,e)}class js{constructor(t){this.callback=t}call(t,e){return e.subscribe(new As(t,this.callback))}}class As extends Yt.a{constructor(t,e){super(t),this.add(new rn.a(e))}}class ks{constructor(t,e){this.id=t,this.url=e}}class Ps extends ks{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ns extends ks{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rs extends ks{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ds extends ks{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ls extends ks{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs extends ks{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ms extends ks{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Us extends ks{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vs extends ks{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qs{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hs{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zs{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ws{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qs="primary";class $s{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ys(t){return new $s(t)}function Xs(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Js(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Zs(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ta(t[i],e[i]))return!1;return!0}function ta(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function ea(t){return Array.prototype.concat.apply([],t)}function na(t){return t.length>0?t[t.length-1]:null}function ra(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ia(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(Ve.a)(Promise.resolve(t)):Object(Gt.a)(t)}function oa(t,e,n){return n?function(t,e){return Zs(t,e)}(t.queryParams,e.queryParams)&&sa(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ta(t[n],e[n]))}(t.queryParams,e.queryParams)&&aa(t.root,e.root)}function sa(t,e){if(!fa(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!sa(t.children[n],e.children[n]))return!1}return!0}function aa(t,e){return ua(t,e,e.segments)}function ua(t,e,n){if(t.segments.length>n.length)return!!fa(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!fa(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!aa(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!fa(t.segments,r)&&!!t.children.primary&&ua(t.children.primary,e,i)}}class ca{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ys(this.queryParams)),this._queryParamMap}toString(){return ya.serialize(this)}}class la{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ra(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return va(this)}}class ha{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ys(this.parameters)),this._parameterMap}toString(){return Oa(this)}}function fa(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function da(t,e){let n=[];return ra(t.children,(t,r)=>{r===Qs&&(n=n.concat(e(t,r)))}),ra(t.children,(t,r)=>{r!==Qs&&(n=n.concat(e(t,r)))}),n}class pa{}class ga{parse(t){const e=new ja(t);return new ca(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+ma(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${_a(e)}=${_a(t)}`).join("&"):`${_a(e)}=${_a(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const ya=new ga;function va(t){return t.segments.map(t=>Oa(t)).join("/")}function ma(t,e){if(!t.hasChildren())return va(t);if(e){const e=t.children.primary?ma(t.children.primary,!1):"",n=[];return ra(t.children,(t,e)=>{e!==Qs&&n.push(`${e}:${ma(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=da(t,(e,n)=>n===Qs?[ma(t.children.primary,!1)]:[`${n}:${ma(e,!1)}`]);return`${va(t)}/(${e.join("//")})`}}function ba(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _a(t){return ba(t).replace(/%3B/gi,";")}function wa(t){return ba(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ea(t){return decodeURIComponent(t)}function Ca(t){return Ea(t.replace(/\+/g,"%20"))}function Oa(t){return`${wa(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wa(t)}=${wa(e[t])}`).join("")}`;var e}const Ta=/^[^\/()?;=#]+/;function Sa(t){const e=t.match(Ta);return e?e[0]:""}const Ia=/^[^=?&#]+/,xa=/^[^?&#]+/;class ja{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new la([],{}):new la([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new la(t,e)),n}parseSegment(){const t=Sa(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ha(Ea(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Sa(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Sa(this.remaining);t&&(n=t,this.capture(n))}t[Ea(e)]=Ea(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ia);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(xa);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Ca(e),i=Ca(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Sa(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Qs);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new la([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Aa{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ka(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ka(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pa(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Pa(t,this._root).map(t=>t.value)}}function ka(t,e){if(t===e.value)return e;for(const n of e.children){const e=ka(t,n);if(e)return e}return null}function Pa(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Pa(t,n);if(r.length)return r.unshift(e),r}return[]}class Na{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ra(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Da extends Aa{constructor(t,e){super(t),this.snapshot=e,qa(this,t)}toString(){return this.snapshot.toString()}}function La(t,e){const n=function(t,e){const n=new Ua([],{},{},"",{},Qs,e,null,t.root,-1,{});return new Va("",new Na(n,[]))}(t,e),r=new cs([new ha("",{})]),i=new cs({}),o=new cs({}),s=new cs({}),a=new cs(""),u=new Fa(r,i,s,a,o,Qs,e,n.root);return u.snapshot=n.root,new Da(new Na(u,[]),n)}class Fa{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(te.a)(t=>Ys(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(te.a)(t=>Ys(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ma(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ua{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ys(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ys(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Va extends Aa{constructor(t,e){super(e),this.url=t,qa(this,e)}toString(){return Ha(this._root)}}function qa(t,e){e.value._routerState=t,e.children.forEach(e=>qa(t,e))}function Ha(t){const e=t.children.length>0?` { ${t.children.map(Ha).join(", ")} } `:"";return`${t.value}${e}`}function za(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zs(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Zs(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Zs(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ba(t,e){return Zs(t.params,e.params)&&function(t,e){return fa(t,e)&&t.every((t,n)=>Zs(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ba(t.parent,e.parent))}function Wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(r.value.snapshot,e.value))return Wa(t,e,r);return Wa(t,e)})}(t,e,n);return new Na(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Ga(e,t),t}{const n=new Fa(new cs((r=e.value).url),new cs(r.params),new cs(r.queryParams),new cs(r.fragment),new cs(r.data),r.outlet,r.component,r),i=e.children.map(e=>Wa(t,e));return new Na(n,i)}}var r}function Ga(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ga(t.children[n],e.children[n])}function Ka(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Qa(t,e,n,r,i){let o={};return r&&ra(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new ca(n.root===t?e:$a(n.root,t,e),o,i)}function $a(t,e,n){const r={};return ra(t.children,(t,i)=>{r[i]=t===e?n:$a(t,e,n)}),new la(t.segments,r)}class Ya{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ka(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==na(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xa{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ja(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Za(t,e,n){if(t||(t=new la([],{})),0===t.segments.length&&t.hasChildren())return tu(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=Ja(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!iu(s,a,e))return o;r+=2}else{if(!iu(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new la(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new la(t.segments.slice(r.pathIndex),t.children),tu(e,0,i)}return r.match&&0===i.length?new la(t.segments,{}):r.match&&!t.hasChildren()?eu(t,e,n):r.match?tu(t,0,i):eu(t,e,n)}function tu(t,e,n){if(0===n.length)return new la(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{[Qs]:t}}(n),i={};return ra(r,(n,r)=>{null!==n&&(i[r]=Za(t.children[r],e,n))}),ra(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new la(t.segments,i)}}function eu(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=nu(n[i].outlets);return new la(r,t)}if(0===i&&Ka(n[0])){r.push(new ha(t.segments[e].path,n[0])),i++;continue}const o=Ja(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Ka(s)?(r.push(new ha(o,ru(s))),i+=2):(r.push(new ha(o,{})),i++)}return new la(r,{})}function nu(t){const e={};return ra(t,(t,n)=>{null!==t&&(e[n]=eu(new la([],{}),0,t))}),e}function ru(t){const e={};return ra(t,(t,n)=>e[n]=""+t),e}function iu(t,e,n){return t==n.path&&Zs(e,n.parameters)}class ou{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),za(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ra(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ra(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Ra(t),i=t.value.component?n.children:e;ra(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Ra(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Gs(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Bs(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(za(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),su(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function su(t){za(t.value),t.children.forEach(su)}class au{constructor(t,e){this.routes=t,this.module=e}}function uu(t){return"function"==typeof t}function cu(t){return t instanceof ca}class lu{constructor(t){this.segmentGroup=t||null}}class hu{constructor(t){this.urlTree=t}}function fu(t){return new Kt.a(e=>e.error(new lu(t)))}function du(t){return new Kt.a(e=>e.error(new hu(t)))}function pu(t){return new Kt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class gu{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Qs).pipe(Object(te.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(ws(t=>{if(t instanceof hu)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof lu)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qs).pipe(Object(te.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(ws(t=>{if(t instanceof lu)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new la([],{[Qs]:t}):t;return new ca(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(te.a)(t=>new la([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Gt.a)({});const n=[],r=[],i={};return ra(t,(t,o)=>{const s=e(o,t).pipe(Object(te.a)(t=>i[o]=t));o===Qs?n.push(s):r.push(s)}),Gt.a.apply(null,n.concat(r)).pipe(vs(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Xt((e,n)=>t(e,n,r)):Cn.a,ms(1),n?yn(e):bn(()=>new ln))}(),Object(te.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Gt.a)(...n).pipe(Object(te.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ws(t=>{if(t instanceof lu)return Object(Gt.a)(null);throw t}))),vs(),On(t=>!!t),ws((t,n)=>{if(t instanceof ln||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Gt.a)(new la([],{}));throw new lu(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return bu(r)!==o?fu(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):fu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?du(i):this.lineralizeSegments(n,i).pipe(Object(Qt.a)(n=>{const i=new la(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=yu(e,r,i);if(!s)return fu(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?du(l):this.lineralizeSegments(r,l).pipe(Object(Qt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(te.a)(t=>(n._loadedConfig=t,new la(r,{})))):Object(Gt.a)(new la(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=yu(e,n,r);if(!i)return fu(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(Qt.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>mu(t,e,n)&&bu(n)!==Qs)}(t,n,r)?{segmentGroup:vu(new la(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&bu(r)!==Qs&&(n[bu(r)]=new la([],{}));return n}(r,new la(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>mu(t,e,n))}(t,n,r)?{segmentGroup:vu(new la(t.segments,function(t,e,n,r){const i={};for(const o of n)mu(t,e,o)&&!r[bu(o)]&&(i[bu(o)]=new la([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(te.a)(t=>new la(o,t))):0===r.length&&0===s.length?Object(Gt.a)(new la(o,{})):this.expandSegment(n,i,r,s,Qs,!0).pipe(Object(te.a)(t=>new la(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Gt.a)(new au(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Gt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Qt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(te.a)(t=>(e._loadedConfig=t,t))):function(t){return new Kt.a(e=>e.error(Xs(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Gt.a)(new au([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(Ve.a)(r).pipe(Object(te.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&uu(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!uu(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return ia(o)})).pipe(vs(),Object(Os.a)(t=>{if(!cu(t))return;const e=Xs(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new Ts(i,void 0,t)))):Object(Gt.a)(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Gt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return pu(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ca(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ra(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ra(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new la(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function yu(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Js)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function vu(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new la(t.segments.concat(e.segments),e.children)}return t}function mu(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function bu(t){return t.outlet||Qs}class _u{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wu{constructor(t,e){this.component=t,this.route=e}}function Eu(t,e,n){const r=t._root;return Ou(r,e?e._root:null,n,[r.value])}function Cu(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ou(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ra(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fa(t.url,e.url)||!Zs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ba(t,e)||!Zs(t.queryParams,e.queryParams);case"paramsChange":default:return!Ba(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _u(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ou(t,e,o.component?a?a.children:null:n,r,i),u&&i.canDeactivateChecks.push(new wu(a&&a.outlet&&a.outlet.component||null,s))}else s&&Tu(e,a,i),i.canActivateChecks.push(new _u(r)),Ou(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ra(o,(t,e)=>Tu(t,n.getContext(e),i)),i}function Tu(t,e,n){const r=Ra(t),i=t.value;ra(r,(t,r)=>{Tu(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new wu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Su=Symbol("INITIAL_VALUE");function Iu(){return qe(t=>function(...t){let e=null,n=null;return Object(ls.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Mi.a)(t[0])&&(t=t[0]),Object(hs.a)(t,n).lift(new ds(e))}(...t.map(t=>t.pipe(dn(1),xs(Su)))).pipe(Be((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Su)return t;if(r===Su&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||cu(r))return r}return t},t)},Su),Xt(t=>t!==Su),Object(te.a)(t=>cu(t)?t:!0===t),dn(1)))}function xu(t,e){return null!==t&&e&&e(new Ws(t)),Object(Gt.a)(!0)}function ju(t,e){return null!==t&&e&&e(new zs(t)),Object(Gt.a)(!0)}function Au(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Gt.a)(!0);const i=r.map(r=>gs(()=>{const i=Cu(r,e,n);let o;if(function(t){return t&&uu(t.canActivate)}(i))o=ia(i.canActivate(e,t));else{if(!uu(i))throw new Error("Invalid CanActivate guard");o=ia(i(e,t))}return o.pipe(On())}));return Object(Gt.a)(i).pipe(Iu())}function ku(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>gs(()=>{const i=e.guards.map(i=>{const o=Cu(i,e.node,n);let s;if(function(t){return t&&uu(t.canActivateChild)}(o))s=ia(o.canActivateChild(r,t));else{if(!uu(o))throw new Error("Invalid CanActivateChild guard");s=ia(o(r,t))}return s.pipe(On())});return Object(Gt.a)(i).pipe(Iu())}));return Object(Gt.a)(i).pipe(Iu())}class Pu{}class Nu{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Lu(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qs),n=new Ua([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qs,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Na(n,e),i=new Va(this.url,r);return this.inheritParamsAndData(i._root),Object(Gt.a)(i)}catch(t){return new Kt.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Ma(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=da(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===Qs?-1:e.value.outlet===Qs?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Pu))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Pu}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Pu;if((t.outlet||Qs)!==r)throw new Pu;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?na(n).parameters:{};i=new Ua(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uu(t),r,t.component,t,Ru(e),Du(e)+n.length,Vu(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Pu;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Js)(n,t,e);if(!r)throw new Pu;const i={};ra(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Ua(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Uu(t),r,t.component,t,Ru(e),Du(e)+o.length,Vu(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Lu(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new Na(i,t)]}if(0===a.length&&0===c.length)return[new Na(i,[])];const l=this.processSegment(a,u,c,Qs);return[new Na(i,l)]}}function Ru(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Du(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Lu(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Fu(t,e,n)&&Mu(n)!==Qs)}(t,n,r)){const i=new la(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Mu(o)!==Qs){const n=new la([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Mu(o)]=n}return i}(t,e,r,new la(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Fu(t,e,n))}(t,n,r)){const o=new la(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Fu(t,n,a)&&!i[Mu(a)]){const n=new la([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Mu(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new la(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Fu(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Mu(t){return t.outlet||Qs}function Uu(t){return t.data||{}}function Vu(t){return t.resolve||{}}function qu(t){return function(e){return e.pipe(qe(e=>{const n=t(e);return n?Object(Ve.a)(n).pipe(Object(te.a)(()=>e)):Object(Ve.a)([e])}))}}class Hu{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let zu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Jb(0,"router-outlet")},directives:function(){return[rc]},encapsulation:2}),t})();function Bu(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Wu(r,Gu(e,r))}}function Wu(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==Qs)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Bu(t.children,e)}function Gu(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ku(t){const e=t.children&&t.children.map(Ku),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Qs&&(n.component=zu),n}const Qu=new r.q("ROUTES");class $u{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(te.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new au(ea(r.injector.get(Qu)).map(Ku),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Ve.a)(this.loader.load(t)):ia(t()).pipe(Object(Qt.a)(t=>t instanceof r.v?Object(Gt.a)(t):Object(Ve.a)(this.compiler.compileModuleAsync(t))))}}class Yu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xu,this.attachRef=null}}class Xu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Yu,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ju{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Zu(t){throw t}function tc(t,e,n){return e.parse("/")}function ec(t,e){return Object(Gt.a)(null)}let nc=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new tn.a,this.errorHandler=Zu,this.malformedUriErrorHandler=tc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ec,afterPreactivation:ec},this.urlHandlingStrategy=new Ju,this.routeReuseStrategy=new Hu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new ca(new la([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $u(s,a,t=>this.triggerEvent(new qs(t)),t=>this.triggerEvent(new Hs(t))),this.routerState=La(this.currentUrlTree,this.rootComponentType),this.transitions=new cs({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Xt(t=>0!==t.id),Object(te.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),qe(t=>{let n=!1,r=!1;return Object(Gt.a)(t).pipe(Object(Os.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qe(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Gt.a)(t).pipe(qe(t=>{const n=this.transitions.getValue();return e.next(new Ps(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?fn.a:[t]}),qe(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(qe(t=>function(t,e,n,r,i){return new gu(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(te.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Os.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(Qt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Nu(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(te.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Os.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Os.a)(t=>{const n=new Ls(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ps(n,this.serializeUrl(r),i,o);e.next(a);const u=La(r,this.rootComponentType).snapshot;return Object(Gt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),fn.a}),qu(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Os.a)(t=>{const e=new Fs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(te.a)(t=>Object.assign(Object.assign({},t),{guards:Eu(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(Qt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Gt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Ve.a)(t).pipe(Object(Qt.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Gt.a)(!0);const s=o.map(o=>{const s=Cu(o,e,i);let a;if(function(t){return t&&uu(t.canDeactivate)}(s))a=ia(s.canDeactivate(t,e,n,r));else{if(!uu(s))throw new Error("Invalid CanDeactivate guard");a=ia(s(t,e,n,r))}return a.pipe(On())});return Object(Gt.a)(s).pipe(Iu())}(t.component,t.route,n,e,r)),On(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Qt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Ve.a)(e).pipe($t(e=>Object(Ve.a)([ju(e.route.parent,r),xu(e.route,r),ku(t,e.path,n),Au(t,e.route,n)]).pipe(vs(),On(t=>!0!==t,!0))),On(t=>!0!==t,!0))}(r,o,t,e):Object(Gt.a)(n)),Object(te.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Os.a)(t=>{if(cu(t.guardsResult)){const e=Xs(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Os.a)(t=>{const e=new Ms(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Xt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Rs(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),qu(t=>{if(t.guards.canActivateChecks.length)return Object(Gt.a)(t).pipe(Object(Os.a)(t=>{const e=new Us(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),qe(t=>{let n=!1;return Object(Gt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(Qt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Gt.a)(t);let o=0;return Object(Ve.a)(n).pipe($t(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Gt.a)({});const o={};return Object(Ve.a)(i).pipe(Object(Qt.a)(i=>function(t,e,n,r){const i=Cu(t,e,r);return ia(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Os.a)(t=>{o[i]=t}))),ms(1),Object(Qt.a)(()=>Object.keys(o).length===i.length?Object(Gt.a)(o):fn.a))}(t._resolve,t,e,r).pipe(Object(te.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ma(t,n).resolve),null)))}(t.route,e,r,i)),Object(Os.a)(()=>o++),ms(1),Object(Qt.a)(e=>o===n.length?Object(Gt.a)(t):fn.a))}))}),Object(Os.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Rs(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Os.a)(t=>{const e=new Vs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),qu(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(te.a)(t=>{const e=function(t,e,n){const r=Wa(t,e._root,n?n._root:void 0);return new Da(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Os.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(te.a)(t=>(new ou(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Os.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Rs(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new js(i))),ws(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=cu(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Rs(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ds(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(sg){t.reject(sg)}}var i;return fn.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Bu(t),this.config=t.map(Ku),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Qa(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ya(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ra(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ya(n,e,r)}(n);if(o.toRoot())return Qa(e.root,new la([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Xa(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Xa(t,t===e.root,0)}const r=Ka(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Xa(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?tu(s.segmentGroup,s.index,o.commands):Za(s.segmentGroup,s.index,o.commands);return Qa(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.U)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=cu(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(cu(t))return oa(this.currentUrlTree,t,e);const n=this.parseUrl(t);return oa(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ns(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.M),r.Pb(pa),r.Pb(Xu),r.Pb(E),r.Pb(r.r),r.Pb(r.w),r.Pb(r.i),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),rc=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Qs,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ic(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Xu),r.Ib(r.P),r.Ib(r.j),r.Qb("name"),r.Ib(r.h))},t.\u0275dir=r.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ic{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Fa?this.route:t===Xu?this.childContexts:this.parent.get(t,e)}}class oc{}class sc{preload(t,e){return Object(Gt.a)(null)}}let ac=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new $u(e,n,e=>t.triggerEvent(new qs(e)),e=>t.triggerEvent(new Hs(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(t=>t instanceof Ns),$t(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Ve.a)(n).pipe(Object(ys.a)(),Object(te.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Qt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(nc),r.Pb(r.w),r.Pb(r.i),r.Pb(r.r),r.Pb(oc))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),uc=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ps?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ns&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ks&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ks(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(nc),r.Pb(pt),r.Pb(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const cc=new r.q("ROUTER_CONFIGURATION"),lc=new r.q("ROUTER_FORROOT_GUARD"),hc=[E,{provide:pa,useClass:ga},{provide:nc,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new nc(null,t,e,n,r,i,o,ea(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[pa,Xu,E,r.r,r.w,r.i,Qu,cc,[class{},new r.A],[class{},new r.A]]},Xu,{provide:Fa,useFactory:function(t){return t.routerState.root},deps:[nc]},{provide:r.w,useClass:r.J},ac,sc,class{preload(t,e){return e().pipe(ws(()=>Object(Gt.a)(null)))}},{provide:cc,useValue:{enableTracing:!1}}];function fc(){return new r.y("Router",nc)}let dc=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[hc,vc(e),{provide:lc,useFactory:yc,deps:[[nc,new r.A,new r.I]]},{provide:cc,useValue:n||{}},{provide:v,useFactory:gc,deps:[u,[new r.p(b),new r.A],cc]},{provide:uc,useFactory:pc,deps:[nc,pt,cc]},{provide:oc,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:sc},{provide:r.y,multi:!0,useFactory:fc},[mc,{provide:r.d,multi:!0,useFactory:bc,deps:[mc]},{provide:wc,useFactory:_c,deps:[mc]},{provide:r.b,multi:!0,useExisting:wc}]]}}static forChild(e){return{ngModule:t,providers:[vc(e)]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Pb(lc,8),r.Pb(nc,8))}}),t})();function pc(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new uc(t,e,n)}function gc(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function yc(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function vc(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Qu,multi:!0,useValue:t}]}let mc=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new tn.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(nc),r=this.injector.get(cc);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Gt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(cc),n=this.injector.get(ac),i=this.injector.get(uc),o=this.injector.get(nc),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function bc(t){return t.appInitializer.bind(t)}function _c(t){return t.bootstrapListener.bind(t)}const wc=new r.q("Router Initializer");function Ec(){return t=>t.lift(new Cc)}class Cc{call(t,e){return e.subscribe(new Oc(t))}}class Oc extends Yt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Tc=n("q/0M"),Sc=function(t,e){return(Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ic(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var xc,jc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ac=Ac||{},kc=jc||self;function Pc(){}function Nc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Rc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Dc="closure_uid_"+(1e9*Math.random()>>>0),Lc=0;function Fc(t,e,n){return t.call.apply(t.bind,arguments)}function Mc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Uc(t,e,n){return(Uc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fc:Mc).apply(null,arguments)}function Vc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function qc(){return Date.now()}function Hc(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function zc(){this.j=this.j,this.i=this.i}zc.prototype.j=!1,zc.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Dc)&&t[Dc]||(t[Dc]=++Lc)}(this)},zc.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Bc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Wc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Gc(t){return Array.prototype.concat.apply([],arguments)}function Kc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Qc(t){return/^[\s\xa0]*$/.test(t)}var $c,Yc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xc(t,e){return-1!=t.indexOf(e)}function Jc(t,e){return t<e?-1:t>e?1:0}t:{var Zc=kc.navigator;if(Zc){var tl=Zc.userAgent;if(tl){$c=tl;break t}}$c=""}function el(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function nl(t){var e={};for(var n in t)e[n]=t[n];return e}var rl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function il(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<rl.length;o++)n=rl[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ol(t){return ol[" "](t),t}ol[" "]=Pc;var sl,al,ul=Xc($c,"Opera"),cl=Xc($c,"Trident")||Xc($c,"MSIE"),ll=Xc($c,"Edge"),hl=ll||cl,fl=Xc($c,"Gecko")&&!(Xc($c.toLowerCase(),"webkit")&&!Xc($c,"Edge"))&&!(Xc($c,"Trident")||Xc($c,"MSIE"))&&!Xc($c,"Edge"),dl=Xc($c.toLowerCase(),"webkit")&&!Xc($c,"Edge");function pl(){var t=kc.document;return t?t.documentMode:void 0}t:{var gl="",yl=(al=$c,fl?/rv:([^\);]+)(\)|;)/.exec(al):ll?/Edge\/([\d\.]+)/.exec(al):cl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(al):dl?/WebKit\/(\S+)/.exec(al):ul?/(?:Version)[ \/]?(\S+)/.exec(al):void 0);if(yl&&(gl=yl?yl[1]:""),cl){var vl=pl();if(null!=vl&&vl>parseFloat(gl)){sl=String(vl);break t}}sl=gl}var ml={};function bl(t){return function(t,e){var n=ml;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Yc(String(sl)).split("."),r=Yc(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Jc(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Jc(0==s[2].length,0==a[2].length)||Jc(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var _l=kc.document&&cl&&(pl()||parseInt(sl,10))||void 0,wl=!cl||9<=Number(_l),El=cl&&!bl("9"),Cl=function(){if(!kc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{kc.addEventListener("test",Pc,e),kc.removeEventListener("test",Pc,e)}catch(n){}return t}();function Ol(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Tl(t,e){if(Ol.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(fl){t:{try{ol(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Sl[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ol.prototype.b=function(){this.defaultPrevented=!0},Hc(Tl,Ol);var Sl={2:"touch",3:"pen",4:"mouse"};Tl.prototype.b=function(){Tl.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,El)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Il="closure_listenable_"+(1e6*Math.random()|0),xl=0;function jl(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++xl,this.Y=this.Z=!1}function Al(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function kl(t){this.src=t,this.a={},this.b=0}function Pl(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Bc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Al(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Nl(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}kl.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Nl(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new jl(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Rl="closure_lm_"+(1e6*Math.random()|0),Dl={};function Ll(t,e,n,r,i){if(r&&r.once)return Ml(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ll(t,e[o],n,r,i);return null}return n=Gl(n),t&&t[Il]?t.va(e,n,Rc(r)?!!r.capture:!!r,i):Fl(t,e,n,!1,r,i)}function Fl(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Rc(i)?!!i.capture:!!i;if(s&&!wl)return null;var a=Bl(t);if(a||(t[Rl]=a=new kl(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=zl,e=wl?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Cl||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ql(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ml(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ml(t,e[o],n,r,i);return null}return n=Gl(n),t&&t[Il]?t.wa(e,n,Rc(r)?!!r.capture:!!r,i):Fl(t,e,n,!0,r,i)}function Ul(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ul(t,e[o],n,r,i);else r=Rc(r)?!!r.capture:!!r,n=Gl(n),t&&t[Il]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Nl(o=t.a[e],n,r,i))&&(Al(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Bl(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Nl(e,n,r,i)),(n=-1<t?e[t]:null)&&Vl(n))}function Vl(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Il])Pl(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ql(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bl(e))?(Pl(n,t),0==n.b&&(n.src=null,e[Rl]=null)):Al(t)}}}function ql(t){return t in Dl?Dl[t]:Dl[t]="on"+t}function Hl(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Vl(t),n.call(r,e)}function zl(t,e){if(t.Y)return!0;if(!wl){if(!e)t:{e=["window","event"];for(var n=kc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Hl(t,e=new Tl(e,this))}return Hl(t,new Tl(e,this))}function Bl(t){return(t=t[Rl])instanceof kl?t:null}var Wl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gl(t){return"function"==typeof t?t:(t[Wl]||(t[Wl]=function(e){return t.handleEvent(e)}),t[Wl])}function Kl(){zc.call(this),this.c=new kl(this),this.J=this,this.C=null}function Ql(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ol(e,t);else if(e instanceof Ol)e.target=e.target||t;else{var i=e;il(e=new Ol(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=$l(s,r,!0,e)&&i}if(i=$l(s=e.a=t,r,!0,e)&&i,i=$l(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=$l(s=e.a=n[o],r,!1,e)&&i}function $l(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Pl(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Hc(Kl,zc),Kl.prototype[Il]=!0,(xc=Kl.prototype).addEventListener=function(t,e,n,r){Ll(this,t,e,n,r)},xc.removeEventListener=function(t,e,n,r){Ul(this,t,e,n,r)},xc.G=function(){if(Kl.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Al(n[r]);delete e.a[t],e.b--}}this.C=null},xc.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},xc.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Yl=kc.JSON.stringify;function Xl(){this.b=this.a=null}var Jl,Zl=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new eh},function(t){t.reset()});function th(){var t=oh,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function eh(){this.next=this.b=this.a=null}function nh(t){kc.setTimeout(function(){throw t},0)}function rh(t,e){Jl||function(){var t=kc.Promise.resolve(void 0);Jl=function(){t.then(sh)}}(),ih||(Jl(),ih=!0),oh.add(t,e)}Xl.prototype.add=function(t,e){var n=Zl.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},eh.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},eh.prototype.reset=function(){this.next=this.b=this.a=null};var ih=!1,oh=new Xl;function sh(){for(var t;t=th();){try{t.a.call(t.b)}catch(n){nh(n)}var e=Zl;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ih=!1}function ah(t,e){Kl.call(this),this.b=t||1,this.a=e||kc,this.f=Uc(this.Za,this),this.g=qc()}function uh(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ch(t,e,n){if("function"==typeof t)n&&(t=Uc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Uc(t.handleEvent,t)}return 2147483647<Number(e)?-1:kc.setTimeout(t,e||0)}function lh(t){t.a=ch(function(){t.a=null,t.c&&(t.c=!1,lh(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Hc(ah,Kl),(xc=ah.prototype).aa=!1,xc.M=null,xc.Za=function(){if(this.aa){var t=qc()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ql(this,"tick"),this.aa&&(uh(this),this.start()))}},xc.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=qc())},xc.G=function(){ah.X.G.call(this),uh(this),delete this.a};var hh=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Sc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:lh(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(kc.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(zc);function fh(t){zc.call(this),this.b=t,this.a={}}Hc(fh,zc);var dh=[];function ph(t,e,n,r){Array.isArray(n)||(n&&(dh[0]=n.toString()),n=dh);for(var i=0;i<n.length;i++){var o=Ll(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function gh(t){el(t.a,function(t,e){this.a.hasOwnProperty(e)&&Vl(t)},t),t.a={}}function yh(){this.a=!0}function vh(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Yl(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}fh.prototype.G=function(){fh.X.G.call(this),gh(this)},fh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yh.prototype.info=function(){};var mh={},bh=null;function _h(){return bh=bh||new Kl}function wh(t){Ol.call(this,mh.Fa,t)}function Eh(t){var e=_h();Ql(e,new wh(e,t))}function Ch(t,e){Ol.call(this,mh.STAT_EVENT,t),this.stat=e}function Oh(t){var e=_h();Ql(e,new Ch(e,t))}function Th(t){Ol.call(this,mh.Ga,t)}function Sh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return kc.setTimeout(function(){t()},e)}mh.Fa="serverreachability",Hc(wh,Ol),mh.STAT_EVENT="statevent",Hc(Ch,Ol),mh.Ga="timingevent",Hc(Th,Ol);var Ih={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},xh={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function jh(){}function Ah(){}jh.prototype.a=null;var kh,Ph={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Nh(){Ol.call(this,"d")}function Rh(){Ol.call(this,"c")}function Dh(){}function Lh(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new fh(this),this.P=Fh,this.R=new ah(t=hl?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Hc(Nh,Ol),Hc(Rh,Ol),Hc(Dh,jh),kh=new Dh;var Fh=45e3,Mh={},Uh={};function Vh(t,e,n){t.H=1,t.i=cf(nf(e)),t.j=n,t.I=!0,qh(t,null)}function qh(t,e){t.u=qc(),Bh(t),t.l=nf(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ef(n.b,"t",r),t.D=0,t.a=yd(t.g,t.g.C?e:null),0<t.O&&(t.F=new hh(Uc(t.Ca,t,t.a),t.O)),ph(t.J,t.a,"readystatechange",t.Xa),e=t.B?nl(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Eh(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Hh(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=zh(t,n);if(i==Uh){4==e&&(t.h=4,Oh(14),r=!1),vh(t.c,t.f,null,"[Incomplete Response]");break}if(i==Mh){t.h=4,Oh(15),vh(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}vh(t.c,t.f,i,null),$h(t,i)}4==e&&0==n.length&&(t.h=1,Oh(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ud(e),e.F=!0,Oh(11))):(vh(t.c,t.f,n,"[Invalid Chunked Response]"),Qh(t),Kh(t))}function zh(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Uh:(n=Number(e.substring(n,r)),isNaN(n)?Mh:(r+=1)+n>e.length?Uh:(e=e.substr(r,n),t.D=r+n,e))}function Bh(t){t.T=qc()+t.P,Wh(t,t.P)}function Wh(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Sh(Uc(t.Va,t),e)}function Gh(t){t.o&&(kc.clearTimeout(t.o),t.o=null)}function Kh(t){0==t.g.v||t.A||hd(t.g,t)}function Qh(t){Gh(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,uh(t.R),gh(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function $h(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||jf(n.b,t)))if(n.I=t.N,!t.C&&jf(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(rC){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ld(n),Zf(n)}ad(n),Oh(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Sh(Uc(n.Sa,n),6e3));if(1>=xf(n.b)&&n.ea){try{n.ea()}catch(rC){}n.ea=void 0}}else dd(n,11)}else if((t.C||n.a==t)&&ld(n),!Qc(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Xc(l,"spdy")||Xc(l,"quic")||Xc(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Af(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,uf(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=qc()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=gd(u,u.C?u.ga:null,u.fa),d.C){kf(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Gh(p),Bh(p)),u.a=d}else sd(u);0<n.g.length&&nd(n)}else"stop"!=i[0]&&"close"!=i[0]||dd(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?dd(n,7):Jf(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Eh(4)}catch(rC){}}function Yh(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Nc(t)||"string"==typeof t)Wc(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Nc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Nc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Xh(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xh)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Jh(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Zh(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Zh(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Zh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(xc=Lh.prototype).setTimeout=function(t){this.P=t},xc.Xa=function(t){t=t.target;var e=this.F;e&&3==Qf(t)?e.f():this.Ca(t)},xc.Ca=function(t){try{if(t==this.a)t:{var e=Qf(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!hl&&!this.a.$())){this.A||4!=e||7==n||Eh(8==n||0>=r?3:2),Gh(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qc(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Oh(12),Qh(this),Kh(this);break t}vh(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,$h(this,u)}this.I?(Hh(this,e,o),hl&&this.b&&3==e&&(ph(this.J,this.R,"tick",this.Wa),this.R.start())):(vh(this.c,this.f,o,null),$h(this,o)),4==e&&Qh(this),this.b&&!this.A&&(4==e?hd(this.g,this):(this.b=!1,Bh(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Oh(12)):(this.h=0,Oh(13)),Qh(this),Kh(this)}}}catch(c){}},xc.Wa=function(){if(this.a){var t=Qf(this.a),e=this.a.$();this.D<e.length&&(Gh(this),Hh(this,t,e),this.b&&4!=t&&Bh(this))}},xc.cancel=function(){this.A=!0,Qh(this)},xc.Va=function(){this.o=null;var t=qc();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Eh(3),Oh(17)),Qh(this),this.h=2,Kh(this)):Wh(this,this.T-t)},(xc=Xh.prototype).K=function(){Jh(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},xc.L=function(){return Jh(this),this.a.concat()},xc.get=function(t,e){return Zh(this.b,t)?this.b[t]:e},xc.set=function(t,e){Zh(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},xc.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var tf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ef(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ef){this.a=void 0!==e?e:t.a,rf(this,t.f),this.j=t.j,of(this,t.c),sf(this,t.h),this.g=t.g,e=t.b;var n=new mf;n.c=e.c,e.a&&(n.a=new Xh(e.a),n.b=e.b),af(this,n),this.i=t.i}else t&&(n=String(t).match(tf))?(this.a=!!e,rf(this,n[1]||"",!0),this.j=lf(n[2]||""),of(this,n[3]||"",!0),sf(this,n[4]),this.g=lf(n[5]||"",!0),af(this,n[6]||"",!0),this.i=lf(n[7]||"")):(this.a=!!e,this.b=new mf(null,this.a))}function nf(t){return new ef(t)}function rf(t,e,n){t.f=n?lf(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function of(t,e,n){t.c=n?lf(e,!0):e}function sf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function af(t,e,n){e instanceof mf?(t.b=e,function(t,e){e&&!t.f&&(bf(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(_f(this,e),Ef(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=hf(e,yf)),t.b=new mf(e,t.a))}function uf(t,e,n){t.b.set(e,n)}function cf(t){return uf(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^qc()).toString(36)),t}function lf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ff),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ff(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ef.prototype.toString=function(){var t=[],e=this.f;e&&t.push(hf(e,df,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(hf(e,df,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(hf(n,"/"==n.charAt(0)?gf:pf,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",hf(n,vf)),t.join("")};var df=/[#\/\?@]/g,pf=/[#\?:]/g,gf=/[#\?]/g,yf=/[#\?@]/g,vf=/#/g;function mf(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function bf(t){t.a||(t.a=new Xh,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _f(t,e){bf(t),e=Cf(t,e),Zh(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Zh((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Jh(t)))}function wf(t,e){return bf(t),e=Cf(t,e),Zh(t.a.b,e)}function Ef(t,e,n){_f(t,e),0<n.length&&(t.c=null,t.a.set(Cf(t,e),Kc(n)),t.b+=n.length)}function Cf(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(xc=mf.prototype).add=function(t,e){bf(this),this.c=null,t=Cf(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},xc.forEach=function(t,e){bf(this),this.a.forEach(function(n,r){Wc(n,function(n){t.call(e,n,r,this)},this)},this)},xc.L=function(){bf(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},xc.K=function(t){bf(this);var e=[];if("string"==typeof t)wf(this,t)&&(e=Gc(e,this.a.get(Cf(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Gc(e,t[n])}return e},xc.set=function(t,e){return bf(this),this.c=null,wf(this,t=Cf(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},xc.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},xc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Of=function(){return function(t,e){this.b=t,this.a=e}}();function Tf(t){this.g=t||Sf,t=kc.PerformanceNavigationTiming?0<(t=kc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(kc.ia&&kc.ia.ya&&kc.ia.ya()&&kc.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Sf=10;function If(t){return!!t.b||!!t.a&&t.a.size>=t.f}function xf(t){return t.b?1:t.a?t.a.size:0}function jf(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Af(t,e){t.a?t.a.add(e):t.b=e}function kf(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Pf(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ic(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Kc(t.c)}function Nf(){}function Rf(){this.a=new Nf}function Df(t,e,n){var r=n||"";try{Yh(t,function(t,n){var i=t;Rc(t)&&(i=Yl(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Tf.prototype.cancel=function(){var t,e;if(this.c=Pf(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ic(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Nf.prototype.stringify=function(t){return kc.JSON.stringify(t,void 0)},Nf.prototype.parse=function(t){return kc.JSON.parse(t,void 0)};var Ff=kc.JSON.parse;function Mf(t){Kl.call(this),this.headers=new Xh,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Uf,this.D=this.F=!1}Hc(Mf,Kl);var Uf="",Vf=/^https?$/i,qf=["POST","PUT"];function Hf(t){return"content-type"==t.toLowerCase()}function zf(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Bf(t),Gf(t)}function Bf(t){t.u||(t.u=!0,Ql(t,"complete"),Ql(t,"error"))}function Wf(t){if(t.b&&void 0!==Ac&&(!t.s[1]||4!=Qf(t)||2!=t.W()))if(t.l&&4==Qf(t))ch(t.za,0,t);else if(Ql(t,"readystatechange"),4==Qf(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(tf)[1]||null;if(!o&&kc.self&&kc.self.location){var s=kc.self.location.protocol;o=s.substr(0,s.length-1)}i=!Vf.test(o?o.toLowerCase():"")}e=i}if(e)Ql(t,"complete"),Ql(t,"success");else{t.h=6;try{var a=2<Qf(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Bf(t)}}finally{Gf(t)}}}function Gf(t,e){if(t.a){Kf(t);var n=t.a,r=t.s[0]?Pc:null;t.a=null,t.s=null,e||Ql(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Kf(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(kc.clearTimeout(t.m),t.m=null)}function Qf(t){return t.a?t.a.readyState:0}function $f(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return el(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):uf(t,e,n))}function Yf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xf(t){this.pa=0,this.g=[],this.c=new yh,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Yf("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Yf("baseRetryDelayMs",5e3,t),this.Ra=Yf("retryDelaySeedMs",1e4,t),this.Ma=Yf("forwardChannelMaxRetries",2,t),this.ma=Yf("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Tf(t&&t.concurrentRequestLimit),this.ka=new Rf,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Jf(t){if(td(t),3==t.v){var e=t.R++,n=nf(t.B);uf(n,"SID",t.J),uf(n,"RID",e),uf(n,"TYPE","terminate"),id(t,n),(e=new Lh(t,t.c,e,void 0)).H=2,e.i=cf(nf(n)),n=!1,kc.navigator&&kc.navigator.sendBeacon&&(n=kc.navigator.sendBeacon(e.i.toString(),"")),!n&&kc.Image&&((new Image).src=e.i,n=!0),n||(e.a=yd(e.g,null),e.a.ba(e.i)),e.u=qc(),Bh(e)}pd(t)}function Zf(t){t.a&&(ud(t),t.a.cancel(),t.a=null)}function td(t){Zf(t),t.j&&(kc.clearTimeout(t.j),t.j=null),ld(t),t.b.cancel(),t.h&&("number"==typeof t.h&&kc.clearTimeout(t.h),t.h=null)}function ed(t,e){t.g.push(new Of(t.Oa++,e)),3==t.v&&nd(t)}function nd(t){If(t.b)||t.h||(t.h=!0,rh(t.Ba,t),t.u=0)}function rd(t,e){var n;n=e?e.f:t.R++;var r=nf(t.B);uf(r,"SID",t.J),uf(r,"RID",n),uf(r,"AID",t.P),id(t,r),t.i&&t.l&&$f(r,t.i,t.l),n=new Lh(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=od(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Af(t.b,n),Vh(n,r,e)}function id(t,e){t.f&&Yh({},function(t,n){uf(e,n,t)})}function od(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Uc(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Df(l,s,"req"+c+"_")}catch(Qd){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function sd(t){t.a||t.j||(t.T=1,rh(t.Aa,t),t.o=0)}function ad(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Sh(Uc(t.Aa,t),fd(t,t.o)),t.o++,0))}function ud(t){null!=t.s&&(kc.clearTimeout(t.s),t.s=null)}function cd(t){t.a=new Lh(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=nf(t.la);uf(e,"RID","rpc"),uf(e,"SID",t.J),uf(e,"CI",t.H?"0":"1"),uf(e,"AID",t.P),id(t,e),uf(e,"TYPE","xmlhttp"),t.i&&t.l&&$f(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=cf(nf(e)),n.j=null,n.I=!0,qh(n,t)}function ld(t){null!=t.m&&(kc.clearTimeout(t.m),t.m=null)}function hd(t,e){var n=null;if(t.a==e){ld(t),ud(t),t.a=null;var r=2}else{if(!jf(t.b,e))return;n=e.s,kf(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=qc()-e.u;var i=t.u;Ql(r=_h(),new Th(r,n,e,i)),nd(t)}else sd(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(xf(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Sh(Uc(t.Ba,t,e),fd(t,t.u)),t.u++,0)))}(t,e)||2==r&&ad(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:dd(t,5);break;case 4:dd(t,10);break;case 3:dd(t,6);break;default:dd(t,2)}}function fd(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function dd(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Uc(t.Ya,t);n||(n=new ef("//www.google.com/images/cleardot.gif"),kc.location&&"http"==kc.location.protocol||rf(n,"https"),cf(n)),function(t,e){var n=new yh;if(kc.Image){var r=new Image;r.onload=Vc(Lf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vc(Lf,n,r,"TestLoadImage: error",!1,e),r.onabort=Vc(Lf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vc(Lf,n,r,"TestLoadImage: timeout",!1,e),kc.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Oh(2);t.v=0,t.f&&t.f.ra(e),pd(t),td(t)}function pd(t){t.v=0,t.I=-1,t.f&&(0==Pf(t.b).length&&0==t.g.length||(t.b.c.length=0,Kc(t.g),t.g.length=0),t.f.qa())}function gd(t,e,n){var r=function(t){return t instanceof ef?nf(t):new ef(t,void 0)}(n);if(""!=r.c)e&&of(r,e+"."+r.c),sf(r,r.h);else{var i=kc.location;r=function(t,e,n,r){var i=new ef(null,void 0);return t&&rf(i,t),e&&of(i,e),n&&sf(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&el(t.V,function(t,e){uf(r,e,t)}),n=t.na,(e=t.A)&&n&&uf(r,e,n),uf(r,"VER",t.ha),id(t,r),r}function yd(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mf(t.Na)).F=t.C,e}function vd(){}function md(){if(cl&&!(10<=Number(_l)))throw Error("Environmental error: no available transport.")}function bd(t,e){Kl.call(this),this.a=new Xf(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Qc(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qc(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ed(this)}function _d(t){Nh.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wd(){Rh.call(this),this.status=1}function Ed(t){this.a=t}(xc=Mf.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:kh),this.a.onreadystatechange=Uc(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void zf(this,o)}t=n||"";var i=new Xh(this.headers);r&&Yh(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Hf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=kc.FormData&&t instanceof kc.FormData,!(0<=Bc(qf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Kf(this),0<this.o&&((this.D=function(t){return cl&&bl(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Uc(this.xa,this)):this.m=ch(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){zf(this,o)}},xc.xa=function(){void 0!==Ac&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ql(this,"timeout"),this.abort(8))},xc.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ql(this,"complete"),Ql(this,"abort"),Gf(this))},xc.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gf(this,!0)),Mf.X.G.call(this)},xc.za=function(){this.j||(this.A||this.l||this.g?Wf(this):this.Ua())},xc.Ua=function(){Wf(this)},xc.W=function(){try{return 2<Qf(this)?this.a.status:-1}catch(al){return-1}},xc.$=function(){try{return this.a?this.a.responseText:""}catch(al){return""}},xc.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ff(e)}},xc.ua=function(){return this.h},xc.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(xc=Xf.prototype).ha=8,xc.v=1,xc.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Lh(this,this.c,t,void 0),r=this.l;if(this.O&&(r?il(r=nl(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=od(this,n,e),uf(i=nf(this.B),"RID",t),uf(i,"CVER",22),this.A&&uf(i,"X-HTTP-Session-Id",this.A),id(this,i),this.i&&r&&$f(i,this.i,r),Af(this.b,n),this.Ia&&uf(i,"TYPE","init"),this.da?(uf(i,"$req",e),uf(i,"SID","null"),n.U=!0,Vh(n,i,null)):Vh(n,i,e),this.v=2}}else 3==this.v&&(t?rd(this,t):0==this.g.length||If(this.b)||rd(this))},xc.Aa=function(){if(this.j=null,cd(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Sh(Uc(this.Ta,this),t)}},xc.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Oh(10),Zf(this),cd(this))},xc.Sa=function(){null!=this.m&&(this.m=null,Zf(this),ad(this),Oh(19))},xc.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Oh(2)):(this.c.info("Failed to ping google.com"),Oh(1))},(xc=vd.prototype).ta=function(){},xc.sa=function(){},xc.ra=function(){},xc.qa=function(){},xc.Ja=function(){},md.prototype.a=function(t,e){return new bd(t,e)},Hc(bd,Kl),bd.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Oh(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=gd(t,null,t.fa),nd(t)},bd.prototype.close=function(){Jf(this.a)},bd.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,ed(this.a,e)}else this.l?((e={}).__data__=Yl(t),ed(this.a,e)):ed(this.a,t)},bd.prototype.G=function(){this.a.f=null,delete this.f,Jf(this.a),delete this.a,bd.X.G.call(this)},Hc(_d,Nh),Hc(wd,Rh),Hc(Ed,vd),Ed.prototype.ta=function(){Ql(this.a,"a")},Ed.prototype.sa=function(t){Ql(this.a,new _d(t))},Ed.prototype.ra=function(t){Ql(this.a,new wd(t))},Ed.prototype.qa=function(){Ql(this.a,"b")},md.prototype.createWebChannel=md.prototype.a,bd.prototype.send=bd.prototype.h,bd.prototype.open=bd.prototype.g,bd.prototype.close=bd.prototype.close,Ih.NO_ERROR=0,Ih.TIMEOUT=8,Ih.HTTP_ERROR=6,xh.COMPLETE="complete",Ah.EventType=Ph,Ph.OPEN="a",Ph.CLOSE="b",Ph.ERROR="c",Ph.MESSAGE="d",Kl.prototype.listen=Kl.prototype.va,Mf.prototype.listenOnce=Mf.prototype.wa,Mf.prototype.getLastError=Mf.prototype.Qa,Mf.prototype.getLastErrorCode=Mf.prototype.ua,Mf.prototype.getStatus=Mf.prototype.W,Mf.prototype.getResponseJson=Mf.prototype.Pa,Mf.prototype.getResponseText=Mf.prototype.$,Mf.prototype.send=Mf.prototype.ba;var Cd=Ih,Od=xh,Td=mh,Sd=Ah,Id=Mf,xd=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},jd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ad=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ad.UNAUTHENTICATED=new Ad(null),Ad.l=new Ad("google-credentials-uid"),Ad._=new Ad("first-party-uid");var kd=new Tc.b("@firebase/firestore");function Pd(){return kd.logLevel}function Nd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kd.logLevel<=Tc.a.DEBUG){var r=e.map(Ld);kd.debug.apply(kd,Object(Jn.g)(["Firestore (8.1.1): "+t],r))}}function Rd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kd.logLevel<=Tc.a.ERROR){var r=e.map(Ld);kd.error.apply(kd,Object(Jn.g)(["Firestore (8.1.1): "+t],r))}}function Dd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kd.logLevel<=Tc.a.WARN){var r=e.map(Ld);kd.warn.apply(kd,Object(Jn.g)(["Firestore (8.1.1): "+t],r))}}function Ld(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Fd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw Rd(e),new Error(e)}function Md(t,e){t||Fd()}function Ud(t,e){return t}var Vd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Jn.c)(e,t),e}(Error),Hd=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},zd=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(Ad.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),Bd=function(){function t(t){var e=this;this.P=null,this.currentUser=Ad.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.V!==e?(Nd("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Md("string"==typeof n.accessToken),new Hd(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return Md(null===t||"string"==typeof t),new Ad(t)},t}(),Wd=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=Ad._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Gd=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new Wd(this.v,this.S))},t.prototype.A=function(t){t(Ad._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function Kd(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qd=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Kd(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function $d(t,e){return t<e?-1:t>e?1:0}function Yd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Xd(t){return t+"\0"}var Jd=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qd(Vd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qd(Vd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qd(Vd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qd(Vd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?$d(this.nanoseconds,t.nanoseconds):$d(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Zd=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new Jd(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),tp=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Fd(),void 0===n?n=t.length-e:n>t.length-e&&Fd(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new qd(Vd.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.X=function(){return new e([])},e}(tp),np=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return np.test(t)},e.prototype.J=function(){return this.H().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.Z(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new qd(Vd.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new qd(Vd.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qd(Vd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new qd(Vd.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(tp),ip=function(){function t(t){this.path=t}return t.st=function(e){return new t(ep.Y(e))},t.it=function(e){return new t(ep.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ep.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return ep.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new ep(e.slice()))},t}();function op(t){return null==t}function sp(t){return 0===t&&1/t==-1/0}function ap(t){return"number"==typeof t&&Number.isInteger(t)&&!sp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var up=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function cp(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new up(t,e,n,r,i,o,s)}function lp(t){var e=Ud(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.J()+t.op.toString()+og(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.J()+t.dir}(t)}).join(","),op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=av(e.startAt)),e.endAt&&(n+="|ub:",n+=av(e.endAt)),e.ut=n}return e.ut}function hp(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!fv(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!eg(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cv(t.startAt,e.startAt)&&cv(t.endAt,e.endAt)}function fp(t){return ip.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var dp=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return $d(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();dp.lt=new dp("");var pp,gp,yp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Zd.min()),void 0===o&&(o=Zd.min()),void 0===s&&(s=dp.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),vp=function(t){this.count=t};function mp(t){switch(t){case Vd.OK:return Fd();case Vd.CANCELLED:case Vd.UNKNOWN:case Vd.DEADLINE_EXCEEDED:case Vd.RESOURCE_EXHAUSTED:case Vd.INTERNAL:case Vd.UNAVAILABLE:case Vd.UNAUTHENTICATED:return!1;case Vd.INVALID_ARGUMENT:case Vd.NOT_FOUND:case Vd.ALREADY_EXISTS:case Vd.PERMISSION_DENIED:case Vd.FAILED_PRECONDITION:case Vd.ABORTED:case Vd.OUT_OF_RANGE:case Vd.UNIMPLEMENTED:case Vd.DATA_LOSS:return!0;default:return Fd()}}function bp(t){if(void 0===t)return Rd("GRPC error has no .code"),Vd.UNKNOWN;switch(t){case pp.OK:return Vd.OK;case pp.CANCELLED:return Vd.CANCELLED;case pp.UNKNOWN:return Vd.UNKNOWN;case pp.DEADLINE_EXCEEDED:return Vd.DEADLINE_EXCEEDED;case pp.RESOURCE_EXHAUSTED:return Vd.RESOURCE_EXHAUSTED;case pp.INTERNAL:return Vd.INTERNAL;case pp.UNAVAILABLE:return Vd.UNAVAILABLE;case pp.UNAUTHENTICATED:return Vd.UNAUTHENTICATED;case pp.INVALID_ARGUMENT:return Vd.INVALID_ARGUMENT;case pp.NOT_FOUND:return Vd.NOT_FOUND;case pp.ALREADY_EXISTS:return Vd.ALREADY_EXISTS;case pp.PERMISSION_DENIED:return Vd.PERMISSION_DENIED;case pp.FAILED_PRECONDITION:return Vd.FAILED_PRECONDITION;case pp.ABORTED:return Vd.ABORTED;case pp.OUT_OF_RANGE:return Vd.OUT_OF_RANGE;case pp.UNIMPLEMENTED:return Vd.UNIMPLEMENTED;case pp.DATA_LOSS:return Vd.DATA_LOSS;default:return Fd()}}(gp=pp||(pp={}))[gp.OK=0]="OK",gp[gp.CANCELLED=1]="CANCELLED",gp[gp.UNKNOWN=2]="UNKNOWN",gp[gp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gp[gp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gp[gp.NOT_FOUND=5]="NOT_FOUND",gp[gp.ALREADY_EXISTS=6]="ALREADY_EXISTS",gp[gp.PERMISSION_DENIED=7]="PERMISSION_DENIED",gp[gp.UNAUTHENTICATED=16]="UNAUTHENTICATED",gp[gp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gp[gp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gp[gp.ABORTED=10]="ABORTED",gp[gp.OUT_OF_RANGE=11]="OUT_OF_RANGE",gp[gp.UNIMPLEMENTED=12]="UNIMPLEMENTED",gp[gp.INTERNAL=13]="INTERNAL",gp[gp.UNAVAILABLE=14]="UNAVAILABLE",gp[gp.DATA_LOSS=15]="DATA_LOSS";var _p=function(){function t(t,e){this.$=t,this.root=e||Ep.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,Ep.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,Ep.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Pt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new wp(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new wp(this.root,t,this.$,!1)},t.prototype.vt=function(){return new wp(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new wp(this.root,t,this.$,!0)},t}(),wp=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),Ep=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw Fd();if(this.right.Mt())throw Fd();var t=this.left.Qt();if(t!==this.right.Qt())throw Fd();return t+(this.Mt()?0:1)},t}();Ep.EMPTY=null,Ep.RED=!0,Ep.It=!1,Ep.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Fd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Fd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new Ep(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var Cp=function(){function t(t){this.$=t,this.data=new _p(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt(function(e,n){return t(e),!1})},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new Op(this.data.yt())},t.prototype.Vt=function(t){return new Op(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),Op=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),Tp=new _p(ip.$);function Sp(){return Tp}function Ip(){return Sp()}var xp=new _p(ip.$);function jp(){return xp}var Ap=new _p(ip.$),kp=new Cp(ip.$);function Pp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=kp,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Np=new Cp($d);function Rp(){return Np}var Dp=function(){function t(t){this.$=t?function(e,n){return t(e,n)||ip.$(e.key,n.key)}:function(t,e){return ip.$(t.key,e.key)},this.Ht=jp(),this.Jt=new _p(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),Lp=function(){function t(){this.Xt=new _p(ip.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):Fd():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt(function(e,n){t.push(n)}),t},t}(),Fp=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Dp.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&Gy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Mp=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,Up.he(e,n)),new t(Zd.min(),r,Rp(),Sp(),Pp())},t}(),Up=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(dp.lt,n,Pp(),Pp(),Pp())},t}(),Vp=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},qp=function(t,e){this.targetId=t,this.Te=e},Hp=function(t,e,n,r){void 0===n&&(n=dp.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},zp=function(){function t(){this.Ie=0,this.me=Gp(),this.Ae=dp.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=Pp(),e=Pp(),n=Pp();return this.me.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Fd()}}),new Up(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=Gp()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),Bp=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=Sp(),this.Me=Wp(),this.ke=new Cp($d)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof Py?this.Le(r,t.Ee):t.Ee instanceof Ny&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:Fd()}})},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach(function(t,r){n.Ke(r)&&e(r)})},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(fp(i))if(0===n){var o=new ip(i.path);this.Be(e,o,new Ny(o,Zd.min()))}else Md(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach(function(r,i){var o=e.Ge(i);if(o){if(r.le&&fp(o.target)){var s=new ip(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new Ny(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}});var r=Pp();this.Me.forEach(function(t,n){var i=!0;n.Wt(function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Mp(t,n,this.ke,this.Oe,r);return this.Oe=Sp(),this.Me=Wp(),this.ke=new Cp($d),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new zp,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new Cp($d),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||Nd("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new zp),this.xe.Xe(t).forEach(function(n){e.Be(t,n,null)})},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Wp(){return new _p(ip.$)}function Gp(){return new _p(ip.$)}function Kp(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qp(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $p(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xp(t){var e=t.mapValue.fields.__previous_value__;return Yp(e)?Xp(e):e}function Jp(t){var e=ag(t.mapValue.fields.__local_write_time__.timestampValue);return new Jd(e.seconds,e.nanos)}var Zp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yp(t)?4:10:Fd()}function eg(t,e){var n=tg(t);if(n!==tg(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jp(t).isEqual(Jp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ag(t.timestampValue),r=ag(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return cg(t.bytesValue).isEqual(cg(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ug(t.geoPointValue.latitude)===ug(e.geoPointValue.latitude)&&ug(t.geoPointValue.longitude)===ug(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ug(t.integerValue)===ug(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ug(t.doubleValue),r=ug(e.doubleValue);return n===r?sp(n)===sp(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Yd(t.arrayValue.values||[],e.arrayValue.values||[],eg);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Kp(n)!==Kp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!eg(n[i],r[i])))return!1;return!0}(t,e);default:return Fd()}}function ng(t,e){return void 0!==(t.values||[]).find(function(t){return eg(t,e)})}function rg(t,e){var n=tg(t),r=tg(e);if(n!==r)return $d(n,r);switch(n){case 0:return 0;case 1:return $d(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ug(t.integerValue||t.doubleValue),r=ug(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ig(t.timestampValue,e.timestampValue);case 4:return ig(Jp(t),Jp(e));case 5:return $d(t.stringValue,e.stringValue);case 6:return function(t,e){var n=cg(t),r=cg(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=$d(n[i],r[i]);if(0!==o)return o}return $d(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=$d(ug(t.latitude),ug(e.latitude));return 0!==n?n:$d(ug(t.longitude),ug(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=rg(n[i],r[i]);if(o)return o}return $d(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=$d(r[s],o[s]);if(0!==a)return a;var u=rg(n[r[s]],i[o[s]]);if(0!==u)return u}return $d(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Fd()}}function ig(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $d(t,e);var n=ag(t),r=ag(e),i=$d(n.seconds,r.seconds);return 0!==i?i:$d(n.nanos,r.nanos)}function og(t){return sg(t)}function sg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ag(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?cg(t.bytesValue).toBase64():"referenceValue"in t?ip.it(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=sg(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+sg(t.fields[o])}return e+"}"}(t.mapValue):Fd();var e}function ag(t){if(Md(!!t),"string"==typeof t){var e=0,n=Zp.exec(t);if(Md(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ug(t.seconds),nanos:ug(t.nanos)}}function ug(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function cg(t){return"string"==typeof t?dp.fromBase64String(t):dp.fromUint8Array(t)}function lg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function hg(t){return!!t&&"integerValue"in t}function fg(t){return!!t&&"arrayValue"in t}function dg(t){return!!t&&"nullValue"in t}function pg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gg(t){return!!t&&"mapValue"in t}var yg={asc:"ASCENDING",desc:"DESCENDING"},vg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mg=function(t,e){this.t=t,this.tn=e};function bg(t){return{integerValue:""+t}}function _g(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function wg(t,e){return ap(e)?bg(e):_g(t,e)}function Eg(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cg(t,e){return t.tn?e.toBase64():e.toUint8Array()}function Og(t,e){return Eg(t,e.M())}function Tg(t){return Md(!!t),Zd.N(function(t){var e=ag(t);return new Jd(e.seconds,e.nanos)}(t))}function Sg(t,e){return function(t){return new ep(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function Ig(t){var e=ep.Y(t);return Md(Yg(e)),e}function xg(t,e){return Sg(t.t,e.path)}function jg(t,e){var n=Ig(e);if(n.get(1)!==t.t.projectId)throw new qd(Vd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new qd(Vd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new ip(Ng(n))}function Ag(t,e){return Sg(t.t,e)}function kg(t){var e=Ig(t);return 4===e.length?ep.X():Ng(e)}function Pg(t){return new ep(["projects",t.t.projectId,"databases",t.t.database]).J()}function Ng(t){return Md(t.length>4&&"documents"===t.get(4)),t.B(5)}function Rg(t,e,n){return{name:xg(t,e),fields:n.proto.mapValue.fields}}function Dg(t,e){var n;if(e instanceof _y)n={update:Rg(t,e.key,e.value)};else if(e instanceof Sy)n={delete:xg(t,e.key)};else if(e instanceof wy)n={update:Rg(t,e.key,e.data),updateMask:$g(e.en)};else if(e instanceof Cy)n={transform:{document:xg(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof ey)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof ny)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof iy)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof sy)return{fieldPath:e.field.J(),increment:n.nn};throw Fd()}(0,t)})}};else{if(!(e instanceof Iy))return Fd();n={verify:xg(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Og(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Fd()}(t,e.rn)),n}function Lg(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?fy.updateTime(Tg(t.updateTime)):void 0!==t.exists?fy.exists(t.exists):fy.on()}(e.currentDocument):fy.on();if(e.update){var r=jg(t,e.update.name),i=new xy({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new cy((t.fieldPaths||[]).map(function(t){return rp.nt(t)}))}(e.updateMask);return new wy(r,i,o,n)}return new _y(r,i,n)}if(e.delete){var s=jg(t,e.delete);return new Sy(s,n)}if(e.transform){var a=jg(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Md("REQUEST_TIME"===e.setToServerValue),n=new ey):"appendMissingElements"in e?n=new ny(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new iy(e.removeAllFromArray.values||[]):"increment"in e?n=new sy(t,e.increment):Fd();var r=rp.nt(e.fieldPath);return new ly(r,n)}(t,e)});return Md(!0===n.exists),new Cy(a,u)}if(e.verify){var c=jg(t,e.verify);return new Iy(c,n)}return Fd()}function Fg(t,e){return{documents:[Ag(t,e.path)]}}function Mg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ag(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ag(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(pg(t.value))return{unaryFilter:{field:Wg(t.field),op:"IS_NAN"}};if(dg(t.value))return{unaryFilter:{field:Wg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(pg(t.value))return{unaryFilter:{field:Wg(t.field),op:"IS_NOT_NAN"}};if(dg(t.value))return{unaryFilter:{field:Wg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wg(t.field),op:Bg(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Wg(t.field),direction:zg(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||op(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=qg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qg(e.endAt)),n}function Ug(t){var e=kg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Md(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Vg(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new lv(Gg(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return op(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Hg(n.startAt));var l=null;return n.endAt&&(l=Hg(n.endAt)),Ly(e,i,a,s,u,"F",c,l)}function Vg(t){return t?void 0!==t.unaryFilter?[Qg(t)]:void 0!==t.fieldFilter?[Kg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Vg(t)}).reduce(function(t,e){return t.concat(e)}):Fd():[]}function qg(t){return{before:t.before,values:t.position}}function Hg(t){return new sv(t.values||[],!!t.before)}function zg(t){return yg[t]}function Bg(t){return vg[t]}function Wg(t){return{fieldPath:t.J()}}function Gg(t){return rp.nt(t.fieldPath)}function Kg(t){return Xy.create(Gg(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Fd()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Gg(t.unaryFilter.field);return Xy.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Gg(t.unaryFilter.field);return Xy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Gg(t.unaryFilter.field);return Xy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Gg(t.unaryFilter.field);return Xy.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Fd()}}function $g(t){var e=[];return t.fields.forEach(function(t){return e.push(t.J())}),{fieldPaths:e}}function Yg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Xg=function(){this.cn=void 0};function Jg(t,e,n){return t instanceof ey?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ny?ry(t,e):t instanceof iy?oy(t,e):function(t,e){var n=ty(t,e),r=ay(n)+ay(t.nn);return hg(n)&&hg(t.nn)?bg(r):_g(t.serializer,r)}(t,e)}function Zg(t,e,n){return t instanceof ny?ry(t,e):t instanceof iy?oy(t,e):n}function ty(t,e){return t instanceof sy?hg(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e}(Xg),ny=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Jn.c)(e,t),e}(Xg);function ry(t,e){for(var n=uy(e),r=function(t){n.some(function(e){return eg(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var iy=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Jn.c)(e,t),e}(Xg);function oy(t,e){for(var n=uy(e),r=function(t){n=n.filter(function(e){return!eg(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var sy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(Jn.c)(e,t),e}(Xg);function ay(t){return ug(t.integerValue||t.doubleValue)}function uy(t){return fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var cy=function(){function t(t){this.fields=t,t.sort(rp.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return Yd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ly=function(t,e){this.field=t,this.transform=e},hy=function(t,e){this.version=t,this.transformResults=e},fy=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dy(t,e){return void 0!==t.updateTime?e instanceof Py&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Py}var py=function(){};function gy(t,e,n){return t instanceof _y?function(t,e,n){return new Py(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof wy?function(t,e,n){if(!dy(t.rn,e))return new Ry(t.key,n.version);var r=Ey(t,e);return new Py(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Cy?function(t,e,n){if(Md(null!=n.transformResults),!dy(t.rn,e))return new Ry(t.key,n.version);var r=Oy(0,e),i=function(t,e,n){var r=[];Md(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Py&&(a=e.field(o.field)),r.push(Zg(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Ty(t,r.data(),i);return new Py(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ny(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function yy(t,e,n,r){return t instanceof _y?function(t,e){if(!dy(t.rn,e))return e;var n=by(e);return new Py(t.key,n,t.value,{an:!0})}(t,e):t instanceof wy?function(t,e){if(!dy(t.rn,e))return e;var n=by(e),r=Ey(t,e);return new Py(t.key,n,r,{an:!0})}(t,e):t instanceof Cy?function(t,e,n,r){if(!dy(t.rn,e))return e;var i=Oy(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Py&&(c=n.field(a.field)),null===c&&r instanceof Py&&(c=r.field(a.field)),i.push(Jg(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Ty(t,i.data(),o);return new Py(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return dy(t.rn,e)?new Ny(t.key,Zd.min()):e}(t,e)}function vy(t,e){return t instanceof Cy?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Py?e.field(o.field):void 0,a=ty(o.transform,s||null);null!=a&&(n=null==n?(new jy).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function my(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||Yd(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ny&&e instanceof ny||t instanceof iy&&e instanceof iy?Yd(t.elements,e.elements,eg):t instanceof sy&&e instanceof sy?eg(t.nn,e.nn):t instanceof ey&&e instanceof ey}(t.transform,e.transform)}(t,e)}))}function by(t){return t instanceof Py?t.version:Zd.min()}var _y=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(Jn.c)(e,t),e}(py),wy=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(Jn.c)(e,t),e}(py);function Ey(t,e){return function(t,e){var n=new jy(e);return t.en.fields.forEach(function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.hn()}(t,e instanceof Py?e.data():xy.empty())}var Cy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=fy.exists(!0),r}return Object(Jn.c)(e,t),e}(py);function Oy(t,e){return e}function Ty(t,e,n){for(var r=new jy(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var Sy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(Jn.c)(e,t),e}(py),Iy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(Jn.c)(e,t),e}(py),xy=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!gg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return eg(this.proto,t.proto)},t}(),jy=function(){function t(t){void 0===t&&(t=xy.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===tg(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(rp.X(),this._n);return null!=t?new xy(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=gg(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Ay(t){var e=[];return Qp(t.fields||{},function(t,n){var r=new rp([t]);if(gg(n)){var i=Ay(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new cy(e)}var ky=function(t,e){this.key=t,this.version=e},Py=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Jn.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ky),Ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Jn.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ky),Ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ky),Dy=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function Ly(t,e,n,r,i,o,s,a){return new Dy(t,e,n,r,i,o,s,a)}function Fy(t){return new Dy(t)}function My(t){return!op(t.limit)&&"F"===t.limitType}function Uy(t){return!op(t.limit)&&"L"===t.limitType}function Vy(t){return t.Tn.length>0?t.Tn[0].field:null}function qy(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function Hy(t){return null!==t.collectionGroup}function zy(t){var e=Ud(t);if(null===e.In){e.In=[];var n=qy(e),r=Vy(e);if(null!==n&&null===r)n.tt()||e.In.push(new lv(n)),e.In.push(new lv(rp.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new lv(rp.et(),u))}}}return e.In}function By(t){var e=Ud(t);if(!e.mn)if("F"===e.limitType)e.mn=cp(e.path,e.collectionGroup,zy(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=zy(e);r<i.length;r++){var o=i[r];n.push(new lv(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new sv(e.endAt.position,!e.endAt.before):null,a=e.startAt?new sv(e.startAt.position,!e.startAt.before):null;e.mn=cp(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function Wy(t,e,n){return new Dy(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gy(t,e){return hp(By(t),By(e))&&t.limitType===e.limitType}function Ky(t){return lp(By(t))+"|lt:"+t.limitType}function Qy(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.J()+" "+e.op+" "+og(e.value);var e}).join(", ")+"]"),op(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+av(t.startAt)),t.endAt&&(e+=", endAt: "+av(t.endAt)),"Target("+e+")"}(By(t))+"; limitType="+t.limitType+")"}function $y(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):ip.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!uv(t.startAt,zy(t),e)||t.endAt&&uv(t.endAt,zy(t),e))}(t,e)}function Yy(t){return function(e,n){for(var r=!1,i=0,o=zy(t);i<o.length;i++){var s=o[i],a=hv(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var Xy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Jn.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new Jy(t,n,r):"array-contains"===n?new nv(t,r):"in"===n?new rv(t,r):"not-in"===n?new iv(t,r):"array-contains-any"===n?new ov(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new Zy(t,n):new tv(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(rg(e,this.value)):null!==e&&tg(this.value)===tg(e)&&this.Pn(rg(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Fd()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Jy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ip.it(r.referenceValue),i}return Object(Jn.c)(e,t),e.prototype.matches=function(t){var e=ip.$(t.key,this.key);return this.Pn(e)},e}(Xy),Zy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ev(0,n),r}return Object(Jn.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xy),tv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ev(0,n),r}return Object(Jn.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xy);function ev(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ip.it(t.referenceValue)})}var nv=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Jn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return fg(e)&&ng(e.arrayValue,this.value)},e}(Xy),rv=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Jn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ng(this.value.arrayValue,e)},e}(Xy),iv=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Jn.c)(e,t),e.prototype.matches=function(t){if(ng(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ng(this.value.arrayValue,e)},e}(Xy),ov=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Jn.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return ng(e.value.arrayValue,t)})},e}(Xy),sv=function(t,e){this.position=t,this.before=e};function av(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return og(t)}).join(",")}function uv(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?ip.$(ip.it(s.referenceValue),n.key):rg(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function cv(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!eg(t.position[n],e.position[n]))return!1;return!0}var lv=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function hv(t,e,n){var r=t.field.tt()?ip.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?rg(r,i):Fd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fd()}}function fv(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dv=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=gy(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=yy(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=yy(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Pp())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Yd(this.mutations,t.mutations,function(t,e){return my(t,e)})&&Yd(this.baseMutations,t.baseMutations,function(t,e){return my(t,e)})},t}(),pv=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){Md(e.mutations.length===r.length);for(var i=Ap,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),gv=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qp(this.Nn,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.W=function(){return $p(this.Nn)},t}(),yv=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&Fd(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t(function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}})},t.prototype.Ln=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn(function(){return e(n)}):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.qn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.qn(r)},t}(),vv=function(){function t(){this.Qn=new gv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:Zd.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?yv.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),mv=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function bv(t){return new mg(t,!0)}function _v(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ev=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach(function(t){return t()})},t}(),Cv=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next(function(r){return n.hs(t,e,r)})},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t})},t.prototype.ls=function(t,e,n){var r=Ip();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)}),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next(function(e){return n.fs(t,e)})},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next(function(r){var i=n.ls(t,e,r),o=Sp();return i.forEach(function(t,e){e||(e=new Ny(t,Zd.min())),o=o.Tt(t,e)}),o})},t.prototype.ws=function(t,e,n){return function(t){return ip.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):Hy(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new ip(e)).next(function(t){var e=jp();return t instanceof Py&&(e=e.Tt(t.key,t)),e})},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=jp();return this.os.As(t,i).next(function(s){return yv.forEach(s,function(s){var a=function(t,e){return new Dy(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Tt(t,e)})})}).next(function(){return o})})},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next(function(n){return r=n,o.rs.Rs(t,e)}).next(function(e){return o.Ps(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=yy(u,l,l,o.gn);r=h instanceof Py?r.Tt(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){$y(e,n)||(r=r.remove(t))}),r})},t.prototype.Ps=function(t,e,n){for(var r=Pp(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof wy&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Py&&(c=c.Tt(t,e))}),c})},t}(),Ov=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=Pp(),i=Pp(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Tv=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();Tv.Ds=-1;var Sv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Nd("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),Iv=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(Zn.n)())&&Rd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Nd("SimpleDb","Removing database:",t),Nv(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(Zn.n)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n=this;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Nd("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new jv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new qd(Vd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new jv(t,n))},i.onupgradeneeded=function(t){Nd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Nd("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}})})},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Jn.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Jn.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Jn.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=h.sent(),e=kv.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),yv.reject(t)}).Ln(),u={},s.catch(function(){}),[4,e.ei];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Nd("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),xv=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return Nv(this.ni.delete())},t}(),jv=function(t){function e(e,n){var r=this;return(r=t.call(this,Vd.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Jn.c)(e,t),e}(qd);function Av(t){return"IndexedDbTransactionError"===t.name}var kv=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new mv,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new jv(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=Dv(e.target.error);n.ci.reject(new jv(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new jv(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(Nd("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Pv(e)},t}(),Pv=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Nd("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Nd("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Nv(n)},t.prototype.add=function(t){return Nd("SimpleDb","ADD",this.store.name,t,t),Nv(this.store.add(t))},t.prototype.get=function(t){var e=this;return Nv(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Nd("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Nd("SimpleDb","DELETE",this.store.name,t),Nv(this.store.delete(t))},t.prototype.count=function(){return Nd("SimpleDb","COUNT",this.store.name),Nv(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.hi=function(t,e){Nd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,function(t,e,n){return n.delete()})},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new yv(function(n,r){e.onerror=function(t){var e=Dv(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.ai=function(t,e){var n=[];return new yv(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new xv(i),s=e(i.primaryKey,i.value,o);if(s instanceof yv){var a=s.catch(function(t){return o.done(),yv.reject(t)});n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}}).next(function(){return yv.qn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Nv(t){return new yv(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Dv(t.target.error);n(e)}})}var Rv=!1;function Dv(t){var e=Iv.js(Object(Zn.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new qd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rv||(Rv=!0,setTimeout(function(){throw r},0)),r}}return t}function Lv(){return"undefined"!=typeof window?window:null}function Fv(){return"undefined"!=typeof document?document:null}var Mv=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new mv,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new qd(Vd.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri(function(){return null!==t.mi?(t.clearTimeout(),t.op().then(function(e){return t.Ti.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),Uv=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new Sv(this,"async_queue_retry"),this.Di=function(){var e=Fv();e&&Nd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=Fv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=Fv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},t.prototype.ki=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t,e=this;return Object(Jn.d)(this,function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!Av(t=n.sent()))throw t;return Nd("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs(function(){return e.ki()}),n.label=5;case 5:return[2]}})})},t.prototype.Fi=function(t){var e=this,n=this.Pi.then(function(){return e.vi=!0,t().catch(function(t){throw e.pi=t,e.vi=!1,Rd("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.vi=!1,t})});return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=Mv.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&Fd()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then(function(){e.Vi.sort(function(t,e){return t.wi-e.wi});for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()})},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function Vv(t,e){if(Rd("AsyncQueue",e+": "+t),Av(t))return new qd(Vd.UNAVAILABLE,e+": "+t);throw t}function qv(t,e){var n=t[1],r=e[1],i=$d(t[0],e[0]);return 0===i?$d(n,r):i}var Hv=function(){function t(t){this.Ki=t,this.buffer=new Cp(qv),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();qv(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),zv={zi:!1,Hi:0,Ji:0,Yi:0},Bv=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Bv.nr=10,Bv.sr=1e3,Bv.ir=new Bv(41943040,Bv.nr,Bv.sr),Bv.rr=new Bv(-1,0,0);var Wv=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;Nd("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,function(){return Object(Jn.b)(e,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return Av(e=n.sent())?(Nd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mb(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}})})})},t}(),Gv=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Tr=function(t,e){var n=this;if(0===e)return yv.resolve(Tv.Ds);var r=new Hv(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(Nd("LruGarbageCollector","Garbage collection skipped; disabled"),yv.resolve(zv)):this.Pr(t).next(function(r){return r<n.params.Xi?(Nd("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),zv):n.gr(t,e)})},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.wr(t,this.params.Zi).next(function(e){return e>c.params.tr?(Nd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.tr+" from "+e),r=c.params.tr):r=e,o=Date.now(),c.Tr(t,r)}).next(function(r){return n=r,s=Date.now(),c.mr(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.Ar(t,n)}).next(function(t){return u=Date.now(),Pd()<=Tc.a.DEBUG&&Nd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),yv.resolve({zi:!0,Hi:r,Ji:i,Yi:t})})},t}();function Kv(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=$v(e)),e=Qv(t.get(n),e);return $v(e)}function Qv(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function $v(t){return t+"\x01\x01"}function Yv(t){var e=t.length;if(Md(e>=2),2===e)return Md("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ep.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Fd(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Fd()}o=s+2}return new ep(r)}var Xv=function(t){this.yr=t};function Jv(t,e){if(e.document)return function(t,e,n){var r=jg(t,e.name),i=Tg(e.updateTime),o=new xy({mapValue:{fields:e.fields}});return new Py(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ip.ct(e.noDocument.path),r=rm(e.noDocument.readTime);return new Ny(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ip.ct(e.unknownDocument.path),o=rm(e.unknownDocument.version);return new Ry(i,o)}return Fd()}function Zv(t,e,n){var r=tm(n),i=e.key.path.q().H();if(e instanceof Py){var o=function(t,e){return{name:xg(t,e.key),fields:e.En().mapValue.fields,updateTime:Eg(t,e.version.M())}}(t.yr,e);return new Am(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof Ny){var s=e.key.path.H(),a=nm(e.version),u=e.hasCommittedMutations;return new Am(null,new xm(s,a),null,u,r,i)}if(e instanceof Ry){var c=e.key.path.H(),l=nm(e.version);return new Am(new jm(c,l),null,null,!0,r,i)}return Fd()}function tm(t){var e=t.M();return[e.seconds,e.nanoseconds]}function em(t){var e=new Jd(t[0],t[1]);return Zd.N(e)}function nm(t){var e=t.M();return new Cm(e.seconds,e.nanoseconds)}function rm(t){var e=new Jd(t.seconds,t.nanoseconds);return Zd.N(e)}function im(t,e){var n=(e.baseMutations||[]).map(function(e){return Lg(t.yr,e)}),r=e.mutations.map(function(e){return Lg(t.yr,e)}),i=Jd.fromMillis(e.localWriteTimeMs);return new dv(e.batchId,i,n,r)}function om(t){var e,n,r=rm(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?rm(t.lastLimboFreeSnapshotVersion):Zd.min();return void 0!==t.query.documents?(Md(1===(n=t.query).documents.length),e=By(Fy(kg(n.documents[0])))):e=function(t){return By(Ug(t))}(t.query),new yp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,dp.fromBase64String(t.resumeToken))}function sm(t,e){var n,r=nm(e.ft),i=nm(e.lastLimboFreeSnapshotVersion);n=fp(e.target)?Fg(t.yr,e.target):Mg(t.yr,e.target);var o=e.resumeToken.toBase64();return new Pm(e.targetId,lp(e.target),r,o,e.sequenceNumber,i,n)}function am(t){var e=Ug({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Wy(e,e.limit,"L"):e}var um=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return Md(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hm(t)._i({index:Sm.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Sr=function(t,e,n,r){var i=this,o=fm(t),s=hm(t);return s.add({}).next(function(a){Md("number"==typeof a);for(var u=new dv(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Dg(t.yr,e)}),i=n.mutations.map(function(e){return Dg(t.yr,e)});return new Sm(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Cp(function(t,e){return $d(t.J(),e.J())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Im.key(i.userId,p.key.path,a);h=h.add(p.key.path.q()),l.push(s.put(c)),l.push(o.put(g,Im.PLACEHOLDER))}return h.forEach(function(e){l.push(i.os.Dr(t,e))}),t.es(function(){i.pr[a]=u.keys()}),yv.qn(l).next(function(){return u})})},t.prototype.Cr=function(t,e){var n=this;return hm(t).get(e).next(function(t){return t?(Md(t.userId===n.userId),im(n.serializer,t)):null})},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?yv.resolve(this.pr[e]):this.Cr(t,e).next(function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null})},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hm(t)._i({index:Sm.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Md(e.batchId>=r),o=im(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hm(t)._i({index:Sm.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hm(t).ui(Sm.userMutationsIndex,n).next(function(t){return t.map(function(t){return im(e.serializer,t)})})},t.prototype.us=function(t,e){var n=this,r=Im.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fm(t)._i({range:i},function(r,i,s){var a=r[0],u=r[2],c=Yv(r[1]);if(a===n.userId&&e.path.isEqual(c))return hm(t).get(u).next(function(t){if(!t)throw Fd();Md(t.userId===n.userId),o.push(im(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.ds=function(t,e){var n=this,r=new Cp($d),i=[];return e.forEach(function(e){var o=Im.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=fm(t)._i({range:s},function(t,i,o){var s=t[0],a=t[2],u=Yv(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),yv.qn(i).next(function(){return n.kr(t,r)})},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=Im.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Cp($d);return fm(t)._i({range:s},function(t,e,o){var s=t[0],u=t[2],c=Yv(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.kr(t,a)})},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(hm(t).get(e).next(function(t){if(null===t)throw Fd();Md(t.userId===n.userId),r.push(im(n.serializer,t))}))}),yv.qn(i).next(function(){return r})},t.prototype.$r=function(t,e){var n=this;return lm(t.Lr,this.userId,e).next(function(r){return t.es(function(){n.Br(e.batchId)}),yv.forEach(r,function(e){return n.Vr.qr(t,e)})})},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next(function(n){if(!n)return yv.resolve();var r=IDBKeyRange.lowerBound(Im.prefixForUser(e.userId)),i=[];return fm(t)._i({range:r},function(t,n,r){if(t[0]===e.userId){var o=Yv(t[1]);i.push(o)}else r.done()}).next(function(){Md(0===i.length)})})},t.prototype.Qr=function(t,e){return cm(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return dm(t).get(this.userId).next(function(t){return t||new Tm(e.userId,-1,"")})},t}();function cm(t,e,n){var r=Im.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fm(t)._i({range:o,li:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function lm(t,e,n){var r=t.store(Sm.store),i=t.store(Im.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Md(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Im.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return yv.qn(o).next(function(){return c})}function hm(t){return Zm.Ys(t,Sm.store)}function fm(t){return Zm.Ys(t,Im.store)}function dm(t){return Zm.Ys(t,Tm.store)}var pm=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return vm(t).put(mm(e),n)},t.prototype.Hn=function(t,e){var n=vm(t),r=mm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Wr(t,r)})},t.prototype.Jn=function(t,e){var n=this;return vm(t).get(mm(e)).next(function(t){return n.jr(t)})},t.prototype.Gr=function(t,e){var n=this;return vm(t).get(mm(e)).next(function(t){var e=n.jr(t);return e?{zn:e,size:bm(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ip();return this.zr(t,e,function(t,e){var i=n.jr(e);r=r.Tt(t,i)}).next(function(){return r})},t.prototype.Hr=function(t,e){var n=this,r=Ip(),i=new _p(ip.$);return this.zr(t,e,function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,bm(e))):(r=r.Tt(t,null),i=i.Tt(t,0))}).next(function(){return{Jr:r,Yr:i}})},t.prototype.zr=function(t,e,n){if(e.W())return yv.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return vm(t)._i({range:r},function(t,e,r){for(var s=ip.ct(t);o&&ip.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null})},t.prototype.ws=function(t,e,n){var r=this,i=jp(),o=e.path.length+1,s={};if(n.isEqual(Zd.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=tm(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Am.collectionReadTimeIndex}return vm(t)._i(s,function(t,n,s){if(t.length===o){var a=Jv(r.serializer,n);e.path.j(a.key.path)?a instanceof Py&&$y(e,a)&&(i=i.Tt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Xr=function(t){return new gm(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ym(t).get(km.key).next(function(t){return Md(!!t),t})},t.prototype.Wr=function(t,e){return ym(t).put(km.key,e)},t.prototype.jr=function(t){if(t){var e=Jv(this.serializer,t);return e instanceof Ny&&e.version.isEqual(Zd.min())?null:e}return null},t}(),gm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new gv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Jn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new Cp(function(t,e){return $d(t.J(),e.J())});return this.Qn.forEach(function(o,s){var a=e.so.get(o);if(s.zn){var u=Zv(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=bm(u);r+=c-a,n.push(e.no.jn(t,o,u))}else if(r-=a,e.Zr){var l=Zv(e.no.serializer,new Ny(o,Zd.min()),e.Wn(o));n.push(e.no.jn(t,o,l))}else n.push(e.no.Hn(t,o))}),i.forEach(function(r){n.push(e.no.os.Dr(t,r))}),n.push(this.no.updateMetadata(t,r)),yv.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next(function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)})},e.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next(function(t){var e=t.Jr;return t.Yr.forEach(function(t,e){n.so.set(t,e)}),e})},e}(vv);function ym(t){return Zm.Ys(t,km.store)}function vm(t){return Zm.Ys(t,Am.store)}function mm(t){return t.path.H()}function bm(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fd();e=t.noDocument}return JSON.stringify(e).length}var _m=function(){function t(){this.io=new wm}return t.prototype.Dr=function(t,e){return this.io.add(e),yv.resolve()},t.prototype.As=function(t,e){return yv.resolve(this.io.getEntries(e))},t}(),wm=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new Cp(ep.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Cp(ep.$)).H()},t}(),Em=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Md(n<r&&n>=0&&r<=11);var o=new kv("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Om.store)}(t),function(t){t.createObjectStore(Tm.store,{keyPath:Tm.keyPath}),t.createObjectStore(Sm.store,{keyPath:Sm.keyPath,autoIncrement:!0}).createIndex(Sm.userMutationsIndex,Sm.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Im.store)}(t),Lm(t),function(t){t.createObjectStore(Am.store)}(t));var s=yv.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Nm.store),t.deleteObjectStore(Pm.store),t.deleteObjectStore(Rm.store)}(t),Lm(t)),s=s.next(function(){return function(t){var e=t.store(Rm.store),n=new Rm(0,0,Zd.min().M(),0);return e.put(Rm.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Sm.store).ui().next(function(n){t.deleteObjectStore(Sm.store),t.createObjectStore(Sm.store,{keyPath:Sm.keyPath,autoIncrement:!0}).createIndex(Sm.userMutationsIndex,Sm.userMutationsKeyPath,{unique:!0});var r=e.store(Sm.store),i=n.map(function(t){return r.put(t)});return yv.qn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Fm.store,{keyPath:Fm.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(km.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Am.store);e.createIndex(Am.readTimeIndex,Am.readTimeIndexPath,{unique:!1}),e.createIndex(Am.collectionReadTimeIndex,Am.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Mm.store,{keyPath:Mm.keyPath})}(t),function(t){t.createObjectStore(Um.store,{keyPath:Um.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Am.store)._i(function(t,n){e+=bm(n)}).next(function(){var n=new km(e);return t.store(km.store).put(km.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Tm.store),r=t.store(Sm.store);return n.ui().next(function(n){return yv.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(Sm.userMutationsIndex,i).next(function(r){return yv.forEach(r,function(r){Md(r.userId===n.userId);var i=im(e.serializer,r);return lm(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Nm.store),n=t.store(Am.store);return t.store(Rm.store).get(Rm.key).next(function(t){var r=[];return n._i(function(n,i){var o=new ep(n),s=function(t){return[0,Kv(t)]}(o);r.push(e.get(s).next(function(n){return n?yv.resolve():function(n){return e.put(new Nm(0,Kv(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return yv.qn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Dm.store,{keyPath:Dm.keyPath});var n=e.store(Dm.store),r=new wm,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:Kv(i)})}};return e.store(Am.store)._i({li:!0},function(t,e){var n=new ep(t);return i(n.q())}).next(function(){return e.store(Im.store)._i({li:!0},function(t,e){var n=Yv(t[1]);return i(n.q())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Pm.store);return n._i(function(t,r){var i=om(r),o=sm(e.serializer,i);return n.put(o)})},t}(),Cm=function(t,e){this.seconds=t,this.nanoseconds=e},Om=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Om.store="owner",Om.key="owner";var Tm=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Tm.store="mutationQueues",Tm.keyPath="userId";var Sm=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Sm.store="mutations",Sm.keyPath="batchId",Sm.userMutationsIndex="userMutationsIndex",Sm.userMutationsKeyPath=["userId","batchId"];var Im=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Kv(e)]},t.key=function(t,e,n){return[t,Kv(e),n]},t}();Im.store="documentMutations",Im.PLACEHOLDER=new Im;var xm=function(t,e){this.path=t,this.readTime=e},jm=function(t,e){this.path=t,this.version=e},Am=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Am.store="remoteDocuments",Am.readTimeIndex="readTimeIndex",Am.readTimeIndexPath="readTime",Am.collectionReadTimeIndex="collectionReadTimeIndex",Am.collectionReadTimeIndexPath=["parentPath","readTime"];var km=function(t){this.byteSize=t};km.store="remoteDocumentGlobal",km.key="remoteDocumentGlobalKey";var Pm=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Pm.store="targets",Pm.keyPath="targetId",Pm.queryTargetsIndexName="queryTargetsIndex",Pm.queryTargetsKeyPath=["canonicalId","targetId"];var Nm=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Nm.store="targetDocuments",Nm.keyPath=["targetId","path"],Nm.documentTargetsIndex="documentTargetsIndex",Nm.documentTargetsKeyPath=["path","targetId"];var Rm=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Rm.key="targetGlobalKey",Rm.store="targetGlobal";var Dm=function(t,e){this.collectionId=t,this.parent=e};function Lm(t){t.createObjectStore(Nm.store,{keyPath:Nm.keyPath}).createIndex(Nm.documentTargetsIndex,Nm.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Pm.store,{keyPath:Pm.keyPath}).createIndex(Pm.queryTargetsIndexName,Pm.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Rm.store)}Dm.store="collectionParents",Dm.keyPath=["collectionId","parent"];var Fm=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Fm.store="clientMetadata",Fm.keyPath="clientId";var Mm=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Mm.store="bundles",Mm.keyPath="bundleId";var Um=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Um.store="namedQueries",Um.keyPath="name";var Vm=Object(Jn.g)(Object(Jn.g)(Object(Jn.g)(Object(Jn.g)([Tm.store,Sm.store,Im.store,Am.store,Pm.store,Om.store,Rm.store,Nm.store],[Fm.store]),[km.store]),[Dm.store]),[Mm.store,Um.store]),qm=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return Hm(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:rm(e.createTime),version:e.version};var e})},t.prototype.oo=function(t,e){return Hm(t).put({bundleId:(n=e).id,createTime:nm(Tg(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return zm(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:am(e.bundledQuery),readTime:rm(e.readTime)};var e})},t.prototype.uo=function(t,e){return zm(t).put(function(t){return{name:t.name,readTime:nm(Tg(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Hm(t){return Zm.Ys(t,Mm.store)}function zm(t){return Zm.Ys(t,Um.store)}var Bm=function(){function t(){this.ao=new wm}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es(function(){n.ao.add(e)});var o={collectionId:r,parent:Kv(i)};return Wm(t).put(o)}return yv.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Xd(e),""],!1,!0);return Wm(t).ui(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Yv(o.parent))}return n})},t}();function Wm(t){return Zm.Ys(t,Dm.store)}var Gm=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),Km=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next(function(n){var r=new Gm(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next(function(){return n.highestTargetId})})},t.prototype.To=function(t){return this.wo(t).next(function(t){return Zd.N(new Jd(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Io=function(t){return this.wo(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)})},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next(function(){return n.wo(t).next(function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)})})},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next(function(){return Qm(t).delete(e.targetId)}).next(function(){return n.wo(t)}).next(function(e){return Md(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)})},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Qm(t)._i(function(s,a){var u=om(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Vo(t,u)))}).next(function(){return yv.qn(o)}).next(function(){return i})},t.prototype.Ue=function(t,e){return Qm(t)._i(function(t,n){var r=om(n);e(r)})},t.prototype.wo=function(t){return $m(t).get(Rm.key).next(function(t){return Md(null!==t),t})},t.prototype.Eo=function(t,e){return $m(t).put(Rm.key,e)},t.prototype.Ro=function(t,e){return Qm(t).put(sm(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next(function(t){return t.targetCount})},t.prototype.bo=function(t,e){var n=lp(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qm(t)._i({range:r,index:Pm.queryTargetsIndexName},function(t,n,r){var o=om(n);hp(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.So=function(t,e,n){var r=this,i=[],o=Ym(t);return e.forEach(function(e){var s=Kv(e.path);i.push(o.put(new Nm(n,s))),i.push(r.Vr.Do(t,n,e))}),yv.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=Ym(t);return yv.forEach(e,function(e){var o=Kv(e.path);return yv.qn([i.delete([n,o]),r.Vr.No(t,n,e)])})},t.prototype.po=function(t,e){var n=Ym(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ym(t),i=Pp();return r._i({range:n,li:!0},function(t,e,n){var r=Yv(t[1]),o=new ip(r);i=i.add(o)}).next(function(){return i})},t.prototype.Qr=function(t,e){var n=Kv(e.path),r=IDBKeyRange.bound([n],[Xd(n)],!1,!0),i=0;return Ym(t)._i({index:Nm.documentTargetsIndex,li:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ze=function(t,e){return Qm(t).get(e).next(function(t){return t?om(t):null})},t}();function Qm(t){return Zm.Ys(t,Pm.store)}function $m(t){return Zm.Ys(t,Rm.store)}function Ym(t){return Zm.Ys(t,Nm.store)}var Xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(Jn.c)(e,t),e}(Ev),Zm=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Oo=c,this.Mo=l,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new qd(Vd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new nb(this,i),this.Ko=n+"main",this.serializer=new Xv(u),this.Wo=new Iv(this.Ko,11,new Em(this.serializer)),this.jo=new Km(this.Vr,this.serializer),this.os=new Bm,this.ss=function(t,e){return new pm(t,e)}(this.serializer,this.os),this.Go=new qm(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===l&&Rd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof Jm)return Iv.Ys(t.Lr,e);throw Fd()},t.prototype.start=function(){var t=this;return this.Ho().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new qd(Vd.FAILED_PRECONDITION,Xm);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.jo.Io(e)})}).then(function(e){t.ko=new Tv(e,t.Oo)}).then(function(){t.$o=!0}).catch(function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)})},t.prototype.Zo=function(t){var e=this;return this.Qo=function(n){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){return this.lr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.tc=function(t){var e=this;this.Wo.ti(function(n){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.ec=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return eb(e).put(new Fm(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nc(e).next(function(e){e||(t.isPrimary=!1,t.Cs.Mi(function(){return t.Qo(!1)}))})}).next(function(){return t.sc(e)}).next(function(n){return t.isPrimary&&!n?t.ic(e).next(function(){return!1}):!!n&&t.rc(e).next(function(){return!0})})}).catch(function(e){if(Av(e))return Nd("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Nd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Cs.Mi(function(){return t.Qo(e)}),t.isPrimary=e})},t.prototype.nc=function(t){var e=this;return tb(t).get(Om.key).next(function(t){return yv.resolve(e.oc(t))})},t.prototype.cc=function(t){return eb(t).delete(this.clientId)},t.prototype.uc=function(){return Object(Jn.b)(this,void 0,void 0,function(){var e,n,r,i=this;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.Ys(e,Fm.store);return n.ui().next(function(t){var e=i.hc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return yv.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.zo)for(n=0,r=e;n<r.length;n++)this.zo.removeItem(this.lc(r[n].clientId));o.label=2;case 2:return[2]}})})},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.Ho().then(function(){return t.uc()}).then(function(){return t.Xo()})})},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?yv.resolve(!0):tb(t).get(Om.key).next(function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new qd(Vd.FAILED_PRECONDITION,Xm);return!1}}return!(!e.networkEnabled||!e.inForeground)||eb(t).ui().next(function(t){return void 0===e.hc(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Nd("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.fc=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t=this;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[Om.store,Fm.store],function(e){var n=new Jm(e,Tv.Ds);return t.ic(n).next(function(){return t.cc(n)})})];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}})})},t.prototype.hc=function(t,e){var n=this;return t.filter(function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)})},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return eb(e).ui().next(function(e){return t.hc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return um.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Nd("IndexedDbPersistence","Starting transaction:",t),this.Wo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Vm,function(o){return r=new Jm(o,i.ko?i.ko.next():Tv.Ds),"readwrite-primary"===e?i.nc(r).next(function(t){return!!t||i.sc(r)}).next(function(e){if(!e)throw Rd("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.Qo(!1)}),new qd(Vd.FAILED_PRECONDITION,wv);return n(r)}).next(function(t){return i.rc(r).next(function(){return t})}):i.yc(r).next(function(){return n(r)})}).then(function(t){return r.ns(),t})},t.prototype.yc=function(t){var e=this;return tb(t).get(Om.key).next(function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qd(Vd.FAILED_PRECONDITION,Xm)})},t.prototype.rc=function(t){var e=new Om(this.clientId,this.allowTabSynchronization,Date.now());return tb(t).put(Om.key,e)},t.Gs=function(){return Iv.Gs()},t.prototype.ic=function(t){var e=this,n=tb(t);return n.get(Om.key).next(function(t){return e.oc(t)?(Nd("IndexedDbPersistence","Releasing primary lease."),n.delete(Om.key)):yv.resolve()})},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Rd("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()})},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri(function(){return e.fc()})},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return Nd("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Rd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){Rd("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function tb(t){return Zm.Ys(t,Om.store)}function eb(t){return Zm.Ys(t,Fm.store)}var nb=function(){function t(t,e){this.db=t,this.cr=new Gv(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Vc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,function(t,n){return e(n)})},t.prototype.Do=function(t,e,n){return rb(t,n)},t.prototype.No=function(t,e,n){return rb(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return rb(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return dm(t).fi(function(r){return cm(t,r,e).next(function(t){return t&&(n=!0),yv.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,function(s,a){if(a<=e){var u=n.bc(t,s).next(function(e){if(!e)return o++,r.Jn(t,s).next(function(){return r.Hn(s),Ym(t).delete([0,Kv(s.path)])})});i.push(u)}}).next(function(){return yv.qn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return rb(t,e)},t.prototype.vc=function(t,e){var n,r=Ym(t),i=Tv.Ds;return r._i({index:Nm.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Tv.Ds&&e(new ip(Yv(n)),i),i=s,n=o):i=Tv.Ds}).next(function(){i!==Tv.Ds&&e(new ip(Yv(n)),i)})},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function rb(t,e){return Ym(t).put(function(t,e){return new Nm(0,Kv(t.path),e)}(e,t.Fo))}function ib(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ob=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new _p($d),this.Nc=new gv(function(t){return lp(t)},hp),this.xc=Zd.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new Cv(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Rr(n,e.Cc)})},t}();function sb(t,e,n,r){return new ob(t,e,n,r)}function ab(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:return n=Ud(t),r=n.rs,i=n.Oc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.rs.Mr(t).next(function(s){return o=s,r=n.persistence.mc(e),i=new Cv(n.Fc,r,n.persistence.Pc()),r.Mr(t)}).next(function(e){for(var n=[],r=[],s=Pp(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i._s(t,s).next(function(t){return{kc:t,$c:n,Lc:r}})})})];case 1:return o=s.sent(),[2,(n.rs=r,n.Oc=i,n.Dc.Mc(n.Oc),o)]}})})}function ub(t,e){var n=Ud(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=yv.resolve();return o.forEach(function(t){s=s.next(function(){return r.Jn(e,t)}).next(function(e){var o=e,s=n.Sn.get(t);Md(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)})}),s.next(function(){return t.rs.$r(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}function cb(t){var e=Ud(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.jo.To(t)})}function lb(t,e){var n=Ud(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.jo.Co(t,e.de,o).next(function(){return n.jo.So(t,e._e,o)}));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return Md(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.jo.yo(t,c))}}});var a=Sp();if(e.ce.forEach(function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))}),s.push(function(t,e,n,r,i){var o=Pp();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=Sp();return n.forEach(function(n,o){var s=t.get(n),a=r;o instanceof Ny&&o.version.isEqual(Zd.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):Nd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.ce,r).next(function(t){a=t})),!r.isEqual(Zd.min())){var u=n.jo.To(t).next(function(e){return n.jo.mo(t,t.Fo,r)});s.push(u)}return yv.qn(s).next(function(){return o.apply(t)}).next(function(){return n.Oc.fs(t,a)})}).then(function(t){return n.Cc=i,t})}function hb(t,e){var n=Ud(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)})}function fb(t,e){var n=Ud(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.jo.bo(t,e).next(function(i){return i?yv.resolve(r=i):n.jo.fo(t).next(function(i){return r=new yp(e,i,0,t.Fo),n.jo.Ao(t,r).next(function(){return r})})})}).then(function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t})}function db(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:r=Ud(t),i=r.Cc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Vr.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Av(s=a.sent()))throw s;return Nd("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Cc=r.Cc.remove(e),r.Nc.delete(i.target),[2]}})})}function pb(t,e,n){var r=Ud(t),i=Zd.min(),o=Pp();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ud(t),i=r.Nc.get(n);return void 0!==i?yv.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,By(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Dc.ws(t,e,n?i:Zd.min(),n?o:Pp())}).next(function(t){return{documents:t,Bc:o}})})}function gb(t,e){var n=Ud(t),r=Ud(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function yb(t){var e=Ud(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ud(t),i=Sp(),o=tm(n),s=vm(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:Am.readTimeIndex,range:a},function(t,e){var n=Jv(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{qc:i,readTime:em(o)}})}(e.Fc,t,e.xc)}).then(function(t){var n=t.qc;return e.xc=t.readTime,n})}function vb(t){return Object(Jn.b)(this,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){return[2,(e=Ud(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=vm(t),n=Zd.min();return e._i({index:Am.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=em(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.xc=t})]})})}function mb(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){if(t.code!==Vd.FAILED_PRECONDITION||t.message!==wv)throw t;return Nd("LocalStore","Unexpectedly lost primary lease"),[2]})})}var bb=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new Sv(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,function(){return t.Xc()}))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(t){return this.zc()?[2,this.close(0)]:[2]})})},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(n){switch(n.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():e&&e.code===Vd.RESOURCE_EXHAUSTED?(Rd(e.toString()),Rd("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===Vd.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(e)];case 1:return n.sent(),[2]}})})},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then(function(e){t.Wc===n&&t.iu(e)},function(n){e(function(){var e=new qd(Vd.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)})})},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu(function(){n(function(){return e.state=2,e.listener.cu()})}),this.stream.nu(function(t){n(function(){return e.ru(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs(function(){return Object(Jn.b)(t,void 0,void 0,function(){return Object(Jn.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.ru=function(t){return Nd("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri(function(){return e.Wc===t?n():(Nd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),_b=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(Jn.c)(e,t),e.prototype.ou=function(t){return this.Qc.uu("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Fd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(Md(void 0===e||"string"==typeof e),dp.fromBase64String(e||"")):(Md(void 0===e||e instanceof Uint8Array),dp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Vd.UNKNOWN:bp(t.code);return new qd(e,t.message||"")}(s);n=new Hp(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=jg(t,u.document.name),l=Tg(u.document.updateTime),h=new xy({mapValue:{fields:u.document.fields}}),f=new Py(c,l,h,{});n=new Vp(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var d=e.documentDelete,p=jg(t,d.document),g=d.readTime?Tg(d.readTime):Zd.min(),y=new Ny(p,g);n=new Vp([],d.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var v=e.documentRemove,m=jg(t,v.document);n=new Vp([],v.removedTargetIds||[],m,null)}else{if(!("filter"in e))return Fd();var b=e.filter,_=new vp(b.count||0);n=new qp(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Zd.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Zd.min():e.readTime?Tg(e.readTime):Zd.min()}(t);return this.listener.au(e,n)},e.prototype.hu=function(t){var e={};e.database=Pg(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=fp(r)?{documents:Fg(t,r)}:{query:Mg(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=Cg(t,e.resumeToken):e.ft.F(Zd.min())>0&&(n.readTime=Eg(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fd()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Zc(e)},e.prototype.lu=function(t){var e={};e.database=Pg(this.serializer),e.removeTarget=t,this.Zc(e)},e}(bb),wb=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.eu=function(){this._u&&this.du([])},e.prototype.ou=function(t){return this.Qc.uu("Write",t)},e.prototype.onMessage=function(t){if(Md(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(Md(void 0!==e),t.map(function(t){return function(t,e){var n=Tg(t.updateTime?t.updateTime:e);n.isEqual(Zd.min())&&(n=Tg(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new hy(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Tg(t.commitTime);return this.listener.wu(n,e)}return Md(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},e.prototype.Tu=function(){var t={};t.database=Pg(this.serializer),this.Zc(t)},e.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Dg(e.serializer,t)})};this.Zc(n)},e}(bb),Eb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(Jn.c)(e,t),e.prototype.mu=function(){if(this.Iu)throw new qd(Vd.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Au(t,e,n,i)}).catch(function(t){throw t.code===Vd.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Ru(t,e,n,i)}).catch(function(t){throw t.code===Vd.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.terminate=function(){this.Iu=!1},e}(function(){}),Cb=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()}))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(Rd(e),this.Vu=!1):Nd("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),Ob=function(t,e,n,r,i){var o=this;this.Cu=t,this.Nu=e,this.di=n,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=i,this.$u.Lu(function(t){n.Ri(function(){return Object(Jn.b)(o,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return Nb(this)?(Nd("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){switch(n.label){case 0:return(e=Ud(t)).Mu.add(4),[4,Sb(e)];case 1:return n.sent(),e.Bu.set("Unknown"),e.Mu.delete(4),[4,Tb(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Bu=new Cb(n,r)};function Tb(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:if(!Nb(t))return[3,4];e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Sb(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ib(t,e){var n=Ud(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),Pb(n)?kb(n):Qb(n).zc()&&jb(n,e))}function xb(t,e){var n=Ud(t),r=Qb(n);n.Ou.delete(e),r.zc()&&Ab(n,e),0===n.Ou.size&&(r.zc()?r.Yc():Nb(n)&&n.Bu.set("Unknown"))}function jb(t,e){t.qu.De(e.targetId),Qb(t).hu(e)}function Ab(t,e){t.qu.De(e),Qb(t).lu(e)}function kb(t){t.qu=new Bp({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),Qb(t).start(),t.Bu.pu()}function Pb(t){return Nb(t)&&!Qb(t).Gc()&&t.Ou.size>0}function Nb(t){return 0===Ud(t).Mu.size}function Rb(t){t.qu=void 0}function Db(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){return t.Ou.forEach(function(e,n){jb(t,e)}),[2]})})}function Lb(t,e){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(n){return Rb(t),Pb(t)?(t.Bu.Su(e),kb(t)):t.Bu.set("Unknown"),[2]})})}function Fb(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:if(t.Bu.set("Online"),!(e instanceof Hp&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ou.has(o=i[r])?[4,t.xu.Uu(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ou.delete(o),t.qu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Nd("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Mb(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Vp?t.qu.$e(e):e instanceof qp?t.qu.je(e):t.qu.qe(e),n.isEqual(Zd.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,cb(t.Cu)];case 8:return i=s.sent(),n.F(i)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach(function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}}),n.oe.forEach(function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt(dp.lt,n.ft)),Ab(t,e);var r=new yp(n.target,e,1,n.sequenceNumber);jb(t,r)}}),t.xu.Qu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Nd("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Mb(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Mb(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r=this;return Object(Jn.d)(this,function(i){switch(i.label){case 0:if(!Av(e))throw e;return t.Mu.add(1),[4,Sb(t)];case 1:return i.sent(),t.Bu.set("Offline"),n||(n=function(){return cb(t.Cu)}),t.di.Mi(function(){return Object(Jn.b)(r,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return Nd("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Mu.delete(1),[4,Tb(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ub(t,e){return e().catch(function(n){return Mb(t,n,e)})}function Vb(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:e=Ud(t),n=$b(e),r=e.Fu.length>0?e.Fu[e.Fu.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Nb(t)&&t.Fu.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,hb(e.Cu,r)];case 3:return null===(i=s.sent())?(0===e.Fu.length&&n.Yc(),[3,7]):(r=i.batchId,function(t,e){t.Fu.push(e);var n=$b(t);n.zc()&&n.fu&&n.du(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Mb(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return qb(e)&&Hb(e),[2]}})})}function qb(t){return Nb(t)&&!$b(t).Gc()&&t.Fu.length>0}function Hb(t){$b(t).start()}function zb(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){return $b(t).Tu(),[2]})})}function Bb(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n,r;return Object(Jn.d)(this,function(i){for(e=$b(t),n=0,r=t.Fu;n<r.length;n++)e.du(r[n].mutations);return[2]})})}function Wb(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return r=t.Fu.shift(),i=pv.from(r,e,n),[4,Ub(t,function(){return t.xu.Ku(i)})];case 1:return o.sent(),[4,Vb(t)];case 2:return o.sent(),[2]}})})}function Gb(t,e){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(n){switch(n.label){case 0:return e&&$b(t).fu?[4,function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return mp(r=e.code)&&r!==Vd.ABORTED?(n=t.Fu.shift(),$b(t).Jc(),[4,Ub(t,function(){return t.xu.Wu(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Vb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return qb(t)&&Hb(t),[2]}})})}function Kb(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return n=Ud(t),e?(n.Mu.delete(2),[4,Tb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Mu.add(2),[4,Sb(n)]);case 3:r.sent(),n.Bu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Qb(t){var e=this;return t.ju||(t.ju=function(t,e,n){var r=Ud(t);return r.mu(),new _b(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:Db.bind(null,t),nu:Lb.bind(null,t),au:Fb.bind(null,t)}),t.ku.push(function(n){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return n?(t.ju.Jc(),Pb(t)?kb(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),Rb(t),e.label=3;case 3:return[2]}})})})),t.ju}function $b(t){var e=this;return t.Gu||(t.Gu=function(t,e,n){var r=Ud(t);return r.mu(),new wb(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:zb.bind(null,t),nu:Gb.bind(null,t),Eu:Bb.bind(null,t),wu:Wb.bind(null,t)}),t.ku.push(function(n){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return n?(t.Gu.Jc(),[4,Vb(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(Nd("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}})})})),t.Gu}var Yb=function(){this.zu=void 0,this.listeners=[]},Xb=function(){this.queries=new gv(function(t){return Ky(t)},Gy),this.onlineState="Unknown",this.Hu=new Set};function Jb(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Jn.d)(this,function(c){switch(c.label){case 0:if(n=Ud(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Yb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Ju(r)];case 2:return s.zu=c.sent(),[3,4];case 3:return a=c.sent(),u=Vv(a,"Initialization of query '"+Qy(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Yu(n.onlineState),o.zu&&e.Xu(o.zu)&&n_(n),[2]}})})}function Zb(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jn.d)(this,function(a){return n=Ud(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Zu(r))]:[2]})})}function t_(t,e){for(var n=Ud(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Xu(s)&&(r=!0);a.zu=s}}r&&n_(n)}function e_(t,e,n){var r=Ud(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function n_(t){t.Hu.forEach(function(t){t.next()})}var r_=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Fp(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){return!t.fromCache||!(this.options.oa&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){return t.docChanges.length>0||!!(t.ne||this.na&&this.na.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=Fp.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),i_=function(){function t(){this.ca=new Cp(o_.ua),this.aa=new Cp(o_.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new o_(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach(function(t){return n.Do(t,e)})},t.prototype.No=function(t,e){this._a(new o_(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach(function(t){return n.No(t,e)})},t.prototype.da=function(t){var e=this,n=new ip(new ep([])),r=new o_(n,t),i=new o_(n,t+1),o=[];return this.aa.Kt([r,i],function(t){e._a(t),o.push(t.key)}),o},t.prototype.wa=function(){var t=this;this.ca.forEach(function(e){return t._a(e)})},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new ip(new ep([])),n=new o_(e,t),r=new o_(e,t+1),i=Pp();return this.aa.Kt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Qr=function(t){var e=new o_(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),o_=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return ip.$(t.key,e.key)||$d(t.Ta,e.Ta)},t.ha=function(t,e){return $d(t.Ta,e.Ta)||ip.$(t.key,e.key)},t}();function s_(t,e){return"firestore_clients_"+t+"_"+e}function a_(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function u_(t,e){return"firestore_targets_"+t+"_"+e}var c_=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new qd(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Rd("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),l_=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new qd(r.error.code,r.error.message)),i?new t(e,r.state,o):(Rd("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),h_=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Rp(),s=0;i&&s<r.activeTargetIds.length;++s)i=ap(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Rd("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),f_=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Rd("SharedClientState","Failed to parse online state: "+e),null)},t}(),d_=function(){function t(){this.activeTargetIds=Rp()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),p_=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new _p($d),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=s_(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new d_),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Jn.d)(this,function(h){switch(h.label){case 0:return[4,this.ga.Ic()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pa&&(i=this.getItem(s_(this.persistenceKey,r)))&&(o=h_.Ia(r,i))&&(this.pa=this.pa.Tt(o.clientId,o));for(this.Oa(),(s=this.storage.getItem(this.xa))&&(a=this.Ma(s))&&this.ka(a),u=0,c=this.va;u<c.length;u++)this.Va(c[u]);return this.va=[],this.window.addEventListener("unload",function(){return l.fc()}),this.lr=!0,[2]}})})},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(u_(this.persistenceKey,t));if(n){var r=l_.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(u_(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach(function(t){r.Ka(t)}),this.currentUser=t,n.forEach(function(t){r.qa(t)})},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Nd("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Nd("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Nd("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Nd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ba)return void Rd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return Object(Jn.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Jn.d)(this,function(a){if(this.lr){if(null!==n.key)if(this.Da.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Ca.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.uh(r)]}else if(this.Na.test(n.key)){if(null!==n.newValue&&(i=this.ah(n.key,n.newValue)))return[2,this.hh(i)]}else if(n.key===this.xa){if(null!==n.newValue&&(o=this.Ma(n.newValue)))return[2,this.ka(o)]}else if(n.key===this.Sa)(s=function(t){var e=Tv.Ds;if(null!=t)try{var n=JSON.parse(t);Md("number"==typeof n),e=n}catch(t){Rd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Tv.Ds&&this.ps(s);else if(n.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new c_(this.currentUser,t,e,n),i=a_(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=a_(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xa,JSON.stringify({clientId:this.Pa,onlineState:t}))},t.prototype.Ya=function(t,e,n){var r=u_(this.persistenceKey,t),i=new l_(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return h_.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]);return c_.Ia(new Ad(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return l_.Ia(r,e)},t.prototype.Ma=function(t){return f_.Ia(t)},t.prototype.uh=function(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(Nd("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.ga.dh(s,a).then(function(){n.pa=r})},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=Rp();return t.forEach(function(t,n){e=e.Gt(n.activeTargetIds)}),e},t}(),g_=function(){function t(){this.wh=new d_,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new d_,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),y_=function(t){this.key=t},v_=function(t){this.key=t},m_=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=Pp(),this.ee=Pp(),this.Ah=Yy(t),this.Rh=new Dp(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new Lp,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,a=!1,u=My(this.query)&&i.size===this.query.limit?i.last():null,c=Uy(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt(function(t,e){var l=i.get(t),h=e instanceof Py?e:null;h&&(h=$y(n.query,h)?h:null);var f=!!l&&n.ee.has(l.key),d=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Vh(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Ah(h,u)>0||c&&n.Ah(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),My(this.query)||Uy(this.query))for(;s.size>this.query.limit;){var l=My(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Rh:s,yh:r,ph:a,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fd()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)}),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.le?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new Fp(this.query,t.Rh,i,o,t.ee,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new Lp,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Th=e.Th.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Th=e.Th.delete(t)}),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=Pp(),this.Rh.forEach(function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))});var n=[];return e.forEach(function(e){t.mh.has(e)||n.push(new v_(e))}),this.mh.forEach(function(t){e.has(t)||n.push(new y_(t))}),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=Pp();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return Fp.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),b_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},__=function(t){this.key=t,this.Fh=!1},w_=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new gv(function(t){return Ky(t)},Gy),this.qh=new Map,this.Uh=[],this.Qh=new _p(ip.$),this.Kh=new Map,this.Wh=new i_,this.jh={},this.Gh=new Map,this.zh=Gm._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function E_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:return n=X_(t),(i=n.Bh.get(e))?(n.kh.Wa(i.targetId),r=i.view.xh(),[3,4]):[3,1];case 1:return[4,fb(n.Cu,By(e))];case 2:return o=a.sent(),s=n.kh.Wa(o.targetId),[4,C_(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Jh&&Ib(n.Oh,o),a.label=4;case 4:return[2,r]}})})}function C_(t,e,n,r){return Object(Jn.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Jn.d)(this,function(l){switch(l.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return Object(Jn.b)(this,void 0,void 0,function(){var i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:return(i=e.view.gh(n)).ph?[4,pb(t.Cu,e.query,!1).then(function(t){return e.view.gh(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.re.get(e.targetId),s=e.view.Zn(i,t.Jh,o),[2,(L_(t,e.targetId,s.Dh),s.snapshot)]}})})}(t,e,n,r)},[4,pb(t.Cu,e,!0)];case 1:return i=l.sent(),o=new m_(e,i.Bc),s=o.gh(i.documents),a=Up.he(n,r&&"Offline"!==t.onlineState),u=o.Zn(s,t.Jh,a),L_(t,n,u.Dh),c=new b_(e,n,o),[2,(t.Bh.set(e,c),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),u.snapshot)]}})})}function O_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return n=Ud(t),r=n.Bh.get(e),(i=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,i.filter(function(t){return!Gy(t,e)})),void n.Bh.delete(e))]:n.Jh?(n.kh.Ga(r.targetId),n.kh.Ba(r.targetId)?[3,2]:[4,db(n.Cu,r.targetId,!1).then(function(){n.kh.Ha(r.targetId),xb(n.Oh,r.targetId),R_(n,r.targetId)}).catch(mb)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return R_(n,r.targetId),[4,db(n.Cu,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function T_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:r=J_(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ud(t),i=Jd.now(),o=e.reduce(function(t,e){return t.add(e.key)},Pp());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Oc._s(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=vy(c,n.get(c.key));null!=l&&s.push(new wy(c.key,l,Ay(l.proto.mapValue),fy.exists(!0)))}return r.rs.Sr(t,i,s,e)})}).then(function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}})}(r.Cu,e)];case 2:return i=a.sent(),r.kh.qa(i.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new _p($d)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(r,i.batchId,n),[4,U_(r,i.Qn)];case 3:return a.sent(),[4,Vb(r.Oh)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Vv(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function S_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:n=Ud(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,lb(n.Cu,e)];case 2:return r=i.sent(),e.re.forEach(function(t,e){var r=n.Kh.get(e);r&&(Md(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.Fh=!0:t.fe.size>0?Md(r.Fh):t.de.size>0&&(Md(r.Fh),r.Fh=!1))}),[4,U_(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mb(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function I_(t,e,n){var r=Ud(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach(function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ud(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)}),r&&n_(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function x_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Jn.d)(this,function(c){switch(c.label){case 0:return(r=Ud(t)).kh.Ja(e,"rejected",n),i=r.Kh.get(e),(o=i&&i.key)?(s=(s=new _p(ip.$)).Tt(o,new Ny(o,Zd.min())),a=Pp().add(o),u=new Mp(Zd.min(),new Map,new Cp($d),s,a),[4,S_(r,u)]):[3,2];case 1:return c.sent(),r.Qh=r.Qh.remove(o),r.Kh.delete(e),M_(r),[3,4];case 2:return[4,db(r.Cu,e,!1).then(function(){return R_(r,e,n)}).catch(mb)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function j_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:n=Ud(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ub(n.Cu,e)];case 2:return i=o.sent(),N_(n,r,null),P_(n,r),n.kh.Qa(r,"acknowledged"),[4,U_(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mb(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function A_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:r=Ud(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ud(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.rs.Cr(t,e).next(function(e){return Md(null!==e),r=e.keys(),n.rs.$r(t,e)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}(r.Cu,e)];case 2:return i=o.sent(),N_(r,e,n),P_(r,e),r.kh.Qa(e,"rejected",n),[4,U_(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mb(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function k_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:Nb((n=Ud(t)).Oh)||Nd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ud(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Or(t)})}(n.Cu)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Gh.get(r)||[]).push(e),n.Gh.set(r,i),[3,4]);case 3:return o=a.sent(),s=Vv(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function P_(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function N_(t,e,n){var r=Ud(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function R_(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach(function(e){t.Wh.Qr(e)||D_(t,e)})}function D_(t,e){var n=t.Qh.get(e);null!==n&&(xb(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),M_(t))}function L_(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof y_?(t.Wh.Do(o.key,e),F_(t,o)):o instanceof v_?(Nd("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||D_(t,o.key)):Fd()}}function F_(t,e){var n=e.key;t.Qh.get(n)||(Nd("SyncEngine","New document in limbo: "+n),t.Uh.push(n),M_(t))}function M_(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new __(e)),t.Qh=t.Qh.Tt(e,n),Ib(t.Oh,new yp(By(Fy(e.path)),n,2,Tv.Ds))}}function U_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:return r=Ud(t),i=[],o=[],s=[],r.Bh.W()?[3,3]:(r.Bh.forEach(function(t,a){s.push(r.Yh(a,e,n).then(function(t){if(t){r.Jh&&r.kh.Ja(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ov.Vs(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.Lh.au(i),[4,function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Jn.d)(this,function(l){switch(l.label){case 0:n=Ud(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return yv.forEach(e,function(e){return yv.forEach(e.gs,function(r){return n.persistence.Vr.Do(t,e.targetId,r)}).next(function(){return yv.forEach(e.ys,function(r){return n.persistence.Vr.No(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Av(r=l.sent()))throw r;return Nd("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Cc.get(a),c=u.Et(u.ft),n.Cc=n.Cc.Tt(a,c));return[2]}})})}(r.Cu,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function V_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return(n=Ud(t)).currentUser.isEqual(e)?[3,3]:(Nd("SyncEngine","User change. New user:",e.h()),[4,ab(n.Cu,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach(function(t){t.forEach(function(t){t.reject(new qd(Vd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Gh.clear()}(n),n.kh.Xa(e,r.$c,r.Lc),[4,U_(n,r.kc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function q_(t,e){var n=Ud(t),r=n.Kh.get(e);if(r&&r.Fh)return Pp().add(r.key);var i=Pp(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Bh.get(a[s]);i=i.Gt(u.view.Ph)}return i}function H_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return[4,pb((n=Ud(t)).Cu,e.query,!0)];case 1:return r=o.sent(),i=e.view.Nh(r),[2,(n.Jh&&L_(n,e.targetId,i.Dh),i)]}})})}function z_(t){return Object(Jn.b)(this,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){return[2,yb((e=Ud(t)).Cu).then(function(t){return U_(e,t)})]})})}function B_(t,e,n,r){return Object(Jn.b)(this,void 0,void 0,function(){var i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ud(t),r=Ud(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Nr(t,e).next(function(e){return e?n.Oc._s(t,e):yv.resolve(null)})})}((i=Ud(t)).Cu,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Vb(i.Oh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(N_(i,e,r||null),P_(i,e),function(t,e){Ud(Ud(t).rs).Br(e)}(i.Cu,e)):Fd(),s.label=4;case 4:return[4,U_(i,o)];case 5:return s.sent(),[3,7];case 6:Nd("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function W_(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Jn.d)(this,function(c){switch(c.label){case 0:return X_(n=Ud(t)),J_(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$a(),[4,G_(n,r.H())]);case 1:return i=c.sent(),n.Hh=!0,[4,Kb(n.Oh,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Ib(n.Oh,s[o]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],u=Promise.resolve(),n.qh.forEach(function(t,e){n.kh.za(e)?a.push(e):u=u.then(function(){return R_(n,e),db(n.Cu,e,!0)}),xb(n.Oh,e)}),[4,u]);case 4:return c.sent(),[4,G_(n,a)];case 5:return c.sent(),function(t){var e=Ud(t);e.Kh.forEach(function(t,n){xb(e.Oh,n)}),e.Wh.wa(),e.Kh=new Map,e.Qh=new _p(ip.$)}(n),n.Hh=!1,[4,Kb(n.Oh,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function G_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Jn.d)(this,function(g){switch(g.label){case 0:n=Ud(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.qh.get(a=s[o]))&&0!==c.length?[4,fb(n.Cu,By(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Bh.get(h[l]),[4,H_(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,gb(n.Cu,a)];case 8:return p=g.sent(),[4,fb(n.Cu,p)];case 9:return u=g.sent(),[4,C_(n,K_(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Lh.au(i),r)]}})})}function K_(t){return Ly(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Q_(t){var e=Ud(t);return Ud(Ud(e.Cu).persistence).Ic()}function $_(t,e,n,r){return Object(Jn.b)(this,void 0,void 0,function(){var i,o,s;return Object(Jn.d)(this,function(a){switch(a.label){case 0:return(i=Ud(t)).Hh?(Nd("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,yb(i.Cu)];case 3:return o=a.sent(),s=Mp.ae(e,"current"===n),[4,U_(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,db(i.Cu,e,!0)];case 6:return a.sent(),R_(i,e,r),[3,8];case 7:Fd(),a.label=8;case 8:return[2]}})})}function Y_(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Jn.d)(this,function(f){switch(f.label){case 0:if(!(r=X_(t)).Hh)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.qh.has(s=o[i])?(Nd("SyncEngine","Adding an already active target "+s),[3,5]):[4,gb(r.Cu,s)]:[3,6];case 2:return a=f.sent(),[4,fb(r.Cu,a)];case 3:return u=f.sent(),[4,C_(r,K_(a),u.targetId,!1)];case 4:f.sent(),Ib(r.Oh,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return r.qh.has(t)?[4,db(r.Cu,t,!1).then(function(){xb(r.Oh,t),R_(r,t)}).catch(mb)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function X_(t){var e=Ud(t);return e.Oh.xu.Qu=S_.bind(null,e),e.Oh.xu.Xe=q_.bind(null,e),e.Oh.xu.Uu=x_.bind(null,e),e.Lh.au=t_.bind(null,e.Mh),e.Lh.Xh=e_.bind(null,e.Mh),e}function J_(t){var e=Ud(t);return e.Oh.xu.Ku=j_.bind(null,e),e.Oh.xu.Wu=A_.bind(null,e),e}var Z_=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(Zd.min())?this.tl(t,e):this.Zh._s(t,r).next(function(o){var s=i.el(e,o);return(My(e)||Uy(e))&&i.ph(e.limitType,s,r,n)?i.tl(t,e):(Pd()<=Tc.a.DEBUG&&Nd("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qy(e)),i.Zh.ws(t,e,n).next(function(t){return s.forEach(function(e){t=t.Tt(e.key,e)}),t}))})},t.prototype.el=function(t,e){var n=new Cp(Yy(t));return e.forEach(function(e,r){r instanceof Py&&$y(t,r)&&(n=n.add(r))}),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return Pd()<=Tc.a.DEBUG&&Nd("IndexFreeQueryEngine","Using full collection scan to execute query:",Qy(e)),this.Zh.ws(t,e,Zd.min())},t}(),tw=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new Cp(o_.ua)}return t.prototype.br=function(t){return yv.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new dv(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new o_(u.key,i)),this.os.Dr(t,u.key.path.q())}return yv.resolve(o)},t.prototype.Cr=function(t,e){return yv.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return yv.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Or=function(){return yv.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return yv.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new o_(e,0),i=new o_(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],function(t){var e=n.il(t.Ta);o.push(e)}),yv.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new Cp($d);return e.forEach(function(t){var e=new o_(t,0),i=new o_(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],function(t){r=r.add(t.Ta)})}),yv.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;ip.ot(i)||(i=i.child(""));var o=new o_(new ip(i),0),s=new Cp($d);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)},o),yv.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.$r=function(t,e){var n=this;Md(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return yv.forEach(e.mutations,function(i){var o=new o_(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)}).next(function(){n.sl=r})},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new o_(e,0),r=this.sl.jt(n);return yv.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return yv.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),ew=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new _p(ip.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return yv.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ip();return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),yv.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=jp(),i=new ip(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof Py&&$y(e,u)&&(r=r.Tt(u.key,u))}return yv.resolve(r)},t.prototype.al=function(t,e){return yv.forEach(this.docs,function(t){return e(t)})},t.prototype.Xr=function(t){return new nw(this)},t.prototype.eo=function(t){return yv.resolve(this.size)},t}(),nw=function(t){function e(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(Jn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach(function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)}),yv.qn(n)},e.prototype.Yn=function(t,e){return this.no.Jn(t,e)},e.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},e}(vv),rw=function(){function t(t){this.persistence=t,this.hl=new gv(function(t){return lp(t)},hp),this.lastRemoteSnapshotVersion=Zd.min(),this.highestTargetId=0,this.ll=0,this._l=new i_,this.targetCount=0,this.fl=Gm.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),yv.resolve()},t.prototype.To=function(t){return yv.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return yv.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),yv.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),yv.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Gm(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,yv.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),yv.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,yv.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.po(t,a.targetId)),i++)}),yv.qn(o).next(function(){return i})},t.prototype.vo=function(t){return yv.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return yv.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),yv.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach(function(e){i.push(r.qr(t,e))}),yv.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),yv.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return yv.resolve(n)},t.prototype.Qr=function(t,e){return yv.resolve(this._l.Qr(e))},t}(),iw=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return yv.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:Tg(n.createTime)}),yv.resolve()},t.prototype.co=function(t,e){return yv.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:am(n.bundledQuery),readTime:Tg(n.readTime)}),yv.resolve()},t}(),ow=function(){function t(t,e){var n=this;this.El={},this.ko=new Tv(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new rw(this),this.os=new _m,this.ss=function(t,e){return new ew(t,function(t){return n.Vr.Tl(t)})}(this.os),this.serializer=new Xv(e),this.Go=new iw(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new tw(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;Nd("MemoryPersistence","Starting transaction:",t);var i=new sw(this.ko.next());return this.Vr.Il(),n(i).next(function(t){return r.Vr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},t.prototype.Al=function(t,e){return yv.Un(Object.values(this.El).map(function(n){return function(){return n.Qr(t,e)}}))},t}(),sw=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(Jn.c)(e,t),e}(Ev),aw=function(){function t(t){this.persistence=t,this.Rl=new i_,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw Fd()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),yv.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),yv.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),yv.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Ac();return r.xo(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Vo(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return yv.forEach(this.yl,function(r){var i=ip.st(r);return e.Vl(t,i).next(function(t){t||n.Hn(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return yv.Un([function(){return yv.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),uw=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),cw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lw=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Jn.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new Id;s.listenOnce(Od.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Cd.NO_ERROR:var e=s.getResponseJson();Nd("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Cd.TIMEOUT:Nd("Connection",'RPC "'+t+'" timed out'),o(new qd(Vd.DEADLINE_EXCEEDED,"Request time out"));break;case Cd.HTTP_ERROR:var n=s.getStatus();if(Nd("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Vd).indexOf(e)>=0?e:Vd.UNKNOWN}(r.status);o(new qd(a,r.message))}else o(new qd(Vd.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new qd(Vd.UNAVAILABLE,"Connection failed."));break;default:Fd()}}finally{Nd("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new md,i=_h(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(Zn.u)()||Object(Zn.x)()||Object(Zn.r)()||Object(Zn.t)()||Object(Zn.y)()||Object(Zn.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Nd("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new uw({pl:function(t){c?Nd("Connection","Not sending because WebChannel is closed:",t):(u||(Nd("Connection","Opening WebChannel transport."),a.open(),u=!0),Nd("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Sd.EventType.OPEN,function(){c||Nd("Connection","WebChannel transport opened.")}),h(a,Sd.EventType.CLOSE,function(){c||(c=!0,Nd("Connection","WebChannel transport closed"),l.Nl())}),h(a,Sd.EventType.ERROR,function(t){c||(c=!0,Dd("Connection","WebChannel transport errored:",t),l.Nl(new qd(Vd.UNAVAILABLE,"The operation could not be completed")))}),h(a,Sd.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Md(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Nd("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=pp[t];if(void 0!==e)return bp(e)}(i),s=r.message;void 0===o&&(o=Vd.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Nl(new qd(o,s)),a.close()}else Nd("Connection","WebChannel received:",n),l.xl(n)}}),h(i,Td.STAT_EVENT,function(t){10===t.stat?Nd("Connection","Detected buffering proxy"):11===t.stat&&Nd("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Cl()},0),l},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);Nd("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return Nd("RestConnection","Received: ",t),t},function(e){throw Dd("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+cw[t]},t}()),hw=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){Nd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){Nd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),fw=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),dw=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return this.serializer=bv(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return sb(this.persistence,new Z_,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new ow(aw.gl,this.serializer)},t.prototype.jl=function(t){return new g_},t.prototype.terminate=function(){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}})})},t}(),pw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Jn.c)(e,t),e.prototype.initialize=function(e){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,vb(this.Cu)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,J_(this.Xl.ga)];case 4:return n.sent(),[4,Vb(this.Xl.Oh)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return sb(this.persistence,new Z_,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Wv(this.persistence.Vr.cr,t.di)},e.prototype.Gl=function(t){var e=ib(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Bv.er(this.cacheSizeBytes):Bv.ir;return new Zm(this.synchronizeTabs,e,t.clientId,n,t.di,Lv(),Fv(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new g_},e}(dw),gw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Jn.c)(e,t),e.prototype.initialize=function(e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r=this;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.ga,this.kh instanceof p_?(this.kh.ga={_h:B_.bind(null,n),fh:$_.bind(null,n),dh:Y_.bind(null,n),Ic:Q_.bind(null,n),lh:z_.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Zo(function(t){return Object(Jn.b)(r,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,W_(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=Lv();if(!p_.Gs(e))throw new qd(Vd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ib(t.Fl.t,t.Fl.persistenceKey);return new p_(e,t.di,n,t.clientId,t.Yl)},e}(pw),yw=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n=this;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.ga=this.n_(e,!t.synchronizeTabs),this.kh.Pu=function(t){return I_(n.ga,t,1)},this.Oh.xu.s_=V_.bind(null,this.ga),[4,Kb(this.Oh,this.ga.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Xb},t.prototype.Zl=function(t){var e=bv(t.Fl.t),n=new lw(t.Fl);return function(t,e,n){return new Eb(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return I_(s.ga,t,0)},o=hw.Gs()?new hw:new fw,new Ob(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new w_(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){switch(n.label){case 0:return e=Ud(t),Nd("RemoteStore","RemoteStore shutting down."),e.Mu.add(5),[4,Sb(e)];case 1:return n.sent(),e.$u.fc(),e.Bu.set("Unknown"),[2]}})})}(this.Oh)},t}(),vw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),mw=function(t){this.o_=t};function bw(t,e,n){if(!n)throw new qd(Vd.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function _w(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qd(Vd.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ww(t,e,n,r){if(!0===e&&!0===r)throw new qd(Vd.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ew(t){if(!ip.ot(t))throw new qd(Vd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Cw(t){if(ip.ot(t))throw new qd(Vd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ow(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Fd()}function Tw(t,e){if(t instanceof mw&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new qd(Vd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ow(t);throw new qd(Vd.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Sw(t,e){if(e<=0)throw new qd(Vd.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Iw=function(t){this.c_=t},xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.u_=function(t){if(2!==t.a_)throw t.h_(1===t.a_?this.c_+"() can only appear at the top level of your update data":this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Iw);function jw(t,e,n){return new PE({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var Aw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.u_=function(t){return new ly(t.path,new ey)},e.prototype.isEqual=function(t){return t instanceof e},e}(Iw),kw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(Jn.c)(e,t),e.prototype.u_=function(t){var e=jw(this,t,!0),n=this.f_.map(function(t){return ME(t,e)}),r=new ny(n);return new ly(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Iw),Pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(Jn.c)(e,t),e.prototype.u_=function(t){var e=jw(this,t,!0),n=this.f_.map(function(t){return ME(t,e)}),r=new iy(n);return new ly(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Iw),Nw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(Jn.c)(e,t),e.prototype.u_=function(t){var e=new sy(t.serializer,wg(t.serializer,this.d_));return new ly(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Iw),Rw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new qd(Vd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qd(Vd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return $d(this.w_,t.w_)||$d(this.E_,t.E_)},t}(),Dw=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t(dp.fromBase64String(e))}catch(e){throw new qd(Vd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(dp.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),Lw=new Map,Fw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qd(Vd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qd(Vd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ww("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Mw=function(){function t(t,e){this.I_="(lite)",this.m_=new Fw({}),this.A_=!1,t instanceof jd?(this.R_=t,this.P_=new zd):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qd(Vd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(t.options.projectId)}(t),this.P_=new Bd(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new qd(Vd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new qd(Vd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new Fw(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new zd;switch(t.type){case"gapi":var e=t.client;return Md(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gd(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new qd(Vd.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=Lw.get(t);e&&(Nd("ComponentProvider","Removing Datastore"),Lw.delete(t),e.terminate())}(this),Promise.resolve()},t}();function Uw(){if("undefined"==typeof Uint8Array)throw new qd(Vd.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Vw(){if("undefined"==typeof atob)throw new qd(Vd.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.fromBase64String=function(t){return Vw(),new e(Dw.fromBase64String(t))},e.fromUint8Array=function(t){return Uw(),new e(Dw.fromUint8Array(t))},e.prototype.toBase64=function(){return Vw(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return Uw(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(mw),Hw=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),tg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ug(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(cg(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw Fd()}},t.prototype.L_=function(t,e){var n=this,r={};return Qp(t.fields||{},function(t,i){r[t]=n.C_(i,e)}),r},t.prototype.M_=function(t){return new Rw(ug(t.latitude),ug(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.C_(t,e)})},t.prototype.x_=function(t,e){switch(e){case"previous":var n=Xp(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(Jp(t));default:return null}},t.prototype.N_=function(t){var e=ag(t);return new Jd(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=ep.Y(t);Md(Yg(n));var r=new jd(n.get(1),n.get(3)),i=new ip(n.B(5));return r.isEqual(e)||Rd("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),zw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jn.c)(e,t),e.prototype.F_=function(t){return new qw(new Dw(t))},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return yC.q_(e,this.firestore,null)},e}(Hw),Bw=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new aE(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new Ww(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(Gw("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),Ww=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Bw);function Gw(t,e){return"string"==typeof e?BE(t,e):e instanceof mw?e.o_.G_:e.G_}var Kw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new qd(Vd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new rp(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),Qw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new Uv,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(Jn.c)(e,t),e.prototype.D_=function(){return this.H_||dC(this),this.H_.terminate()},e}(Mw);function $w(t,e,n){var r=this,i=new mv;return t.di.enqueue(function(){return Object(Jn.b)(r,void 0,void 0,function(){var r;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,YE(t,n)];case 1:return o.sent(),[4,XE(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Vd.FAILED_PRECONDITION||t.code===Vd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Yw(t){if(t.y_||t.V_)throw new qd(Vd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xw=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).U_=e,a.J_=e,a.metadata=o,a}return Object(Jn.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new Jw(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(Gw("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},e}(Bw),Jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Xw),Zw=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new _C(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach(function(r){t.call(e,new Jw(n.U_,n.Q_,r.key,r,new _C(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new qd(Vd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map(function(e){return{type:"added",doc:new Jw(t.U_,t.Q_,e.doc.key,e.doc,new _C(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),oldIndex:-1,newIndex:n++}})}var r=t.Y_.te;return t.Y_.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Jw(t.U_,t.Q_,e.doc.key,e.doc,new _C(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:tE(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.Z_=e),this.X_},t}();function tE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fd()}}function eE(t,e){return t instanceof Xw&&e instanceof Xw?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof Zw&&e instanceof Zw&&t.U_===e.U_&&SE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var nE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jn.c)(e,t),e.prototype.F_=function(t){return new Dw(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new aE(this.firestore,null,e)},e}(Hw);function rE(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Tw(t.firestore,Qw),s=IE(o);return e instanceof mw&&(e=e.o_),oE(o,("string"==typeof e||e instanceof Kw?LE(s,"updateDoc",t.K_,e,n,r):DE(s,"updateDoc",t.K_,e)).ef(t.K_,fy.exists(!0)))}function iE(t){for(var e,n,r,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||_v(o[u])||(a=o[u],u++);var c,l,h,f={includeMetadataChanges:a.includeMetadataChanges};if(_v(o[u])){var d=o[u];o[u]=null===(e=d.next)||void 0===e?void 0:e.bind(d),o[u+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),o[u+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof aE)l=Tw(t.firestore,Qw),h=Fy(t.K_.path),c={next:function(e){o[u]&&o[u](sE(l,t,e))},error:o[u+1],complete:o[u+2]};else{l=Tw(t.firestore,Qw),h=t.tf;var p=new nE(l);c={next:function(e){o[u]&&o[u](new Zw(l,p,t,e))},error:o[u+1],complete:o[u+2]},_E(t.tf)}var g=fC(l),y=new vw(c),v=new r_(h,y,f);return l.z_.Ri(function(){return Object(Jn.b)(i,void 0,void 0,function(){var t;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t=Jb,[4,iC(g)];case 1:return[2,t.apply(void 0,[e.sent(),v])]}})})}),function(){y.r_(),l.z_.Ri(function(){return Object(Jn.b)(i,void 0,void 0,function(){var t;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t=Zb,[4,iC(g)];case 1:return[2,t.apply(void 0,[e.sent(),v])]}})})})}}function oE(t,e){return function(t,e){var n=this,r=new mv;return t.di.Ri(function(){return Object(Jn.b)(n,void 0,void 0,function(){var n;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return n=T_,[4,rC(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(fC(t),e)}function sE(t,e,n){var r=n.docs.get(e.K_),i=new nE(t);return new Xw(t,i,e.K_,r,new _C(n.hasPendingWrites,n.fromCache),e.j_)}var aE=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wE(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),uE=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),cE=function(){};function lE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var hE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(Jn.c)(e,t),e.prototype.sf=function(t){var e=IE(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new qd(Vd.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){mE(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(vE(r,t,l[c]));a={arrayValue:{values:u}}}else a=vE(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||mE(s,o),a=FE(n,"where",s,"in"===o||"not-in"===o);var h=Xy.create(i,o,a);return function(t,e){if(e.An()){var n=qy(t);if(null!==n&&!n.isEqual(e.field))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Vy(t);null!==r&&bE(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new qd(Vd.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new uE(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new Dy(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},e}(cE),fE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(Jn.c)(e,t),e.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lv(e,n);return function(t,e){if(null===Vy(t)){var n=qy(t);null!==n&&bE(0,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new uE(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new Dy(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},e}(cE),dE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(Jn.c)(e,t),e.prototype.sf=function(t){return new uE(t.firestore,t.j_,Wy(t.tf,this.hf,this.lf))},e}(cE),pE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(Jn.c)(e,t),e.prototype.sf=function(t){var e=yE(t,this.type,this._f,this.ff);return new uE(t.firestore,t.j_,function(t,e){return new Dy(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},e}(cE),gE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(Jn.c)(e,t),e.prototype.sf=function(t){var e=yE(t,this.type,this._f,this.ff);return new uE(t.firestore,t.j_,function(t,e){return new Dy(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},e}(cE);function yE(t,e,n,r){if(n[0]instanceof mw&&(n[0]=n[0].o_),n[0]instanceof Bw)return function(t,e,n,r,i){if(!r)throw new qd(Vd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=zy(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(lg(e,r.key));else{var c=r.field(u.field);if(Yp(c))throw new qd(Vd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.J();throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new sv(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=IE(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new qd(Vd.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Hy(t)&&-1!==c.indexOf("/"))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ep.Y(c));if(!ip.ot(l))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ip(l);a.push(lg(e,h))}else{var f=FE(n,r,c);a.push(f)}}return new sv(a,o)}(t.tf,t.firestore.R_,i,e,n,r)}function vE(t,e,n){if(n instanceof mw&&(n=n.o_),"string"==typeof n){if(""===n)throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hy(e)&&-1!==n.indexOf("/"))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ep.Y(n));if(!ip.ot(r))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return lg(t,new ip(r))}if(n instanceof aE)return lg(t,n.K_);throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ow(n)+".")}function mE(t,e){if(!Array.isArray(t)||0===t.length)throw new qd(Vd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new qd(Vd.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function bE(t,e,n){if(!n.isEqual(e))throw new qd(Vd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function _E(t){if(Uy(t)&&0===t.Tn.length)throw new qd(Vd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wE=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Fy(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new aE(this.firestore,null,new ip(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.nf)},e}(uE);function EE(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(bw("collection","path",e),t instanceof Mw){var i=ep.Y.apply(ep,Object(Jn.g)([e],n));return Cw(i),new wE(t,null,i)}if(!(t instanceof aE||t instanceof wE))throw new qd(Vd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=ep.Y.apply(ep,Object(Jn.g)([t.path],n)).child(ep.Y(e));return Cw(o),new wE(t.firestore,null,o)}function CE(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=Qd.D()),bw("doc","path",e),t instanceof Mw){var i=ep.Y.apply(ep,Object(Jn.g)([e],n));return Ew(i),new aE(t,null,new ip(i))}if(!(t instanceof aE||t instanceof wE))throw new qd(Vd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t.nf.child(ep.Y.apply(ep,Object(Jn.g)([e],n)));return Ew(o),new aE(t.firestore,t instanceof wE?t.j_:null,new ip(o))}var OE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Jn.c)(e,t),e.prototype.F_=function(t){return new Dw(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new aE(this.firestore,null,e)},e}(Hw);function TE(t,e){return(t instanceof aE||t instanceof wE)&&(e instanceof aE||e instanceof wE)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function SE(t,e){return t instanceof uE&&e instanceof uE&&t.firestore===e.firestore&&Gy(t.tf,e.tf)&&t.j_===e.j_}function IE(t){var e=t.S_(),n=bv(t.R_);return new NE(t.R_,!!e.ignoreUndefinedProperties,n)}var xE=/^__.*__$/,jE=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return n.push(null!==this.en?new wy(t,this.data,this.en,e):new _y(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Cy(t,this.fieldTransforms)),n},t}(),AE=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new wy(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new Cy(t,this.fieldTransforms)),n},t}();function kE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fd()}}var PE=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return WE(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find(function(e){return t.j(e)})||void 0!==this.fieldTransforms.find(function(e){return t.j(e.field)})},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(kE(this.a_)&&xE.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),NE=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||bv(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new PE({a_:t,methodName:e,l_:n,path:rp.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function RE(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);qE("Data must be an object, but it was:",s,r);var a,u,c=UE(r,s);if(o.merge)a=new cy(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=HE(e,f[h],n);if(!s.contains(d))throw new qd(Vd.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");GE(l,d)||l.push(d)}a=new cy(l),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new jE(new xy(c),a,u)}function DE(t,e,n,r){var i=t.Rf(1,e,n);qE("Data must be an object, but it was:",i,r);var o=[],s=new jy;Qp(r,function(t,r){var a=BE(e,t,n);r instanceof mw&&(r=r.o_);var u=i.If(a);if(r instanceof xw)o.push(a);else{var c=ME(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new cy(o);return new AE(s.hn(),a,i.fieldTransforms)}function LE(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[HE(e,r,n)],u=[i];if(o.length%2!=0)throw new qd(Vd.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(HE(e,o[c])),u.push(o[c+1]);for(var l=[],h=new jy,f=a.length-1;f>=0;--f)if(!GE(l,a[f])){var d=a[f],p=u[f];p instanceof mw&&(p=p.o_);var g=s.If(d);if(p instanceof xw)l.push(d);else{var y=ME(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new cy(l);return new AE(h.hn(),v,s.fieldTransforms)}function FE(t,e,n,r){return void 0===r&&(r=!1),ME(n,t.Rf(r?4:3,e))}function ME(t,e){if(t instanceof mw&&(t=t.o_),VE(t))return qE("Unsupported field value:",e,t),UE(t,e);if(t instanceof Iw)return function(t,e){if(!kE(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ME(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof mw&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wg(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Jd.fromDate(t);return{timestampValue:Eg(e.serializer,n)}}if(t instanceof Jd){var r=new Jd(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Eg(e.serializer,r)}}if(t instanceof Rw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dw)return{bytesValue:Cg(e.serializer,t.T_)};if(t instanceof aE){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Sg(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+Ow(t))}(t,e)}function UE(t,e){var n={};return $p(t)?e.path&&e.path.length>0&&e.en.push(e.path):Qp(t,function(t,r){var i=ME(r,e.Ef(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function VE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Jd||t instanceof Rw||t instanceof Dw||t instanceof aE||t instanceof Iw)}function qE(t,e,n){if(!VE(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ow(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function HE(t,e,n){if(e instanceof mw&&(e=e.o_),e instanceof Kw)return e.G_;if("string"==typeof e)return BE(t,e);throw WE("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var zE=new RegExp("[~\\*/\\[\\]]");function BE(t,e,n){if(e.search(zE)>=0)throw WE("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Kw.bind.apply(Kw,Object(Jn.g)([void 0],e.split("."))))).G_}catch(r){throw WE("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function WE(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new qd(Vd.INVALID_ARGUMENT,(a+=". ")+t+u)}function GE(t,e){return t.some(function(t){return t.isEqual(e)})}var KE=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n=this;return Object(Jn.d)(this,function(r){switch(r.label){case 0:if(this.vf(),this.mutations.length>0)throw new qd(Vd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Jn.d)(this,function(u){switch(u.label){case 0:return n=Ud(t),r=Pg(n.serializer)+"/documents",i={documents:e.map(function(t){return xg(n.serializer,t)})},[4,n.Ru("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Md(!!e.found);var n=jg(t,e.found.name),r=Tg(e.found.updateTime),i=new xy({mapValue:{fields:e.found.fields}});return new Py(n,r,i,{})}(t,e):"missing"in e?function(t,e){Md(!!e.missing),Md(!!e.readTime);var n=jg(t,e.missing),r=Tg(e.readTime);return new Ny(n,r)}(t,e):Fd()}(n.serializer,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Md(!!e),a.push(e)}),a)]}})})}(this.Nu,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Ny||t instanceof Py?n.bf(t):Fd()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new Sy(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(Jn.b)(this,void 0,void 0,function(){var t,e=this;return Object(Jn.d)(this,function(n){switch(n.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ip.st(n);e.mutations.push(new Iy(r,e.rn(r)))}),[4,function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Jn.d)(this,function(o){switch(o.label){case 0:return n=Ud(t),r=Pg(n.serializer)+"/documents",i={writes:e.map(function(t){return Dg(n.serializer,t)})},[4,n.Au("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Nu,this.mutations)];case 1:return n.sent(),this.gf=!0,[2]}})})},t.prototype.bf=function(t){var e;if(t instanceof Py)e=t.version;else{if(!(t instanceof Ny))throw Fd();e=Zd.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qd(Vd.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?fy.updateTime(e):fy.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(Zd.min()))throw new qd(Vd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fy.updateTime(e)}return fy.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),QE=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new Sv(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs(function(){return Object(Jn.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Jn.d)(this,function(r){return t=new KE(this.Nu),(e=this.Nf(t))&&e.then(function(e){n.di.Ri(function(){return t.commit().then(function(){n.Ti.resolve(e)}).catch(function(t){n.xf(t)})})}).catch(function(t){n.xf(t)}),[2]})})})},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!op(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri(function(){return e.Cf(),Promise.resolve()})):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!mp(e)}return!1},t}(),$E=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=Ad.UNAUTHENTICATED,this.clientId=Qd.D(),this.Of=function(){},this.g=new mv,this.credentials.A(function(t){Nd("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()})}return t.prototype.getConfiguration=function(){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then(function(){return e.Of(e.user)})},t.prototype.kf=function(){if(this.di.Ci)throw new qd(Vd.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new mv;return this.di.Ni(function(){return Object(Jn.b)(t,void 0,void 0,function(){var t,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Vv(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function YE(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r=this;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),Nd("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.Mf(function(n){return t.di.Mi(function(){return Object(Jn.b)(r,void 0,void 0,function(){return Object(Jn.d)(this,function(t){switch(t.label){case 0:return[4,ab(e.Cu,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.tc(function(){return t.terminate()}),t.Lf=e,[2]}})})}function XE(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),[4,JE(t)];case 1:return n=i.sent(),Nd("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.Mf(function(n){return t.di.Mi(function(){return function(t,e){return Object(Jn.b)(this,void 0,void 0,function(){var n,r;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return(n=Ud(t)).di.Li(),Nd("RemoteStore","RemoteStore received new credentials"),r=Nb(n),n.Mu.add(3),[4,Sb(n)];case 1:return i.sent(),r&&n.Bu.set("Unknown"),[4,n.xu.s_(e)];case 2:return i.sent(),n.Mu.delete(3),[4,Tb(n)];case 3:return i.sent(),[2]}})})}(e.Oh,n)})}),t.$f=e,[2]}})})}function JE(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t.Lf?[3,2]:(Nd("FirestoreClient","Using default OfflineComponentProvider"),[4,YE(t,new dw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}})})}function ZE(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t.$f?[3,2]:(Nd("FirestoreClient","Using default OnlineComponentProvider"),[4,XE(t,new yw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}})})}function tC(t){return JE(t).then(function(t){return t.persistence})}function eC(t){return JE(t).then(function(t){return t.Cu})}function nC(t){return ZE(t).then(function(t){return t.Oh})}function rC(t){return ZE(t).then(function(t){return t.ga})}function iC(t){return Object(Jn.b)(this,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return[4,ZE(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ju=E_.bind(null,e.ga),n.Zu=O_.bind(null,e.ga),n)]}})})}function oC(t,e,n,r,i){var o=new vw({next:function(o){e.Ri(function(){return Zb(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new qd(Vd.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new qd(Vd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new r_(Fy(n.path),o,{includeMetadataChanges:!0,oa:!0});return Jb(t,s)}function sC(t,e,n,r,i){var o=new vw({next:function(n){e.Ri(function(){return Zb(t,s)}),n.fromCache&&"server"===r.source?i.reject(new qd(Vd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new r_(n,o,{includeMetadataChanges:!0,oa:!0});return Jb(t,s)}var aC=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=IE(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=uC(t,this.U_),i=xC(r.j_,e,n),o=RE(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,fy.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=uC(t,this.U_);return e instanceof mw&&(e=e.o_),o="string"==typeof e||e instanceof Kw?LE(this.Qf,"WriteBatch.update",s.K_,e,n,r):DE(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,fy.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=uC(t,this.U_);return this.qf=this.qf.concat(new Sy(e.K_,fy.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new qd(Vd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function uC(t,e){if(t instanceof mw&&(t=t.o_),t.firestore!==e)throw new qd(Vd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(Jn.c)(e,t),e.prototype.get=function(e){var n=this,r=uC(e,this.U_),i=new nE(this.U_);return t.prototype.get.call(this,e).then(function(t){return new Xw(n.U_,i,r.K_,t.W_,new _C(!1,!1),r.j_)})},e}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=IE(t)}return t.prototype.get=function(t){var e=this,n=uC(t,this.U_),r=new OE(this.U_);return this.Wf.pf([n.K_]).then(function(t){if(!t||1!==t.length)return Fd();var i=t[0];if(i instanceof Ny)return new Bw(e.U_,r,n.K_,null,n.j_);if(i instanceof Py)return new Bw(e.U_,r,i.key,i,n.j_);throw Fd()})},t.prototype.set=function(t,e,n){var r=uC(t,this.U_),i=xC(r.j_,e,n),o=RE(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=uC(t,this.U_);return e instanceof mw&&(e=e.o_),o="string"==typeof e||e instanceof Kw?LE(this.Qf,"Transaction.update",s.K_,e,n,r):DE(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=uC(t,this.U_);return this.Wf.delete(e.K_),this},t}()),lC=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Yw(t);var n=fC(t),r=t.S_(),i=new yw;return $w(n,i,new pw(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Yw(t);var e=fC(t),n=t.S_(),r=new yw;return $w(e,r,new gw(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.y_&&!t.V_)throw new qd(Vd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new mv;return t.z_.Ni(function(){return Object(Jn.b)(e,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Jn.b)(this,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return Iv.Gs()?[4,Iv.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ib(t.R_,t.I_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),hC=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof jd||(i.Gf=e),i}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&Dd("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Jn.b)(e,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return[4,tC(t)];case 1:return e=r.sent(),[4,nC(t)];case 2:return n=r.sent(),[2,(e.ec(!0),function(t){var e=Ud(t);return e.Mu.delete(0),Tb(e)}(n))]}})})})}(fC(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Jn.b)(e,void 0,void 0,function(){var e,n;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return[4,tC(t)];case 1:return e=r.sent(),[4,nC(t)];case 2:return n=r.sent(),[2,(e.ec(!1),function(t){return Object(Jn.b)(this,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(n){switch(n.label){case 0:return(e=Ud(t)).Mu.add(0),[4,Sb(e)];case 1:return n.sent(),e.Bu.set("Offline"),[2]}})})}(n))]}})})})}(fC(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ww("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new mv;return t.di.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){var e;return Object(Jn.d)(this,function(r){switch(r.label){case 0:return e=k_,[4,rC(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(fC(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=fC(t),i=_v(e)?e:{next:e},o=new vw(i);return t.z_.Ri(function(){return Object(Jn.b)(n,void 0,void 0,function(){var t;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){Ud(t).Hu.add(e),e.next()},[4,iC(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}})})}),function(){o.r_(),t.z_.Ri(function(){return Object(Jn.b)(n,void 0,void 0,function(){var t;return Object(Jn.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){Ud(t).Hu.delete(e)},[4,iC(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}})})})}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Gf)throw new qd(Vd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new SC(this,EE(this.o_,t))}catch(t){throw vC(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new yC(this,CE(this.o_,t))}catch(t){throw vC(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new CC(this,function(t,e){if(bw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qd(Vd.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new uE(t,null,function(t){return new Dy(ep.X(),t)}(e))}(this.o_,t))}catch(t){throw vC(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new mv;return t.di.Ri(function(){return Object(Jn.b)(n,void 0,void 0,function(){var n;return Object(Jn.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return ZE(t).then(function(t){return t.Nu})}(t)];case 1:return n=i.sent(),new QE(t.di,n,e,r).run(),[2]}})})}),r.promise}(fC(t),function(n){return e(new cC(t,n))})}(this.o_,function(n){return t(new pC(e,n))})},e.prototype.batch=function(){var t=this;return fC(this.o_),new gC(new aC(this.o_,function(e){return oE(t.o_,e)}))},e}(mw);function fC(t){return t.H_||dC(t),t.H_.kf(),t.H_}function dC(t){var e=t.S_(),n=function(t,e,n){return new xd(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new $E(t.P_,t.z_,n)}var pC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Jn.c)(e,t),e.prototype.get=function(t){var e=this,n=IC(t);return this.o_.get(n).then(function(t){return new wC(e.U_,t)})},e.prototype.set=function(t,e,n){var r=IC(t);return n?(_w("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=IC(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Jn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=IC(t);return this.o_.delete(e),this},e}(mw),gC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.set=function(t,e,n){var r=IC(t);return n?(_w("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=IC(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Jn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=IC(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(mw),yC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new zw(e),r}return Object(Jn.c)(e,t),e.zf=function(t,n,r){if(t.length%2!=0)throw new qd(Vd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new aE(n.o_,r,new ip(t)))},e.q_=function(t,n,r){return new e(n,new aE(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new SC(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new SC(this.firestore,EE(this.o_,t))}catch(t){throw vC(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof mw&&(t=t.o_),t instanceof aE&&TE(this.o_,t)},e.prototype.set=function(t,e){e=_w("DocumentReference.set",e);try{return function(t,e,n){var r=Tw(t.firestore,Qw),i=xC(t.j_,e,n);return oE(r,RE(IE(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,fy.on()))}(this.o_,t,e)}catch(t){throw vC(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rE(this.o_,t):rE.apply(void 0,Object(Jn.g)([this.o_,t,e],n))}catch(t){throw vC(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return oE(Tw((t=this.o_).firestore,Qw),[new Sy(t.K_,fy.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mC(e),i=bC(e,function(e){return new wC(t.firestore,new Xw(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))});return iE(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new nE(n),o=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,eC(r)];case 1:return[4,function(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Jn.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Ud(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Oc.cs(t,e)})}(t,e)];case 1:return(r=s.sent())instanceof Py?n.resolve(r):r instanceof Ny?n.resolve(null):n.reject(new qd(Vd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=Vv(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})}(e.sent(),t.K_,o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Xw(n,i,t.K_,e,new _C(e instanceof Py&&e.an,!0),t.j_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,iC(r)];case 1:return[4,oC(e.sent(),n.z_,t.K_,{source:"server"},i)];case 2:return e.sent(),[2]}})})}),i.promise.then(function(e){return sE(n,t,e)})}(this.o_):function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,iC(r)];case 1:return[4,oC(e.sent(),n.z_,t.K_,{source:"default"},i)];case 2:return e.sent(),[2]}})})}),i.promise.then(function(e){return sE(n,t,e)})}(this.o_)).then(function(t){return new wC(e.firestore,new Xw(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(mw);function vC(t,e,n){return t.message=t.message.replace(e,n),t}function mC(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!_v(r))return r}return{}}function bC(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=_v(t[0])?t[0]:_v(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _C=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),wC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new yC(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return eE(this.o_,t.o_)},e}(mw),EC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(wC),CC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(Jn.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,lE(this.o_,function(t,e,n){var r=e,i=Gw("where",t);return new hE(i,r,n)}(t,n,r)))}catch(t){throw vC(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,lE(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Gw("orderBy",t);return new fE(r,n)}(t,n)))}catch(t){throw vC(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,lE(this.o_,function(t){return Sw("limit",t),new dE("limit",t,"F")}(t)))}catch(t){throw vC(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,lE(this.o_,function(t){return Sw("limitToLast",t),new dE("limitToLast",t,"L")}(t)))}catch(t){throw vC(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lE(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pE("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw vC(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lE(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pE("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw vC(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lE(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gE("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw vC(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,lE(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gE("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw vC(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return SE(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new nE(n),o=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,eC(r)];case 1:return[4,function(t,e,n){return Object(Jn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Jn.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,pb(t,e,!0)];case 1:return r=c.sent(),i=new m_(e,r.Bc),o=i.gh(r.documents),s=i.Zn(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=Vv(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})}(e.sent(),t.tf,o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Zw(n,i,t,e)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new nE(n),o=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,iC(r)];case 1:return[4,sC(e.sent(),n.z_,t.tf,{source:"server"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Zw(n,i,t,e)})}(this.o_):function(t){var e=this,n=Tw(t.firestore,Qw),r=fC(n),i=new nE(n);_E(t.tf);var o=new mv;return n.z_.Ri(function(){return Object(Jn.b)(e,void 0,void 0,function(){return Object(Jn.d)(this,function(e){switch(e.label){case 0:return[4,iC(r)];case 1:return[4,sC(e.sent(),n.z_,t.tf,{source:"default"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Zw(n,i,t,e)})}(this.o_)).then(function(t){return new TC(e.firestore,t)})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mC(e),i=bC(e,function(e){return new TC(t.firestore,e)});return iE(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(mw),OC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new EC(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(mw),TC=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new CC(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new EC(t.U_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new OC(e.U_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new EC(n.U_,r))})},e.prototype.isEqual=function(t){return eE(this.o_,t.o_)},e}(mw),SC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(Jn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new yC(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new yC(this.firestore,void 0===t?CE(this.o_):CE(this.o_,t))}catch(t){throw vC(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Tw(t.firestore,Qw),r=CE(t),i=xC(t.j_,e);return oE(n,RE(IE(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,fy.exists(!1))).then(function(){return r})}(this.o_,t).then(function(t){return new yC(e.firestore,t)})},e.prototype.isEqual=function(t){return TE(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(CC);function IC(t){return t instanceof mw&&(t=t.o_),Tw(t,aE)}function xC(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var jC,AC=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Kw.bind.apply(Kw,Object(Jn.g)([void 0],e))))||this}return Object(Jn.c)(e,t),e.documentId=function(){return new e(rp.et().J())},e.prototype.isEqual=function(t){return t instanceof mw&&(t=t.o_),t instanceof Kw&&this.o_.G_.isEqual(t.G_)},e}(mw),kC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Jn.c)(e,t),e.serverTimestamp=function(){var t=new Aw("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new xw("deleteField");return t.c_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kw("arrayUnion",t)}).apply(void 0,t);return r.c_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pw("arrayRemove",t)}).apply(void 0,t);return r.c_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Nw("increment",t)}(t);return n.c_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(mw),PC={Firestore:hC,GeoPoint:Rw,Timestamp:Jd,Blob:qw,Transaction:pC,WriteBatch:gC,DocumentReference:yC,DocumentSnapshot:wC,Query:CC,QueryDocumentSnapshot:EC,QuerySnapshot:TC,CollectionReference:SC,FieldPath:AC,FieldValue:kC,setLogLevel:function(t){kd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function NC(t,e){return function(t,e=Re.a){return new Kt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function RC(t,e){return NC(t,e).pipe(Object(te.a)(t=>({payload:t,type:"query"})))}function DC(t,e){return RC(t,e).pipe(xs(void 0),Ec(),Object(te.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function LC(t,e,n){return DC(t,n).pipe(Be((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return FC(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return FC(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FC(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ke(),Object(te.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function FC(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function MC(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new tr.a("firestore",function(t){return function(t,e){return new hC(t,new Qw(t,e),new lC)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},PC)))})(jC=Xn.a),jC.registerVersion("@firebase/firestore","2.0.4");class UC{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?DC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(te.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):DC(this.query,this.afs.schedulers.outsideAngular).pipe(Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Be((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=MC(t);return LC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return RC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(te.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ve.a)(this.query.get(t)).pipe(Object(en.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new VC(this.ref.doc(t),this.afs)}}class VC{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=GC(n,e);return new UC(r,i,this.afs)}snapshotChanges(){return NC(this.ref,this.afs.schedulers.outsideAngular).pipe(xs(void 0),Ec(),Object(te.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(te.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Ve.a)(this.ref.get(t)).pipe(Object(en.b)(this.afs.schedulers.insideAngular))}}class qC{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?DC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(te.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):DC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Be((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=MC(t);return LC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return RC(this.query,this.afs.schedulers.outsideAngular).pipe(Object(te.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ve.a)(this.query.get(t)).pipe(Object(en.b)(this.afs.schedulers.insideAngular))}}const HC=new r.q("angularfire2.enableFirestorePersistence"),zC=new r.q("angularfire2.firestore.persistenceSettings"),BC=new r.q("angularfire2.firestore.settings"),WC=new r.q("angularfire2.firestore.use-emulator");function GC(t,e=(t=>t)){return{query:e(t),ref:t}}let KC=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Ne.d(o),this.keepUnstableUntilFirst=Object(Ne.h)(this.schedulers);const c=Object(Ne.g)(t,o,e);!Rn.a.auth&&u&&Object(Ne.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Ne.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!dt(i)){const e=()=>{try{return Object(Ve.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object(Gt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Gt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=GC(n,e),o=this.schedulers.ngZone.run(()=>r);return new UC(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new qC(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new VC(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(Ne.c),r.Pb(Ne.b,8),r.Pb(HC,8),r.Pb(BC,8),r.Pb(r.B),r.Pb(r.z),r.Pb(zC,8),r.Pb(WC,8),r.Pb(In,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Pb)(Ne.c),Object(r.Pb)(Ne.b,8),Object(r.Pb)(HC,8),Object(r.Pb)(BC,8),Object(r.Pb)(r.B),Object(r.Pb)(r.z),Object(r.Pb)(zC,8),Object(r.Pb)(WC,8),Object(r.Pb)(In,8))},token:t,providedIn:"any"}),t})(),QC=(()=>{class t{constructor(t,e){this.firestore=t,this.storage=e}uploadFiles(t){return this.firestore.collection("files").add(t)}getFiles(){return this.firestore.collection("files",t=>t.orderBy("date","desc")).snapshotChanges()}deleteFile(t){return this.storage.storage.refFromURL(t).delete()}deleteFileInfo(t){return this.firestore.collection("files").doc(t).delete()}getUser(t){return this.firestore.collection("users",e=>e.where("email","==",t)).snapshotChanges()}updateUser(t){return this.firestore.doc("users/"+t.userId).update({confirmDelete:t.isChecked})}getUsers(){return this.firestore.collection("users",t=>t.orderBy("email","asc")).snapshotChanges()}postLastLogins(t){return this.firestore.collection("lastLogins").add(t)}getLastLogins(){return this.firestore.collection("lastLogins",t=>t.orderBy("date","desc")).snapshotChanges()}deleteLastLogins(t){return this.firestore.doc("lastLogins/"+t).delete()}postFailedLogins(t){return this.firestore.collection("failedLogins").add(t)}getFailedLogins(){return this.firestore.collection("failedLogins",t=>t.orderBy("date","desc")).snapshotChanges()}deleteFailedLogins(t){return this.firestore.doc("failedLogins/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(KC),r.Pb(Di))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var $C=n("z6cu");class YC{constructor(t,e,n,r){this.email=t,this.id=e,this._tokenId=n,this._tokenExpTime=r}get token(){return!this._tokenExpTime||new Date>this._tokenExpTime?null:this._tokenId}}let XC=(()=>{class t{constructor(t,e){this.http=t,this.router=e,this.user=new cs(null)}signIn(t,e){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+i.apiKey,{email:t,password:e,returnSecureToken:!0}).pipe(ws(this.errorHandler),Object(Os.a)(t=>{this.handleAuth(t.email,t.localId,t.idToken,+t.expiresIn)}))}logout(){this.user.next(null),localStorage.removeItem("userData"),this.router.navigate(["login"]),this.tokenExpTimer&&clearTimeout(this.tokenExpTimer),this.tokenExpTimer=null}autoLogin(){const t=JSON.parse(localStorage.getItem("userData"));if(!t)return;const e=new YC(t.email,t.id,t._tokenId,new Date(t._tokenExpTime));if(e.token){this.user.next(e);const n=new Date(t._tokenExpTime).getTime()-(new Date).getTime();this.autoLogout(n)}}autoLogout(t){this.tokenExpTimer=setTimeout(()=>{this.logout()},t)}errorHandler(t){let e="Unknown Error!";if(t.error&&t.error.error){switch(t.error.error.message){case"EMAIL_EXISTS":e="Already has a registration with this email!";break;case"EMAIL_NOT_FOUND":e="Wrong email or password!";break;case"INVALID_PASSWORD":e="Wrong email or password!"}return Object($C.a)(e)}return Object($C.a)(e)}handleAuth(t,e,n,r){const i=new Date((new Date).getTime()+1e3*r),o=new YC(t,e,n,i);this.user.next(o),this.autoLogout(1e3*r),localStorage.setItem("userData",JSON.stringify(o))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(ve),r.Pb(nc))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),JC=(()=>{class t{constructor(){this.enableLoginReportSubject=new cs(null),this.enableLoginReport=!1,this.enableLoginReportSubject.next(this.enableLoginReport)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ZC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-loading-spinner"]],decls:14,vars:0,consts:[[1,"loading-spinner"],[1,"loader"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"div",1),r.Jb(2,"div"),r.Jb(3,"div"),r.Jb(4,"div"),r.Jb(5,"div"),r.Jb(6,"div"),r.Jb(7,"div"),r.Jb(8,"div"),r.Jb(9,"div"),r.Jb(10,"div"),r.Jb(11,"div"),r.Jb(12,"div"),r.Jb(13,"div"),r.Kb(),r.Kb())},encapsulation:2}),t})(),tO=(()=>{class t{constructor(){}transform(t){return(t/1024/1024).toFixed(2)+" MB"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Hb({name:"MbPipe",type:t,pure:!0}),t})();function eO(t,e){1&t&&r.Jb(0,"app-loading-spinner")}function nO(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",24),r.Lb(1,"p"),r.ic(2),r.Kb(),r.Lb(3,"div",25),r.Sb("click",function(){r.ec(t);const n=e.index;return r.Ub(2).removeEl(n)}),r.ic(4,"X"),r.Kb(),r.Kb()}if(2&t){const t=e.$implicit;r.yb(2),r.jc(t)}}function rO(t,e){if(1&t&&(r.Lb(0,"div",22),r.hc(1,nO,5,1,"div",23),r.Kb()),2&t){const t=r.Ub();r.yb(1),r.Yb("ngForOf",t.filesNames)}}function iO(t,e){1&t&&(r.Lb(0,"div",26),r.Jb(1,"img",27),r.Kb())}const oO=function(t){return{green:t}};function sO(t,e){if(1&t){const t=r.Mb();r.Lb(0,"tr"),r.Lb(1,"td"),r.ic(2),r.Vb(3,"date"),r.Kb(),r.Lb(4,"td"),r.ic(5),r.Kb(),r.Lb(6,"td"),r.ic(7),r.Vb(8,"MbPipe"),r.Kb(),r.Lb(9,"td"),r.Lb(10,"a",28),r.ic(11),r.Kb(),r.Kb(),r.Lb(12,"td"),r.Lb(13,"button",29),r.Sb("click",function(){r.ec(t);const n=e.$implicit;return r.Ub().copyFileLink(n.url,n.id)}),r.ic(14,"Copy"),r.Kb(),r.Kb(),r.Lb(15,"td"),r.Lb(16,"button",30),r.Sb("click",function(){r.ec(t);const n=e.$implicit;return r.Ub().deleteFileChek(n.url,n.id)}),r.ic(17,"Delete"),r.Kb(),r.Kb(),r.Kb()}if(2&t){const t=e.$implicit,n=r.Ub();r.yb(2),r.jc(r.Xb(3,6,t.date.toDate(),"dd.MM.yyyy")),r.yb(3),r.jc(t.name),r.yb(2),r.jc(r.Wb(8,9,t.size)),r.yb(3),r.Zb("href",t.url,r.fc),r.Yb("ngClass",r.ac(11,oO,t.id==n.fileId)),r.yb(1),r.jc(t.url)}}function aO(t,e){1&t&&(r.Lb(0,"p",31),r.ic(1,"There are no files uploaded"),r.Kb())}function uO(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",32),r.Lb(1,"div",33),r.Lb(2,"p"),r.ic(3,"\u0410re you sure you want to delete the file?"),r.Kb(),r.Lb(4,"div",34),r.Lb(5,"button",35),r.Sb("click",function(){return r.ec(t),r.Ub().confirmationYes()}),r.ic(6,"Yes"),r.Kb(),r.Lb(7,"button",35),r.Sb("click",function(){return r.ec(t),r.Ub().confirmationNo()}),r.ic(8,"No"),r.Kb(),r.Kb(),r.Kb(),r.Kb()}}const cO=function(t,e,n){return{green:t,orange:e,red:n}};let lO=(()=>{class t{constructor(t,e,n,r,i){this.formBuilder=t,this.angularFireStorage=e,this.firestore=n,this.authService=r,this.subjects=i,this.title="file-uploader",this.files=[],this.filesNames=[],this.fileURLs=[],this.uploadedFiles=[],this.isLoading=!0,this.filesSize=0,this.fileId=null,this.confirmationPopup=!1}ngOnInit(){this.filesUploadForm=this.formBuilder.group({files:new Bo(null,so.required)}),this.firestore.getFiles().subscribe(t=>{this.filesSize=0,this.uploadedFiles=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()));for(let e=0;e<this.uploadedFiles.length;e++)this.filesSize+=this.uploadedFiles[e].size;this.isLoading=!1});const t=JSON.parse(localStorage.getItem("userData"));t&&this.firestore.getUser(t.email).subscribe(t=>{this.userAdditionalData=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.confirmBeforeDelete=this.userAdditionalData[0].confirmDelete})}uploadFiles(t){for(let e=0;e<t.target.files.length;e++)this.files.push(t.target.files[e]),this.filesNames.push(t.target.files[e].name)}uploadFilesToFirestore(){return new Promise(t=>{0==this.files.length&&(this.filesUploadForm.value.files=this.fileURLs,t());for(let e=0;e<this.files.length;e++)this.angularFireStorage.upload("/files/"+this.filesNames[e],this.files[e]).then(e=>{e.ref.getDownloadURL().then(e=>{this.fileURLs.push(e),this.fileURLs.length==this.filesNames.length&&(this.filesUploadForm.value.files=this.fileURLs,t())})})})}onSubmit(t){t.valid&&(this.isLoading=!0,this.uploadFilesToFirestore().then(()=>{for(let t=0;t<this.files.length;t++){const e=this.files[t].name,n=this.files[t].size,r=Rn.a.firestore.Timestamp.now();this.firestore.uploadFiles({name:e,size:n,date:r,url:this.fileURLs[t]}).then(()=>{this.isLoading=!1,t==this.files.length-1&&(this.filesUploadForm.reset(),this.files=[],this.filesNames=[],this.fileURLs=[])})}}))}deleteFile(t,e){this.firestore.deleteFile(t),this.firestore.deleteFileInfo(e)}deleteFileChek(t,e){this.confirmBeforeDelete?(this.confirmationPopup=!0,this.currentUrl=t,this.currentId=e):this.deleteFile(t,e)}confirmationNo(){this.confirmationPopup=!1}confirmationYes(){this.deleteFile(this.currentUrl,this.currentId),this.confirmationPopup=!1}removeEl(t){this.files.splice(t,1),this.filesNames.splice(t,1)}copyFileLink(t,e){navigator.clipboard.writeText(t),this.fileId=e}logOut(){this.authService.logout()}confirmDelete(t){const e=this.userAdditionalData[0].id;t.target.checked?(this.confirmBeforeDelete=!0,this.firestore.updateUser({isChecked:this.confirmBeforeDelete,userId:e})):(this.confirmBeforeDelete=!1,this.firestore.updateUser({isChecked:this.confirmBeforeDelete,userId:e}))}onEnableLoginReport(){this.enableLoginReport=!this.enableLoginReport,this.subjects.enableLoginReportSubject.next(this.enableLoginReport)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(as),r.Ib(Di),r.Ib(QC),r.Ib(XC),r.Ib(JC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-files"]],decls:47,vars:17,consts:[[1,"container"],[4,"ngIf"],[1,"logout-btn-conteainer"],[1,"btn-default","login-report-btn",3,"click"],[1,"btn-default",3,"click"],[1,"upload-files"],["class","upload-files__files",4,"ngIf"],["class","upload-files__img",4,"ngIf"],[1,"upload-section"],[3,"formGroup","ngSubmit"],["formControlName","files","type","file","multiple","multiple",2,"display","none",3,"change"],["chooseFiles",""],["type","button",1,"upload-section__button","upload-section__choose",3,"click"],["type","submit",1,"upload-section__button","upload-section__upload",3,"disabled"],[1,"used-mb"],[3,"ngClass"],["for","confirm-delete"],["type","checkbox","id","confirm-delete","name","confirm-delete",3,"checked","change"],[1,"table1"],[4,"ngFor","ngForOf"],["class","no-files-uploaded",4,"ngIf"],["class","confirm-delete-popup",4,"ngIf"],[1,"upload-files__files"],["class","upload-files__files__el",4,"ngFor","ngForOf"],[1,"upload-files__files__el"],[1,"upload-files__files__el__button",3,"click"],[1,"upload-files__img"],["src","../assets/img/upload-img.png"],[3,"ngClass","href"],[1,"table1__copy",3,"click"],[1,"table1__delete",3,"click"],[1,"no-files-uploaded"],[1,"confirm-delete-popup"],[1,"confirm-delete-popup__options"],[1,"confirm-delete-popup__options__btns"],[1,"btn-default","confirmd-delete-btn",3,"click"]],template:function(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",0),r.hc(1,eO,1,0,"app-loading-spinner",1),r.Lb(2,"div",2),r.Lb(3,"button",3),r.Sb("click",function(){return e.onEnableLoginReport()}),r.ic(4,"Login report"),r.Kb(),r.Lb(5,"button",4),r.Sb("click",function(){return e.logOut()}),r.ic(6,"Logout"),r.Kb(),r.Kb(),r.Lb(7,"div",5),r.hc(8,rO,2,1,"div",6),r.hc(9,iO,2,0,"div",7),r.Kb(),r.Lb(10,"div",8),r.Lb(11,"form",9),r.Sb("ngSubmit",function(){return e.onSubmit(e.filesUploadForm)}),r.Lb(12,"input",10,11),r.Sb("change",function(t){return e.uploadFiles(t)}),r.Kb(),r.Lb(14,"button",12),r.Sb("click",function(){return r.ec(t),r.dc(13).click()}),r.ic(15,"Ch\u043eose Files"),r.Kb(),r.Lb(16,"button",13),r.ic(17,"Upload Files"),r.Kb(),r.Kb(),r.Kb(),r.Lb(18,"div",14),r.Lb(19,"div"),r.Lb(20,"p"),r.ic(21," Used "),r.Lb(22,"span",15),r.ic(23),r.Vb(24,"MbPipe"),r.Kb(),r.ic(25," of 1000 MB "),r.Kb(),r.Kb(),r.Lb(26,"div"),r.Lb(27,"label",16),r.ic(28,"Cofirmation before delete"),r.Kb(),r.Lb(29,"input",17),r.Sb("change",function(t){return e.confirmDelete(t)}),r.Kb(),r.Kb(),r.Kb(),r.Lb(30,"table",18),r.Lb(31,"tr"),r.Lb(32,"th"),r.ic(33,"Upload Date"),r.Kb(),r.Lb(34,"th"),r.ic(35,"File Name"),r.Kb(),r.Lb(36,"th"),r.ic(37,"Size"),r.Kb(),r.Lb(38,"th"),r.ic(39,"Download link"),r.Kb(),r.Lb(40,"th"),r.ic(41,"Copy"),r.Kb(),r.Lb(42,"th"),r.ic(43,"Delete"),r.Kb(),r.Kb(),r.hc(44,sO,18,13,"tr",19),r.Kb(),r.hc(45,aO,2,0,"p",20),r.hc(46,uO,9,0,"div",21),r.Kb()}2&t&&(r.yb(1),r.Yb("ngIf",e.isLoading),r.yb(7),r.Yb("ngIf",e.files.length>0),r.yb(1),r.Yb("ngIf",0==e.files.length),r.yb(2),r.Yb("formGroup",e.filesUploadForm),r.yb(5),r.Yb("disabled",!e.filesUploadForm.valid||0==e.files.length),r.yb(6),r.Yb("ngClass",r.bc(13,cO,e.filesSize<=524288e3,e.filesSize>524288e3&&e.filesSize<=734003200,e.filesSize>734003200)),r.yb(1),r.jc(r.Wb(24,11,e.filesSize)),r.yb(6),r.Yb("checked",e.confirmBeforeDelete),r.yb(15),r.Yb("ngForOf",e.uploadedFiles),r.yb(1),r.Yb("ngIf",0==e.uploadedFiles.length),r.yb(1),r.Yb("ngIf",e.confirmationPopup))},directives:[ut,$o,to,Jo,Gi,Zi,os,it,st,ZC],pipes:[tO,ht],encapsulation:2}),t})();function hO(t,e){1&t&&r.Jb(0,"app-loading-spinner")}function fO(t,e){1&t&&(r.Lb(0,"li"),r.ic(1," Please enter your email! "),r.Kb())}function dO(t,e){1&t&&(r.Lb(0,"li"),r.ic(1," Please enter a valid email! "),r.Kb())}function pO(t,e){1&t&&(r.Lb(0,"li"),r.ic(1," Please enter a passowrd! "),r.Kb())}function gO(t,e){1&t&&(r.Lb(0,"li"),r.ic(1," The password could not be longer then 30 symbols! "),r.Kb())}function yO(t,e){1&t&&(r.Lb(0,"li"),r.ic(1," The password should be at least 8 symbols! "),r.Kb())}function vO(t,e){if(1&t&&(r.Lb(0,"p",17),r.ic(1),r.Kb()),2&t){const t=r.Ub();r.yb(1),r.jc(t.errorMsgOnSubmit)}}let mO=(()=>{class t{constructor(t,e,n){this.authService=t,this.router=e,this.firestore=n,this.errorMsgOnSubmit=null,this.isLoading=!1}ngOnInit(){this.signinForm=new Wo({email:new Bo(null,[so.required,so.email]),password:new Bo(null,[so.required,so.minLength(8),so.maxLength(30)])})}onSubmit(t){this.isLoading=!0;const e=t.value.email,n={date:Rn.a.firestore.Timestamp.now(),email:e};this.authService.signIn(e,t.value.password).subscribe(()=>{this.errorMsgOnSubmit=null,this.router.navigate(["/files"]),this.isLoading=!1,this.firestore.postLastLogins(n)},t=>{this.errorMsgOnSubmit=t,this.isLoading=!1,this.firestore.postFailedLogins(n)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(XC),r.Ib(nc),r.Ib(QC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-sign-form"]],decls:30,vars:9,consts:[["id","test",1,"container","container-login-form"],[1,"sign-form",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"sign-form__sign-up-header"],[1,"hr-border"],[1,"sign-form__sign-element"],["for","email"],[1,"email"],[1,"email-img"],["type","text","name","email","formControlName","email"],[1,"sign-error"],["for","password"],[1,"password"],[1,"password-img"],["type","password","name","password","formControlName","password"],["type","submit",1,"btn-default",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"form",1),r.Sb("ngSubmit",function(){return e.onSubmit(e.signinForm)}),r.hc(2,hO,1,0,"app-loading-spinner",2),r.Lb(3,"div",3),r.Lb(4,"h2"),r.ic(5,"Login"),r.Kb(),r.Kb(),r.Jb(6,"hr",4),r.Lb(7,"div",5),r.Lb(8,"label",6),r.ic(9,"Email"),r.Kb(),r.Lb(10,"div",7),r.Jb(11,"div",8),r.Jb(12,"input",9),r.Kb(),r.Lb(13,"ul",10),r.hc(14,fO,2,0,"li",2),r.hc(15,dO,2,0,"li",2),r.Kb(),r.Kb(),r.Lb(16,"div",5),r.Lb(17,"label",11),r.ic(18,"Password"),r.Kb(),r.Lb(19,"div",12),r.Jb(20,"div",13),r.Jb(21,"input",14),r.Kb(),r.Lb(22,"ul",10),r.hc(23,pO,2,0,"li",2),r.hc(24,gO,2,0,"li",2),r.hc(25,yO,2,0,"li",2),r.Kb(),r.Kb(),r.Lb(26,"div"),r.Lb(27,"button",15),r.ic(28,"Sign in"),r.Kb(),r.hc(29,vO,2,1,"p",16),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(1),r.Yb("formGroup",e.signinForm),r.yb(1),r.Yb("ngIf",e.isLoading),r.yb(12),r.Yb("ngIf",!e.signinForm.get("email").valid&&!e.signinForm.get("email").hasError("email")&&e.signinForm.get("email").touched),r.yb(1),r.Yb("ngIf",e.signinForm.get("email").hasError("email")&&e.signinForm.get("email").touched),r.yb(8),r.Yb("ngIf",!e.signinForm.get("password").valid&&!e.signinForm.get("password").hasError("maxlength")&&!e.signinForm.get("password").hasError("minlength")&&e.signinForm.get("password").touched),r.yb(1),r.Yb("ngIf",e.signinForm.get("password").hasError("maxlength")&&e.signinForm.get("password").touched),r.yb(1),r.Yb("ngIf",e.signinForm.get("password").hasError("minlength")&&e.signinForm.get("password").touched),r.yb(2),r.Yb("disabled",!e.signinForm.valid),r.yb(2),r.Yb("ngIf",e.errorMsgOnSubmit))},directives:[$o,to,Jo,ut,Gi,Zi,os,ZC],encapsulation:2}),t})();const bO=[{path:"",redirectTo:"files",pathMatch:"full"},{path:"files",component:lO,canActivate:[(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.user.pipe(Object(te.a)(t=>!!t||this.router.createUrlTree(["/login"])))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(XC),r.Pb(nc))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"login",component:mO,canActivate:[(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.user.pipe(Object(te.a)(t=>!t||this.router.createUrlTree(["/files"])))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(XC),r.Pb(nc))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}];let _O=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[dc.forRoot(bO)],dc]}),t})();function wO(t,e){if(1&t&&(r.Lb(0,"li"),r.ic(1),r.Kb()),2&t){const t=e.$implicit;r.yb(1),r.jc(t.email)}}function EO(t,e){if(1&t&&(r.Lb(0,"li"),r.ic(1),r.Vb(2,"date"),r.Kb()),2&t){const t=e.$implicit;r.yb(1),r.kc("",t.email," - ",r.Xb(2,2,t.date.toDate(),"dd.MM.yyyy H:mm"),"")}}function CO(t,e){if(1&t&&(r.Lb(0,"li"),r.ic(1),r.Vb(2,"date"),r.Kb()),2&t){const t=e.$implicit;r.yb(1),r.kc("",t.email," - ",r.Xb(2,2,t.date.toDate(),"dd.MM.yyyy H:mm"),"")}}let OO=(()=>{class t{constructor(t){this.firestore=t,this.users=[],this.lastLogins=[],this.failedLogins=[],this.loginReportCount=10}ngOnInit(){this.firestore.getUsers().subscribe(t=>{this.users=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))}),this.firestore.getLastLogins().subscribe(t=>{this.lastLogins=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.lastLogins.length>this.loginReportCount&&this.firestore.deleteLastLogins(this.lastLogins[this.loginReportCount].id)}),this.firestore.getFailedLogins().subscribe(t=>{this.failedLogins=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),this.failedLogins.length>this.loginReportCount&&this.firestore.deleteFailedLogins(this.failedLogins[this.loginReportCount].id)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(QC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-login-report"]],decls:19,vars:3,consts:[[1,"login-report"],[1,"login-report__title"],[1,"login-report__content"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"p",1),r.ic(2,"\u0425istory of the last 10 successful and failed logins"),r.Kb(),r.Lb(3,"div",2),r.Lb(4,"div"),r.Lb(5,"p",1),r.ic(6,"All registrations"),r.Kb(),r.Lb(7,"ul"),r.hc(8,wO,2,1,"li",3),r.Kb(),r.Kb(),r.Lb(9,"div"),r.Lb(10,"p",1),r.ic(11,"Last logins"),r.Kb(),r.Lb(12,"ul"),r.hc(13,EO,3,5,"li",3),r.Kb(),r.Kb(),r.Lb(14,"div"),r.Lb(15,"p",1),r.ic(16,"Failed logins"),r.Kb(),r.Lb(17,"ul"),r.hc(18,CO,3,5,"li",3),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(8),r.Yb("ngForOf",e.users),r.yb(5),r.Yb("ngForOf",e.lastLogins),r.yb(5),r.Yb("ngForOf",e.failedLogins))},directives:[st],pipes:[ht],encapsulation:2}),t})();function TO(t,e){1&t&&r.Jb(0,"app-login-report")}let SO=(()=>{class t{constructor(t,e){this.authService=t,this.subjects=e,this.isAuth=!1}ngOnInit(){this.subUser=this.authService.user.subscribe(t=>{this.isAuth=!!t}),this.authService.autoLogin(),this.enableLoginReportSub=this.subjects.enableLoginReportSubject.subscribe(t=>{this.enableLoginReport=t})}ngOnDestroy(){this.subUser.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(XC),r.Ib(JC))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(r.hc(0,TO,1,0,"app-login-report",0),r.Jb(1,"router-outlet")),2&t&&r.Yb("ngIf",e.isAuth&&e.enableLoginReport)},directives:[ut,rc,OO],encapsulation:2}),t})(),IO=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[ft]]}),t})(),xO=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[SO]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[],imports:[[Wt,_O,us,Pe,Ne.a.initializeApp(i),Yn,Fi,IO]]}),t})();Object(r.S)(),zt().bootstrapModule(xO).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);